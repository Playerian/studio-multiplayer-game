{"version":3,"sources":["games/googlegossip/Logo.png","games/googlegossip/Whisper icon.png","games/werewolf/components/Lobby/Game/cross.png","DataViewer.js","GameComponent.js","UserApi.js","games/chatroom/ChatRoom.js","games/cookieClicker/Time.js","games/cookieClicker/Scorebored.js","games/cookieClicker/Cookie.js","games/cookieClicker/GameOver.js","games/cookieClicker/CookieClicker.js","games/googlegossip/GoogleGossip.js","games/mafia/Day.js","games/mafia/Night.js","games/mafia/Announcment.js","games/mafia/Mafia.js","games/multiplication/Multiplication.js","games/pokemon/Pokemon.js","games/pong/Pong.js","games/rps/RockPaperScissors.js","games/spark/Spark.js","games/tictactoe/TicTacToe.js","games/TugOfWar/TugOfWar.js","games/twentyOneQuestions/TwentyOneQuestions.js","games/Burst_Forth/burstForth.js","games/fight/character.js","games/fight/fight.js","games/fight/sketch.js","games/uno/uno.js","games/werewolf/components/Lobby/LobbyTop/TopInfo/TopInfo.js","games/werewolf/components/Lobby/LobbyTop/LobbyTop.js","games/werewolf/components/Lobby/LobbyBot/LobbyCreateRoomButton/LobbyCreateRoomButton.js","games/werewolf/components/Lobby/LobbyBot/LobbyCreateRoomOption/LobbyCreateRoomOption.js","games/werewolf/components/Lobby/LobbyBot/LobbyRoomList/LobbyRoomList.js","games/werewolf/components/Lobby/LobbyBot/LobbyRoom/LobbyRoom.js","games/werewolf/components/Lobby/LobbyBot/LobbyBot.js","games/werewolf/components/Lobby/LobbyChat/LobbyChat.js","games/werewolf/components/Lobby/Game/GameMid/GameMid.js","games/werewolf/components/Lobby/Game/Game.js","games/werewolf/components/Lobby/Lobby.js","games/werewolf/Werewolf.js","gameData.js","Header.js","UnknownGameType.js","AddGameButton.js","FilterSelect.js","GameCard.js","WaitingRoom.js","App.js","registerServiceWorker.js","index.js"],"names":["module","exports","DB_STATE","Object","freeze","UNINITIALIZED","LOADING","LOADED","DatabaseViewer","props","state","db_state","data","expanded","this","setState","firebase","database","ref","once","snapshot","val","console","error","name","collapsed","src","className","style","boxShadow","disabled","onChange","e","handleExpanded","paddingLeft","expandIcon","display","textAlign","renderDatabaseViewer","Component","GameComponent","document","title","getSessionTitle","metadata","child","getSessionId","match","params","id","location","Error","users","warn","creator","auth","currentUser","uid","getSessionDatabaseRef","on","onSessionDataChanged","getSessionMetadataDatabaseRef","sessionMetadata","type","gameData","newState","onSessionMetadataChanged","prevProps","prevState","off","React","UserApi","hasUid","photoURL","Date","lastSignIn","UserApiConfig","usersDatabaseRef","Promise","resolve","ChatRoom","chats","input","keys","map","message","timestamp","user","sort","a","b","key","length","chatData","ServerValue","TIMESTAMP","getMyUserId","push","chatListItems","slice","chat","i","opacity","primaryText","getName","secondaryText","leftAvatar","getPhotoUrl","margin","label","fullWidth","event","target","value","onKeyPress","handleKeyEvent","Time","seconds","minutes","paddedSeconds","Scorebored","PlayerOne","winOrLoss","PlayerTwo","p1s","p2s","startTimemin","startTimesec","currentScore","onClick","multipleClicks","ClickableCookie","score","alt","clickHandler","controls","autoplay","loop","GameOver","CookieClicker","hostScore","guestScore","hasGameStarted","timelefts","timeleftm","update","number","cost","getSessionCreatorUserId","that","interval","setInterval","clearInterval","winner","getSessionUserIds","time","winOrLos","winningOrLosing","updateScore","startGame","GoogleGossip","set","user_id","currentPlayer","statements","truth","guess","isLandingPage","isFormPage","isPickAnswerForm","isWaitPage","Button_idx","log","class","Logo","variant","color","submitTea","shouldShowCorrect","shouldShowIncorrect","handleButtonClick","idx","newStatements","parseInt","Whisper","onSubmit","handleFormSubmit","handleFormChange","required","handleLieChange","maxLength","landingPageRender","submitAQuestionRender","pickAnAnswerRender","waitPageRender","Day","Night","buttonsDisabled","handleKill","content","players","role","listItems","onButtonClick","Announcment","killedPlayers","string","roles","Mafia","description","Citizen","Police","Doctors","Specate","phase","databaseRef","newArray","concat","setDataVar","myId","temp","array","temporaryValue","randomIndex","currentIndex","Math","floor","random","self","result","sessionId","sessionDatabaseRef","hostId","userpath","usersRef","numUsers","numMafia","ceil","shuffle","currentTime","advancePhase","player","findMyPlayer","getDataVar","WordGuessing","answer","answer_uid","start","your_answer","your_uid","sessionSnapshot","handleAnswerText","bind","marginLeft","submitAnswer","size","Pokemon","playerOne","playerOneHealth","playerOneTrainer","playerTwo","playerTwoHealth","playerTwoTrainer","randomNumber","gameReset","primary","playerOneAttack","playerTwoAttack","W","H","R","Pong","isCreator","session","ball","started","onGameStarted","onGameOver","initState","x","y","dx","dy","left","userid","height","right","forEach","gameLoop","updateBall","paddleHeight","clientY","justifyContent","position","backgroundColor","width","cursor","onMouseMove","paddleWidth","top","borderRadius","gameOverMessages","Rock","Paper","Scissors","RockPaperScissors","choice","opponent","userChoice","select","styles","root","flexWrap","gridList","overflowY","ButtonStyle","bottom","marginBottom","zIndex","Spark","path","sessionRef","posts","urlInput","userInput","open","image","newValue","values","actions","handleClose","secondary","handleCancel","modal","handleUrlChange","hintText","floatingLabelText","handleUserChange","GridList","cellHeight","tile","rightIcon","handleOpen","State","TicTacToe","cellState","Array","fill","cell_state","current_user","find","getMyCellState","databaseState","getOtherUser","isWinner","isX","cell","every","headerText","currentUserName","winnerState","getWinner","isMyTurn","allCellsDisabled","cells","playTurn","TugOfWar","defaultValue","setDocumentKeyPressHandler","body","onkeyup","keyCode","gameOver","newCounter","abs","getSpaceBarDifference","counters","arr","obj","resetButton","getWinnerUserId","onResetButtonClicked","gameMessage","TwentyOneQuestions","handleInsertQChange","handleInsertAChange","handleSubmit","insertA","insertQ","question","check","answer2","tally1","tally2","answerIsCorrect","reset","hidden","cUser","isGameFinished","handleChange","question1","question2","quest1","quest2","list","item","keyboardFocused","Tabs","flexDirection","placeholder","onRequestClose","clientWidth","windowWidth","derp","line","numGone","goneBlocks","durability","0","1","2","3","block","ranDurability","durabilityNum","save","block1","block2","block3","block4","block5","block6","block7","block8","block9","block10","block11","block12","block13","block14","block15","block16","block17","block18","blocks","eBlock1","eBlock2","eBlock3","eBlock4","eBlock5","eBlock6","eBlock7","eBlock8","eBlock9","eBlock10","eBlock11","eBlock12","eBlock13","eBlock14","eBlock15","eBlock16","eBlock17","eBlock18","blocks2","burst_Forth","ballMove","paddleY","ballR","ballSpeedX","ballSpeedY","ball2","left2","top2","ballR2","ballSpeedX2","ballSpeedY2","you","p2","win","P1","x_cord","P2","q","checkWin","currentBlock","checkBlock","currentBlock2","clientX","background","postion","flex","paddingTop","fontSize","marginTop","animationName","animationDuration","padding","float","border","lineW","character","magician","hp","attack_damage","defense","speed","fight","updateFirebase","getMyUser","thisCharacter","p1","characterType","playerLocation","playerAction","jump","basic_attack","ability_1","ability_2","ability_3","facing","sketch","getState","identifyCharacter","p","magicianPic","normal","mirrored","MagicBall","preload","loadImage","setup","createCanvas","noStroke","frameRate","setupPlayerLocation","Magician","Warrior","draw","checkingAction","keyPressed","displayMagicBall","displayHealth","full_hp","basic_attack_disabled","disabled_timer","action","enemy","damaged","damage","dies","radius","disappear_after","arc","PI","collision","splice","keyIsDown","checkLocation","health_bar","xPos","yPos","stroke","rect","textSize","text","char","uno","allCards","suits","v","s","leftSide","j","rightSide","readyplayer1","readyplayer2","stack1","stack2","pile1","pile2","isNextRoundButtonDisabled","isButtonDisabled","playerOneReady","buttonDisabled","card","shift","checkWinner","playerTwoReady","disabledNextRoundButton","isbuttonEnabled","playCard1","nextRound","playCard2","TopInfo","LobbyTop","userProfilePic","username","LobbyCreateRoomButton","onCreateRoomButton","LobbyCreateRoomOption","roomName","maxPlayer","onCreateRoom","handleRoomNameChange","handlePlayerChange","LobbyRoomList","room","onRoomJoin","roomList","roomJSX","thekey","inGame","userList","onRoomJoinClick","LobbyRoom","myself","roomID","onRoomExit","onStartGame","playerList","playerJSX","profilePic","buttons","creatorKey","LobbyBot","showing","max","bottomContent","currentShowing","LobbyChat","inputValue","currentTab","sendMessage","tabName","chatList","tabsJSX","handleTabClick","replace","currentChat","displayChat","picture","unshift","handleInputChange","GameMid","exitGame","JSX","endGameJSX","isDead","showButton","Game","game","undefined","selecting","index","stopPropagation","me","place","thing","commandList","command","handleUserClick","Number","isInteger","guessJSX","topJSX","rightJSX","botJSX","leftJSX","extraPeopleTable","peopleCount","tableIndex","currentPeople","extra","isColumn","investResult","judge","containerStyle","backgroundImage","CrossImg","handleGuessClick","handlePickClick","end","Lobby","updateCommand","m","r","receiveChatMessage","Werewolf","pulse","didGameStarted","timer","onMounted","userSessionId","firebaseRef","getId","beforeunloadFunction","onUnload","window","addEventListener","fbReferenceWithHope","onDisconnect","preventDefault","removeEventListener","clearTimeout","fb","virtualServer","remove","component","LocalUser","newRef","objData","userListData","limitToFirst","roomListRef","onRoomListChange","lobbyRef","lobby","lobbyChat","nextPulse","setTimeout","dataVal","petition","numOfPetition","userListLength","currentPulse","orderByKey","startAt","next","realUserList","aliveList","deadList","done","Chat","werewolfChat","speakerKey","gameChat","Room","alert","gameStarted","creatorId","userId","updateUserFirebase","onGameUpdate","timeoutMs","step","getUserKeyByRole","Command","userKeys","indexArray","validateCommand","findVotingResult","killing","resetCommandList","userKey","curing","overdose","judgeWords","successfulCure","removePlayer","indexA","discussionIndex","cValue","randomInt","userObj","gameCheckWin","timerID","runningTheGame","inheritor","sample","aliveIndex","三千世界","佛法","佛曰","佛","arrayVote","theList","dupeMax","maxIndex","ww","userProfilePicUrl","userListJSX","roomChat","onChatMessage","createRoom","String","substring","roleList","playerNum","roleIndex","numIndex","num","day","targetKey","min","fet","fetAll","cleanse","chatroom","authors","minUsers","maxUsers","tictactoe","rockpaperscissors","multiplication","Multiplication","pong","pokemon","questions","photosharing","maxUserss","mafia","cookieClicker","Burst_Forth","googlegossip","werewolf","author","Infinity","Header","drawerOpen","signOut","catch","parts","pathname","split","marginRight","setDrawerOpen","flexGrow","getTitle","displayName","onClose","primaryTypographyProps","Link","textDecoration","to","isInWaitingRoom","withRouter","UnknownGameType","dialog_open","disableBackdropClick","disableEscapeKeyDown","autoFocus","AddGameMenuItem","sessionData","addGame","AddGameButton","popoverOpen","anchorEl","currentTarget","menuItems","closePopover","openPopover","FilterSelect","onFilterGames","filterType","FILTER_TYPE","MY_GAMES","GAMES_WITH_SPACE","GAMES_I_AM_IN","ALL_GAMES","GameCard","gameDataExists","getGameData","date","Intl","DateTimeFormat","hour","minute","month","second","timeZone","weekday","year","format","transaction","indexOf","committed","then","deleteSessionMetadata","isInSession","gameActionButton","userListItems","shouldShowStartButton","getGamePath","joinSession","isFull","handleExpand","subheader","getSubtitle","in","timeout","unmountOnExit","getDescription","paragraph","getUserListHeader","getAuthors","deleteSession","isGameCreator","cardStyle","WaitingRoom","sessions","sessionsSnapshot","my_uid","filter","getFilterFunction","cards","f","buttonStyle","App","authIsLoading","userApiIsLoading","apps","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","onAuthStateChanged","startListeningForChanges","stopListeningForChanges","provider","GoogleAuthProvider","signInWithRedirect","gameRoutes","Route","Switch","exact","DataViewer","signIn","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","ReactDOM","render","BrowserRouter","getElementById","URL","process","origin","fetch","response","status","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.214c48ea.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Logo.4454a02b.png\";","module.exports = __webpack_public_path__ + \"static/media/Whisper icon.1687bbe5.png\";","module.exports = __webpack_public_path__ + \"static/media/cross.0ee69f12.png\";","import ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Card from '@material-ui/core/Card';\r\nimport React, { Component } from 'react';\r\nimport ReactJson from 'react-json-view'\r\nimport firebase from 'firebase';\r\n\r\n\r\nconst DB_STATE = Object.freeze({\r\n  UNINITIALIZED: 0,\r\n  LOADING: 1,\r\n  LOADED: 2,\r\n});\r\n\r\nclass DatabaseViewer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      db_state: DB_STATE.UNINITIALIZED,\r\n      data: null,\r\n    };\r\n  }\r\n\r\n  handleExpanded(expanded) {\r\n    if (expanded) {\r\n      switch (this.state.db_state) {\r\n        case DB_STATE.UNINITIALIZED:\r\n          this.setState({ db_state: DB_STATE.LOADING });\r\n          firebase.database().ref(\"/\").once(\"value\", (snapshot) => {\r\n            // Check if user data firebase download is done yet.\r\n            this.setState({\r\n              db_state: DB_STATE.LOADED,\r\n              data: snapshot.val(),\r\n            });\r\n          });\r\n          break;\r\n        case DB_STATE.LOADING:  // Fall through.\r\n        case DB_STATE.LOADED:\r\n          break;\r\n        default:\r\n          console.error(\"Invalid DB state\", this.state.db_state);\r\n      }\r\n    }\r\n  }\r\n\r\n  renderDatabaseViewer() {\r\n    switch (this.state.db_state) {\r\n      case DB_STATE.UNINITIALIZED:  // Fall through.\r\n      case DB_STATE.LOADING:\r\n        return <Typography>Loading...</Typography>;\r\n      case DB_STATE.LOADED:\r\n        return (\r\n            <ReactJson\r\n                name=\"/\"\r\n                collapsed={1}\r\n                src={this.state.data}\r\n            />\r\n        );\r\n      default:\r\n        console.error(\"Invalid DB state\", this.state.db_state);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Card className=\"Container\">\r\n        <ExpansionPanel\r\n          style={{boxShadow: 'none'}}\r\n          disabled={this.props.disabled}\r\n          onChange={(e, expanded) => this.handleExpanded(expanded)}>\r\n\r\n          <ExpansionPanelSummary\r\n            style={{paddingLeft: 0}}\r\n            expandIcon={<ExpandMoreIcon />}>\r\n            <Typography>\r\n              Expand to see JSON view of entire database\r\n            </Typography>\r\n          </ExpansionPanelSummary>\r\n\r\n          <ExpansionPanelDetails\r\n            style={{display: 'block', paddingLeft: 0, textAlign: 'left'}}>\r\n            {this.renderDatabaseViewer()}\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DatabaseViewer;\r\n\r\n","import React from 'react';\r\nimport firebase from 'firebase';\r\nimport gameData from './gameData.js';\r\n\r\nconst SESSION_DATA_PATH = \"/session\";\r\nconst SESSION_METADATA_PATH = \"/session-metadata\";\r\n\r\nexport default class GameComponent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    document.title = this.getSessionTitle();\r\n  }\r\n\r\n  /**\r\n   * Called whenever the session data stored at '/session/<id>/' changes.\r\n   * Passes said data as the argument. Guaranteed non-null.\r\n   */\r\n  onSessionDataChanged(data) {\r\n    // No-op by default.\r\n  }\r\n\r\n  /**\r\n   * Called whenever the session metadata stored at '/session-metadata/<id>/'\r\n   * changes. Passes said data as the argument. Guaranteed non-null.\r\n   */\r\n  onSessionMetadataChanged(metadata) {\r\n    // No-op by default.\r\n  }\r\n\r\n  /**\r\n   * Returns a Firebase real-time database reference to the current session\r\n   * data, i.e. '/session/<id>/'.\r\n   */\r\n  getSessionDatabaseRef() {\r\n    return firebase.database()\r\n        .ref(SESSION_DATA_PATH)\r\n        .child(this.getSessionId());\r\n  }\r\n\r\n  /**\r\n   * Returns a Firebase real-time database reference to the current session\r\n   * metadata, i.e. '/session-metadata/<id>/'.\r\n   */\r\n  getSessionMetadataDatabaseRef() {\r\n    return firebase.database()\r\n        .ref(SESSION_METADATA_PATH)\r\n        .child(this.getSessionId());\r\n  }\r\n\r\n  /** Returns the current session ID as stored in Firebase.  */\r\n  getSessionId() {\r\n    if (this.props &&\r\n        this.props.match &&\r\n        this.props.match.params &&\r\n        this.props.match.params.id) {\r\n      return this.props.match.params.id;\r\n    }\r\n    if (this.props &&\r\n        this.props.location &&\r\n        this.props.location.state &&\r\n        this.props.location.state.id) {\r\n      return this.props.location.state.id;\r\n    }\r\n    throw new Error(\"Unable to get session ID from URL nor browser history\");\r\n  }\r\n\r\n  /** Returns the list of user IDs connected to the current session.  */\r\n  getSessionUserIds() {\r\n    if (this.state &&\r\n        this.state.metadata &&\r\n        this.state.metadata.users) {\r\n      return this.state.metadata.users;\r\n    }\r\n    if (this.props &&\r\n        this.props.location &&\r\n        this.props.location.state &&\r\n        this.props.location.state.users) {\r\n      return this.props.location.state.users;\r\n    }\r\n    console.warn(\"Session user list not yet available, using empty list\");\r\n    return [];\r\n  }\r\n\r\n  /** Returns the user ID of the one who created this current session. */\r\n  getSessionCreatorUserId() {\r\n    if (this.state &&\r\n        this.state.metadata &&\r\n        this.state.metadata.creator) {\r\n      return this.state.metadata.creator;\r\n    }\r\n    if (this.props &&\r\n        this.props.location &&\r\n        this.props.location.state &&\r\n        this.props.location.state.creator) {\r\n      return this.props.location.state.creator;\r\n    }\r\n    console.warn(\"Session creator ID not yet available, using empty string\");\r\n    return \"\";\r\n  }\r\n\r\n  /** Returns the session title, e.g., \"Rock, Paper, Scissors\" */\r\n  getSessionTitle() {\r\n    if (this.state &&\r\n        this.state.metadata &&\r\n        this.state.metadata.title) {\r\n      return this.state.metadata.title;\r\n    }\r\n    if (this.props &&\r\n        this.props.location &&\r\n        this.props.location.state &&\r\n        this.props.location.state.title) {\r\n      return this.props.location.state.title;\r\n    }\r\n    return \"Studio Games!\";  // Silently fall back to default value.\r\n  }\r\n\r\n  /** Returns the user ID of the current user, i.e. YOU. */\r\n  getMyUserId() {\r\n    if (firebase.auth() &&\r\n        firebase.auth().currentUser &&\r\n        firebase.auth().currentUser.uid) {\r\n      return firebase.auth().currentUser.uid;\r\n    }\r\n    throw new Error(\"Unable to get current user ID\");\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getSessionDatabaseRef().on(\"value\", snapshot => {\r\n      if (snapshot.val() !== null) {\r\n        this.onSessionDataChanged(snapshot.val());\r\n      }\r\n    });\r\n\r\n    this.getSessionMetadataDatabaseRef().on(\"value\", snapshot => {\r\n      let data = snapshot.val();\r\n      if (data !== null) {\r\n        let sessionMetadata = {\r\n          creator: data.creator,\r\n          users: data.users,\r\n        }\r\n        if (data.type in gameData) {\r\n          sessionMetadata.title = gameData[data.type].title;\r\n        }\r\n        let newState = this.state;\r\n        newState.metadata = sessionMetadata;\r\n        this.setState(newState);\r\n        this.onSessionMetadataChanged(data);\r\n      }\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    document.title = this.getSessionTitle();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.getSessionDatabaseRef().off();\r\n    this.getSessionMetadataDatabaseRef().off();\r\n  }\r\n}\r\n","import firebase from 'firebase';\r\n\r\n/** Static utility functions for fetching user metadata. */\r\nexport default class UserApi {\r\n\r\n  /** Returns true if the given user UID exists in memory. */\r\n  static hasUid(uid) {\r\n    return users === null || uid in users;\r\n  }\r\n\r\n  /** Returns the user's display name or null if it does not exist. */\r\n  static getName(uid) {\r\n    if (UserApi.hasUid(uid)) {\r\n      return users[uid].name;\r\n    } else {\r\n      console.warn(\"No user metadata found for UID\", uid);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /** Returns the user's photo URL or null if it does not exist. */\r\n  static getPhotoUrl(uid) {\r\n    if (UserApi.hasUid(uid)) {\r\n      return users[uid].photoURL;\r\n    } else {\r\n      console.warn(\"No user metadata found for UID\", uid);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /** Returns the user's last login date or null if it does not exist. */\r\n  static getLastSignIn(uid) {\r\n    if (UserApi.hasUid(uid)) {\r\n      return new Date(users[uid].lastSignIn);\r\n    } else {\r\n      console.warn(\"No user metadata found for UID\", uid);\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\n\r\nvar users = null; // In-memory cache of all user metadata.\r\n\r\nexport class UserApiConfig {\r\n  static startListeningForChanges() {\r\n    // Some browser-based IDEs cleverly reload the app without destroying the\r\n    // in-memory cache. Clear it before listening to Firebase changes to ensure\r\n    // Promise.resolve() is called.\r\n    users = null;\r\n\r\n    var usersDatabaseRef = firebase.database().ref(\"/user\");\r\n    // Returns a Promise that resolves whenever the first load completes.\r\n    return new Promise((resolve) => {\r\n      usersDatabaseRef.on(\"value\", (snapshot) => {\r\n        if (users === null) {\r\n          resolve();\r\n        }\r\n\r\n        if (snapshot.val() === null) {\r\n          users = {};\r\n        } else {\r\n          users = snapshot.val();\r\n        }\r\n      })\r\n    });\r\n  }\r\n\r\n  static stopListeningForChanges() {\r\n    firebase.database().ref(\"/user\").off();\r\n  }\r\n}\r\n","import Avatar from '@material-ui/core/Avatar';\r\nimport GameComponent from '../../GameComponent.js';\r\nimport React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport UserApi from '../../UserApi.js';\r\nimport firebase from 'firebase';\r\nimport { List, ListItem } from 'material-ui/List';\r\n\r\nexport default class ChatRoom extends GameComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      chats: [],\r\n      input: \"\",\r\n    };\r\n  }\r\n\r\n  onSessionDataChanged(data) {\r\n    var chats = Object.keys(data).map((id) => ({\r\n      id: id,\r\n      message: data[id].message,\r\n      timestamp: data[id].timestamp,\r\n      user: data[id].user,\r\n    }));\r\n    chats.sort((a, b) => b.timestamp - a.timestamp);\r\n    this.setState({ chats: chats });\r\n  }\r\n\r\n  handleKeyEvent(key) {\r\n    if (key === \"Enter\" && this.state.input.length > 0) {\r\n      var chatData = {\r\n        message: this.state.input,\r\n        timestamp: firebase.database.ServerValue.TIMESTAMP,\r\n        user: this.getMyUserId(),\r\n      }\r\n      this.getSessionDatabaseRef().push(chatData, (error) => {\r\n        if (error) {\r\n          console.error(\"Error storing session metadata\", error);\r\n        }\r\n      });\r\n      this.setState({ input: \"\" });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var chatListItems = this.state.chats.slice(0, 10).map((chat, i) => (\r\n      <ListItem\r\n          key={chat.id}\r\n          style={{opacity: (10 - i) / 10}}\r\n          disabled={true}\r\n          primaryText={UserApi.getName(chat.user)}\r\n          secondaryText={chat.message}\r\n          leftAvatar={<Avatar src={UserApi.getPhotoUrl(chat.user)} />} />\r\n    ));\r\n    return (\r\n      <div style={{margin: 56}}>\r\n        <TextField\r\n            name=\"Chat message input\"\r\n            label=\"Type your message and press enter\"\r\n            fullWidth={true}\r\n            onChange={(event) => this.setState({ input: event.target.value })}\r\n            onKeyPress={(event) => this.handleKeyEvent(event.key)}\r\n            value={this.state.input} />\r\n        <List>\r\n          {chatListItems}\r\n        </List>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport \"./cookie.css\";\r\n\r\nexport default class Time extends React.Component {\r\n  paddedSeconds(seconds) {\r\n    if (seconds < 10) {\r\n      return \"0\" + seconds;\r\n    } else {\r\n      return seconds;\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.props.minutes}:{this.paddedSeconds(this.props.seconds)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport \"./cookie.css\";\r\nimport Time from \"./Time.js\";\r\n\r\nexport default class Scorebored extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <table className=\"score\">\r\n          <caption>ScoreBored</caption>\r\n          <tr className=\"playersname\">\r\n            <th>Player One:{this.props.PlayerOne}</th>\r\n            <th>{this.props.winOrLoss}</th>\r\n            <th>Player two:{this.props.PlayerTwo}</th>\r\n          </tr>\r\n          <tr className=\"playersc\">\r\n            <td className=\"playerscore\">Score:{this.props.p1s}</td>\r\n            <td>Time left:</td>\r\n            <td>Score:{this.props.p2s}</td>\r\n          </tr>\r\n          <tr>\r\n            <td />\r\n            <td>\r\n              <Time\r\n                minutes={this.props.startTimemin}\r\n                seconds={this.props.startTimesec}\r\n              />\r\n            </td>\r\n            <td />\r\n          </tr>\r\n        </table>\r\n        {/* shop */}\r\n        <table id=\"shop\">\r\n          <tr>\r\n            <th>Items</th>\r\n            <th>price</th>\r\n            <th>attributes</th>\r\n          </tr>\r\n          <tr>\r\n            <td>\r\n              <button\r\n                className=\"bu\"\r\n                id=\"Cursors\"\r\n                disabled={this.props.currentScore < 50}\r\n                onClick={() => this.props.multipleClicks(3, 50)}\r\n              >\r\n                Cursor\r\n              </button>\r\n            </td>\r\n            <td>$50</td>\r\n            <td>produces 1 cookie per second</td>\r\n          </tr>\r\n          <tr>\r\n            <td>\r\n              <button\r\n                className=\"bu\"\r\n                id=\"Grandmas\"\r\n                disabled={this.props.currentScore < 100}\r\n                onClick={() => this.props.multipleClicks(15, 100)}\r\n              >\r\n                Grandmas\r\n              </button>\r\n            </td>\r\n            <td>$100</td>\r\n            <td>produces 5 cookies per second</td>\r\n          </tr>\r\n          <tr>\r\n            <td>\r\n              <button\r\n                className=\"bu\"\r\n                id=\"Farms\"\r\n                disabled={this.props.currentScore < 500}\r\n                onClick={() => this.props.multipleClicks(30, 500)}\r\n              >\r\n                Farms\r\n              </button>\r\n            </td>\r\n            <td>$500</td>\r\n            <td>produces 10 cookies per second</td>\r\n          </tr>\r\n          <tr>\r\n            <td>\r\n              <button\r\n                className=\"bu\"\r\n                id=\"Factories\"\r\n                disabled={this.props.currentScore < 1000}\r\n                onClick={() => this.props.multipleClicks(75, 1000)}\r\n              >\r\n                Factories\r\n              </button>\r\n            </td>\r\n            <td>$1000</td>\r\n            <td>produces 25 cookies per second</td>\r\n          </tr>\r\n          <tr>\r\n            <td>\r\n              <button\r\n                className=\"bu\"\r\n                id=\"MegaFactory\"\r\n                disabled={this.props.currentScore < 10000}\r\n                onClick={() => this.props.multipleClicks(300, 10000)}\r\n              >\r\n                Mega Factory\r\n              </button>\r\n            </td>\r\n            <td>$10000</td>\r\n            <td>produces 100 Cookies per second</td>\r\n          </tr>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n// $('.Cursors').click(){\r\n// function Cursor{\r\n//   //Needs to determine the player clicking button\r\n//   //Needs to add a cookie each second to the player that clicked on the button\r\n// }\r\n// }\r\n","import React from \"react\";\r\n\r\nexport default class ClickableCookie extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <p>{this.props.score}</p>\r\n        <img\r\n          alt=\"\"\r\n          className=\"cookie\"\r\n          src=\"/games/cookieClicker/Cooky.png\"\r\n          onClick={this.props.clickHandler}\r\n        />\r\n        <audio className=\"music\" id=\"myAudio\" controls autoplay loop>\r\n          <source src=\"/games/cookieClicker/win.mp3\" type=\"audio/mpeg\" />\r\n        </audio>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport \"./cookie.css\";\r\n\r\nexport default class GameOver extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div>\r\n          <p className=\"GOV\">Game Over</p>\r\n          <p className=\"WOR\">{this.props.winOrLoss}</p>\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import GameComponent from \"../../GameComponent.js\";\r\nimport React from \"react\";\r\nimport UserApi from \"../../UserApi.js\";\r\nimport Scorebored from \"./Scorebored.js\";\r\nimport Cookie from \"./Cookie.js\";\r\nimport GameOver from \"./GameOver.js\";\r\n\r\nexport default class CookieClicker extends GameComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hostScore: 0,\r\n      guestScore: 0,\r\n      hasGameStarted: false,\r\n      timelefts: 0,\r\n      timeleftm: 0\r\n    };\r\n    this.getSessionDatabaseRef().update(this.state);\r\n  }\r\n\r\n  multipleClicks(number, cost) {\r\n    if (this.getSessionCreatorUserId() === this.getMyUserId()) {\r\n      this.getSessionDatabaseRef().update({\r\n        hostScore: this.state.hostScore - cost\r\n      });\r\n      let that = this;\r\n      let interval = setInterval(function() {\r\n        if (that.state.timelefts === 0 && that.state.timeleftm <= 0) {\r\n          clearInterval(interval);\r\n        }\r\n        that.getSessionDatabaseRef().update({\r\n          hostScore: that.state.hostScore + number\r\n        });\r\n      }, 3000);\r\n    } else {\r\n      this.getSessionDatabaseRef().update({\r\n        guestScore: this.state.guestScore - cost\r\n      });\r\n      let that = this;\r\n      let interval = setInterval(function() {\r\n        if (that.state.timelefts === 0 && that.state.timeleftm <= 0) {\r\n          clearInterval(interval);\r\n        }\r\n        that.getSessionDatabaseRef().update({\r\n          guestScore: that.state.guestScore + number\r\n        });\r\n      }, 3000);\r\n    }\r\n  }\r\n\r\n  onSessionDataChanged(data) {\r\n    this.setState({\r\n      hostScore: data.hostScore,\r\n      guestScore: data.guestScore,\r\n      hasGameStarted: data.hasGameStarted,\r\n      timeleftm: data.timeleftm,\r\n      timelefts: data.timelefts\r\n    });\r\n  }\r\n\r\n  updateScore() {\r\n    if (this.getSessionCreatorUserId() === this.getMyUserId()) {\r\n      this.getSessionDatabaseRef().update({\r\n        hostScore: this.state.hostScore + 1\r\n      });\r\n    } else {\r\n      this.getSessionDatabaseRef().update({\r\n        guestScore: this.state.guestScore + 1\r\n      });\r\n    }\r\n  }\r\n\r\n  winningOrLosing() {\r\n    var winner = null;\r\n    if (this.state.hostScore > this.state.guestScore) {\r\n      winner = this.getSessionCreatorUserId();\r\n    } else if (this.state.hostScore < this.state.guestScore) {\r\n      winner = this.getSessionUserIds()[1];\r\n    }\r\n    if (winner === null) {\r\n      return \"Tied\";\r\n    } else if (winner === this.getMyUserId()) {\r\n      return \"Winning\";\r\n    } else {\r\n      return \"Losing\";\r\n    }\r\n  }\r\n  winOrLos() {\r\n    var winner = null;\r\n    if (this.state.hostScore > this.state.guestScore) {\r\n      winner = this.getSessionCreatorUserId();\r\n    } else if (this.state.hostScore < this.state.guestScore) {\r\n      winner = this.getSessionUserIds()[1];\r\n    }\r\n    if (winner === null) {\r\n      return \"Tied\";\r\n    } else if (winner === this.getMyUserId()) {\r\n      return \"You win\";\r\n    } else {\r\n      return \"you lost\";\r\n    }\r\n  }\r\n\r\n  startGame(time) {\r\n    this.getSessionDatabaseRef().update({\r\n      timeleftm: time,\r\n      timelefts: 0,\r\n      hasGameStarted: true\r\n    });\r\n    var that = this;\r\n    var interval = setInterval(function() {\r\n      if (that.state.timelefts === 0) {\r\n        if (that.state.timeleftm <= 0) {\r\n          clearInterval(interval);\r\n        } else {\r\n          that.state.timelefts = 59;\r\n          that.state.timeleftm = that.state.timeleftm - 1;\r\n        }\r\n      } else {\r\n        that.state.timelefts = that.state.timelefts - 1;\r\n      }\r\n      that.getSessionDatabaseRef().update({\r\n        timeleftm: that.state.timeleftm,\r\n        timelefts: that.state.timelefts,\r\n        hasGameStarted: true\r\n      });\r\n    }, 1000);\r\n  }\r\n\r\n  render() {\r\n    // var id = this.getSessionId();\r\n    //  var users = this.getSessionUserIds().map(user_id => (\r\n    //    < li key={user_id}>{UserApi.getName(user_id)}</li>\r\n    //  ));\r\n    if (\r\n      !this.state.hasGameStarted &&\r\n      this.getSessionCreatorUserId() === this.getMyUserId()\r\n    ) {\r\n      return (\r\n        <div className=\"buttonholder\">\r\n          <button\r\n            className=\"stime\"\r\n            id=\"fivem\"\r\n            onClick={() => this.startGame(1)}\r\n          >\r\n            1 minuts\r\n          </button>\r\n          <button\r\n            className=\"stime\"\r\n            id=\"fivem\"\r\n            onClick={() => this.startGame(5)}\r\n          >\r\n            5 minuts\r\n          </button>\r\n          <button\r\n            className=\"stime\"\r\n            id=\"tenm\"\r\n            onClick={() => this.startGame(10)}\r\n          >\r\n            10 minuts\r\n          </button>\r\n          <button\r\n            className=\"stime\"\r\n            id=\"fithteenm\"\r\n            onClick={() => this.startGame(15)}\r\n          >\r\n            15 minuts\r\n          </button>\r\n        </div>\r\n      );\r\n    } else if (!this.state.hasGameStarted) {\r\n      return (\r\n        <div>\r\n          <p>Waiting for Host to start the game</p>\r\n        </div>\r\n      );\r\n    } else if (\r\n      this.state.hasGameStarted &&\r\n      this.getSessionCreatorUserId() === this.getMyUserId()\r\n    ) {\r\n      if (this.state.timeleftm === 0 && this.state.timelefts === 0) {\r\n        return (\r\n          <div>\r\n            <GameOver\r\n              winOrLoss={this.winOrLos()}\r\n              startTimemin={this.state.timeleftm}\r\n              startTimesec={this.state.timelefts}\r\n            />\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div>\r\n            <Scorebored\r\n              PlayerOne={UserApi.getName(this.getSessionUserIds()[0])}\r\n              PlayerTwo={UserApi.getName(this.getSessionUserIds()[1])}\r\n              p1s={this.state.hostScore}\r\n              p2s={this.state.guestScore}\r\n              winOrLoss={this.winningOrLosing()}\r\n              startTimemin={this.state.timeleftm}\r\n              startTimesec={this.state.timelefts}\r\n              currentScore={this.state.hostScore}\r\n              multipleClicks={(number, cost) =>\r\n                this.multipleClicks(number, cost)\r\n              }\r\n            />\r\n            <Cookie\r\n              clickHandler={() => this.updateScore()}\r\n              score={this.state.hostScore}\r\n            />\r\n          </div>\r\n        );\r\n      }\r\n    } else if (\r\n      this.state.hasGameStarted &&\r\n      this.getSessionCreatorUserId() !== this.getMyUserId()\r\n    ) {\r\n      if (this.state.timeleftm === 0 && this.state.timelefts === 0) {\r\n        return (\r\n          <div>\r\n            <GameOver\r\n              winOrLoss={this.winOrLos()}\r\n              startTimemin={this.state.timeleftm}\r\n              startTimesec={this.state.timelefts}\r\n            />\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div>\r\n            <Scorebored\r\n              PlayerOne={UserApi.getName(this.getSessionUserIds()[1])}\r\n              PlayerTwo={UserApi.getName(this.getSessionUserIds()[0])}\r\n              p1s={this.state.guestScore}\r\n              p2s={this.state.hostScore}\r\n\r\n              winOrLoss={this.winningOrLosing()}\r\n              startTimemin={this.state.timeleftm}\r\n              startTimesec={this.state.timelefts}\r\n              currentScore={this.state.guestScore}\r\n              multipleClicks={(number, cost) =>\r\n                this.multipleClicks(number, cost)\r\n              }\r\n            />\r\n            <Cookie\r\n              clickHandler={() => this.updateScore()}\r\n              score={this.state.guestScore}\r\n            />\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n}\r\n","import GameComponent from \"../../GameComponent.js\";\r\nimport React from \"react\";\r\nimport \"./style.css\";\r\nimport UserApi from \"../../UserApi.js\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Logo from \"./Logo.png\";\r\nimport Whisper from \"./Whisper icon.png\";\r\n\r\nexport default class GoogleGossip extends GameComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.getSessionDatabaseRef().set({\r\n      user_id: UserApi.getName(this.getMyUserId()),\r\n      currentPlayer: \"string\",\r\n      statements: [\"statement 1\", \"statement 2\", \"statement 3\"],\r\n      truth: 0,\r\n      guess: null,\r\n      isLandingPage: true,\r\n      isFormPage: false,\r\n      isPickAnswerForm: false,\r\n      isWaitPage: false\r\n    });\r\n\r\n    this.state = {\r\n      user_id: UserApi.getName(this.getMyUserId()),\r\n      currentPlayer: \"string\",\r\n      statements: [\"statement 1\", \"statement 2\", \"statement 3\"],\r\n      truth: 0,\r\n      guess: null,\r\n      isLandingPage: true,\r\n      isFormPage: false,\r\n      isPickAnswerForm: false,\r\n      isWaitPage: false\r\n    };\r\n  }\r\n\r\n  onSessionDataChanged(data) {\r\n    if (data.currentPlayer !== \"string\") {\r\n      if (this.state.isLandingPage) {\r\n        if (data.currentPlayer === this.getMyUserId()) {\r\n          this.setState({\r\n            isLandingPage: false,\r\n            isFormPage: true\r\n          });\r\n        } else {\r\n          this.setState({\r\n            isLandingPage: false,\r\n            isWaitPage: true\r\n          });\r\n        }\r\n      } else if (this.state.isFormPage || this.state.isWaitPage) {\r\n        this.setState({\r\n          isFormPage: false,\r\n          isWaitPage: false,\r\n          isPickAnswerForm: true\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  handleButtonClick(Button_idx) {\r\n    this.getSessionDatabaseRef().set({\r\n      guess: Button_idx\r\n    });\r\n\r\n    this.setState({ guess: Button_idx });\r\n  }\r\n\r\n  shouldShowCorrect() {\r\n    console.log(\"truth\", this.state.truth, typeof this.state.truth);\r\n    console.log(\"guess\", this.state.guess, typeof this.state.guess);\r\n    if (this.state.guess === null) {\r\n      return false;\r\n    } else {\r\n      console.log(\"should show correct:\", this.state.truth === this.state.guess);\r\n      return this.state.truth === this.state.guess;\r\n    }\r\n  }\r\n\r\n  shouldShowIncorrect() {\r\n    if (this.state.guess === null) {\r\n      return false;\r\n    } else {\r\n      console.log(\r\n        \"should show incorrect:\",\r\n        this.state.truth !== this.state.guess\r\n      );\r\n      return this.state.truth !== this.state.guess;\r\n    }\r\n  }\r\n\r\n  submitTea() {\r\n    this.setState({\r\n      currentPlayer: this.getMyUserId(),\r\n      isLandingPage: false,\r\n      isFormPage: true\r\n    });\r\n\r\n    this.getSessionDatabaseRef().set({\r\n      currentPlayer: this.getMyUserId()\r\n    });\r\n  }\r\n\r\n  landingPageRender() {\r\n    return (\r\n      <div class=\"main\">\r\n        <img alt=\"\" id=\"logo\" src={Logo} />\r\n        <br />\r\n        <Button\r\n          variant=\"outlined\"\r\n          color=\"inherit\"\r\n          id=\"NewSession\"\r\n          onClick={() => this.submitTea()}\r\n        >\r\n          Get Gossiping\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  pickAnAnswerRender() {\r\n    return (\r\n      <div class=\"main3\">\r\n        <div className=\"AnswerWrapper\">\r\n          <div className={this.shouldShowCorrect() ? \"Shown\" : \"Hidden\"}>\r\n            Correct\r\n          </div>\r\n          <div className={this.shouldShowIncorrect() ? \"Shown\" : \"Hidden\"}>\r\n            Incorrect\r\n          </div>\r\n        </div>\r\n\r\n        <Button\r\n          variant=\"outlined\"\r\n          id=\"0\"\r\n          onClick={() => this.handleButtonClick(0)}\r\n        >\r\n          {this.state.statements[0]}\r\n        </Button>\r\n        <br />\r\n        <Button\r\n          variant=\"outlined\"\r\n          id=\"1\"\r\n          onClick={() => this.handleButtonClick(1)}\r\n        >\r\n          {this.state.statements[1]}\r\n        </Button>\r\n        <br />\r\n        <Button\r\n          variant=\"outlined\"\r\n          id=\"2\"\r\n          onClick={() => this.handleButtonClick(2)}\r\n        >\r\n          {this.state.statements[2]}\r\n        </Button>\r\n        <br />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleFormSubmit(event) {\r\n    // take the input from input0, input1, and input 2 --> override the \"statements\"\r\n    // Take input from truthIdx --> override \"truth\"\r\n    // [optional] error checking\r\n\r\n    this.getSessionDatabaseRef().set(this.state);\r\n  }\r\n\r\n  handleFormChange(idx, event) {\r\n    let newStatements = this.state.statements;\r\n    newStatements[idx] = event.target.value;\r\n    this.setState({\r\n      statements: newStatements\r\n    });\r\n  }\r\n\r\n  handleLieChange(event) {\r\n    console.log(\"changing lie val\", event.target.value);\r\n    this.setState({\r\n      truth: parseInt(event.target.value, 10)\r\n    });\r\n  }\r\n\r\n  submitAQuestionRender() {\r\n    return (\r\n      <div class=\"main2\">\r\n        <img alt=\"\" id=\"Whisper\" src={Whisper} />\r\n        <form onSubmit={event => this.handleFormSubmit(event)}>\r\n          <label id=\"input0\">Truth or Lie #0</label>\r\n          <br />\r\n          \r\n          <input\r\n            class=\"flexform\"\r\n            type=\"text\"\r\n            value={this.state.statements[0]}\r\n            onChange={event => this.handleFormChange(0, event)}\r\n            required\r\n          />\r\n          <br />\r\n\r\n          <label id=\"input1\">Truth or Lie #1</label>\r\n          <br />\r\n          <input\r\n            class=\"flexform\"\r\n            type=\"text\"\r\n            value={this.state.statements[1]}\r\n            onChange={event => this.handleFormChange(1, event)}\r\n            required\r\n          />\r\n          <br />\r\n\r\n          <label id=\"input2\">Truth or Lie #2</label>\r\n          <br />\r\n          <input\r\n            class=\"flexform\"\r\n            type=\"text\"\r\n            value={this.state.statements[2]}\r\n            onChange={event => this.handleFormChange(2, event)}\r\n            required\r\n          />\r\n          <br />\r\n\r\n          <label id=\"truthIdx\">Index for Truth Statement</label>\r\n          <br />\r\n          <input\r\n            class=\"flexform\"\r\n            type=\"text\"\r\n            value={this.state.truth}\r\n            onChange={event => this.handleLieChange(event)}\r\n            maxLength=\"1\"\r\n            required\r\n          />\r\n          <br />\r\n\r\n          <input type=\"submit\" value=\"Submit\" />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  waitPageRender() {\r\n    return <div>Wait....</div>;\r\n  }\r\n\r\n  render() {\r\n    // var users = this.getSessionUserIds().map(user_id => (\r\n    //   <li key={user_id}>{UserApi.getName(user_id)}</li>\r\n    // ));\r\n    // var creator = UserApi.getName(this.getSessionCreatorUserId());\r\n    // var me = UserApi.getName(this.getMyUserId());\r\n\r\n    // isLandingPage: true,\r\n    // isFormPage: false,\r\n    // isPickAnswerForm: false,\r\n    if (this.state.isLandingPage) {\r\n      return this.landingPageRender();\r\n    } else if (this.state.isFormPage) {\r\n      return this.submitAQuestionRender();\r\n    } else if (this.state.isPickAnswerForm) {\r\n      return this.pickAnAnswerRender();\r\n    } else if (this.state.isWaitPage) {\r\n      return this.waitPageRender();\r\n    }\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nexport default class Day extends Component {\r\n    \r\n    render() {\r\n        return (\r\n        <div>\r\n            Day\r\n        </div>)\r\n    }\r\n    \r\n}\r\n","import React, { Component } from 'react';\r\nimport UserApi from '../../UserApi.js'\r\n\r\nexport default class Night extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            buttonsDisabled: false\r\n        };\r\n    }\r\n\r\n    onButtonClick(e){\r\n        this.setState({buttonsDisabled: true});\r\n        this.props.handleKill(e.target.id);\r\n    }\r\n\r\n    render() {\r\n\r\n        var players = this.props.players;\r\n\r\n        var content;\r\n\r\n        if(this.props.currentPlayer.role.name === \"Mafia\") {\r\n\r\n            var listItems = [];\r\n\r\n            for(var i = 0; i < players.length; i++){\r\n                var id = players[i].id;\r\n                var handleClick = (e) => this.onButtonClick(e);\r\n                listItems.push( (<li><button className=\"color\" id={id} onClick={handleClick} disabled={this.state.buttonsDisabled}> {UserApi.getName(id)} </button></li>) );\r\n            }\r\n\r\n            content = (\r\n            <div>\r\n                <ul>{listItems}</ul>\r\n            </div>);\r\n        }else{\r\n            content = (\r\n            <div>\r\n                Sleep ._.\r\n            </div>);\r\n        }\r\n\r\n        return (<div>{content}</div>);\r\n    }\r\n\r\n}\r\n","import React, { Component } from 'react';\r\nimport UserApi from '../../UserApi.js'\r\n\r\nexport default class Announcment extends Component {\r\n\r\n    render() {\r\n\r\n        console.log(this.props.killedPlayers);\r\n\r\n        var listItems = this.props.killedPlayers.map((id) => {\r\n            return (<li>{UserApi.getName(id)}</li>);\r\n        });\r\n\r\n        var string = (this.props.killedPlayers.length === 0) ? \"No one was murdered\" : \"Someone was murdered:\"\r\n\r\n        return (<div>\r\n                {string}\r\n                <ul>{listItems}</ul>\r\n                </div>);\r\n    }\r\n\r\n}\r\n","import React, { Component } from 'react';\r\nimport firebase from 'firebase';\r\nimport Day from './Day.js';\r\nimport Night from './Night.js';\r\nimport Announcment from './Announcment.js';\r\n\r\nvar roles = {\r\n    Mafia: {\r\n        name: \"Mafia\",\r\n        description: \"Kill all the innocents and police force to win.\"\r\n    },\r\n    Citizen: {\r\n        name: \"Citizen\",\r\n        description: \"Work together with the police to take down the crime group.\"\r\n    },\r\n    Police: {\r\n        name: \"Detective\",\r\n        description: \"Investigate people to find who is a Mafia\"\r\n    },\r\n    Doctors: {\r\n        name: \"Doctor\",\r\n        description: \"Keep the Innocent alive\"\r\n    },\r\n    Specate: {\r\n        name: \"Specator\"\r\n    }\r\n};\r\nexport default class Mafia extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            time: 0,\r\n            phase: 0,\r\n            players: [],\r\n            killedPlayers: []\r\n        };\r\n    }\r\n    handleKill(databaseRef, id){\r\n        \r\n        var newArray = this.state.killedPlayers.concat([id]);\r\n        \r\n        this.setDataVar(databaseRef, \"killedPlayers\", newArray);\r\n        console.log(id);\r\n    }\r\n    \r\n    findMyPlayer() {\r\n        var myId = firebase.auth().currentUser.uid;\r\n\r\n        for (var i = 0; i < this.state.players.length; i++) {\r\n            var temp = this.state.players[i];\r\n\r\n            if (temp.id === myId) {\r\n                return temp;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    shuffle(array) {\r\n        var currentIndex = array.length,\r\n            temporaryValue, randomIndex;\r\n\r\n        // While there remain elements to shuffle...\r\n        while (0 !== currentIndex) {\r\n\r\n            // Pick a remaining element...\r\n            randomIndex = Math.floor(Math.random() * currentIndex);\r\n            currentIndex -= 1;\r\n\r\n            // And swap it with the current element.\r\n            temporaryValue = array[currentIndex];\r\n            array[currentIndex] = array[randomIndex];\r\n            array[randomIndex] = temporaryValue;\r\n        }\r\n\r\n        return array;\r\n    }\r\n    advancePhase(databaseRef) {\r\n\r\n        var self = this;\r\n\r\n        databaseRef.child(\"phase\").once(\"value\", function(snapshot) {\r\n\r\n            var phase = snapshot.val();\r\n\r\n            if (phase === 0)\r\n                phase = 1;\r\n            else if(phase === 1)\r\n                phase = 2;\r\n            else if(phase === 2)\r\n                phase = 3;\r\n            else if(phase === 3)\r\n                phase = 4;\r\n            else if(phase === 4)\r\n                phase = 0;\r\n\r\n            self.setDataVar(databaseRef, \"phase\", phase);\r\n\r\n        });\r\n    }\r\n\r\n    setDataVar(databaseRef, name, value) {\r\n        databaseRef.child(name).set(value, (error) => {\r\n            if (error) {\r\n                console.error(\"Error storing session metadata\", error);\r\n            }\r\n        });\r\n    }\r\n    \r\n    getDataVar(databaseRef, name){\r\n        \r\n        var result;\r\n        \r\n        databaseRef.child(name).once(\"value\", (snapshot) => {\r\n            result = snapshot.val();\r\n        });\r\n        \r\n        return result;\r\n    }\r\n\r\n\r\n\r\n    componentWillMount() {\r\n\r\n        var sessionId = this.props.match.params.id;\r\n        var sessionDatabaseRef = firebase.database().ref(\"/session/\" + sessionId);\r\n\r\n        console.log(sessionDatabaseRef);\r\n\r\n        var hostId = this.props.location.state.creator;\r\n        var myId = firebase.auth().currentUser.uid;\r\n\r\n        var userpath = \"/session-metadata/\" + sessionId + \"/users/\";\r\n        var usersRef = firebase.database().ref(userpath);\r\n        var players = [];\r\n\r\n\r\n        if (myId === hostId) {\r\n\r\n            usersRef.once(\"value\", (snapshot) => {\r\n                var users = snapshot.val();\r\n\r\n                var numUsers = users.length;\r\n                var numMafia = Math.ceil(numUsers / 3);\r\n\r\n                this.shuffle(users);\r\n\r\n                for (var i = 0; i < numMafia; i++) {\r\n                    players.push({\r\n                        id: users[i],\r\n                        role: roles.Mafia\r\n                    });\r\n                }\r\n\r\n                for (i = numMafia; i < numUsers; i++) {\r\n                    players.push({\r\n                        id: users[i],\r\n                        role: roles.Citizen\r\n                    });\r\n                }\r\n\r\n                this.setDataVar(sessionDatabaseRef, \"players\", players);\r\n            });\r\n\r\n\r\n            this.setDataVar(sessionDatabaseRef, \"phase\", 0);\r\n            this.setDataVar(sessionDatabaseRef, \"time\", 5);\r\n\r\n            var currentTime = 5;\r\n\r\n            this.interval = setInterval(() => {\r\n                currentTime--;\r\n\r\n                if (currentTime < 0) {\r\n                    currentTime = 10;\r\n                    this.advancePhase(sessionDatabaseRef);\r\n                }\r\n\r\n                this.setDataVar(sessionDatabaseRef, \"time\", currentTime);\r\n            }, 1000);\r\n        }\r\n\r\n        sessionDatabaseRef.child(\"time\").on(\"value\", (snapshot) => {\r\n            this.setState({ time: snapshot.val() });\r\n        });\r\n        sessionDatabaseRef.child(\"phase\").on(\"value\", (snapshot) => {\r\n            this.setState({ phase: snapshot.val() });\r\n        });\r\n        sessionDatabaseRef.child(\"players\").on(\"value\", (snapshot) => {\r\n            this.setState({ players: snapshot.val() });\r\n        });\r\n        sessionDatabaseRef.child(\"killedPlayers\").on(\"value\", (snapshot) => {\r\n            this.setState({ killedPlayers: snapshot.val() });\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        var content;\r\n        var player = this.findMyPlayer();\r\n        var databaseRef = firebase.database().ref(\"/session/\" + this.props.match.params.id);\r\n        \r\n        if (player == null) {\r\n            return (<div> Game has started </div>);\r\n        }\r\n\r\n        if (this.state.phase === 0) {\r\n            content = (<Day players={this.state.players} currentPlayer={player}/>);\r\n        //} else if (this.state.phase === 1){\r\n          //  content = (<Voting players={this.state.players} currentPlayer={player}/>);\r\n        }\r\n        else if (this.state.phase === 1) {\r\n            content = (<Night players={this.state.players} currentPlayer={player} handleKill={(id) => this.handleKill(databaseRef, id)}/>);\r\n        }\r\n        else if(this.state.phase === 2){\r\n            content = (<Announcment killedPlayers={this.getDataVar(databaseRef, \"killedPlayers\")}/>);\r\n        } \r\n\r\n        return (\r\n            \r\n                <div className=\"mafia\">\r\n                \r\n                <p> {this.state.time} </p>\r\n                \r\n                <p> {player.role.name} </p>\r\n                \r\n                {content}\r\n                \r\n                </div>\r\n        )\r\n    }\r\n}\r\n","import Button from '@material-ui/core/Button';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport React, { Component } from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport firebase from 'firebase';\r\n\r\nexport default class WordGuessing extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      answer: \"\",\r\n      answer_uid: \"\",\r\n      start: false,\r\n      your_answer: \"\",\r\n      your_uid: \"\",\r\n    };\r\n  }\r\n  \r\n  componentWillMount() {\r\n    var id = this.props.match.params.id;\r\n    var sessionDatabaseRef = firebase.database().ref(\"/session/\" + id);\r\n    var currentUser = firebase.auth().currentUser.uid;\r\n    this.setState({\r\n        your_uid: currentUser\r\n    })\r\n    firebase.database().ref(\"/session/\" + id + \"/players/\" + currentUser).set(true, (error) => {\r\n      if (error) {\r\n        console.error(\"Error storing session metadata\", error);\r\n      }\r\n    });\r\n    sessionDatabaseRef.on(\"value\", (snapshot) => {\r\n      var sessionSnapshot = snapshot.val();\r\n      if (sessionSnapshot === null) {\r\n        return;\r\n      }\r\n      console.log(\"sessionSnapshot\");\r\n      console.log(sessionSnapshot);\r\n      if(Object.keys(sessionSnapshot[\"players\"]).length > 1) {\r\n          this.setState({\r\n              start: true\r\n          })\r\n      }\r\n      \r\n      if(\"answer\" in sessionSnapshot) {\r\n          this.setState({\r\n              answer: sessionSnapshot[\"answer\"][\"value\"],\r\n              answer_uid: sessionSnapshot[\"answer\"][\"uid\"],\r\n          })\r\n      }\r\n      \r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    var id = this.props.match.params.id;\r\n    firebase.database().ref(\"/session/\" + id).off();\r\n  }\r\n  \r\n  handleAnswerText(event) {\r\n    this.setState({your_answer: event.target.value});\r\n  }\r\n  \r\n  submitAnswer(event) {\r\n     var id = this.props.match.params.id;\r\n     var sessionDatabaseRef = firebase.database().ref(\"/session/\" + id + \"/answer\");\r\n     sessionDatabaseRef.set({\r\n         \"value\": this.state.your_answer,\r\n         \"uid\": this.state.your_uid\r\n     })\r\n  }\r\n  \r\n  render() {\r\n    if(!this.state.start) {\r\n      return (<div>\r\n        <h1>Waiting for opponent</h1>\r\n        <CircularProgress size={60}/>\r\n      </div>);\r\n    }\r\n    if(this.state.answer_uid === \"\") {\r\n      return (<div>\r\n        <h1>7 X 9</h1>\r\n        <TextField\r\n            name=\"Multiplication input\"\r\n            onChange={this.handleAnswerText.bind(this)} />\r\n        <Button\r\n            style={{marginLeft: 10}}\r\n            variant=\"contained\"\r\n            onClick={this.submitAnswer.bind(this)}>\r\n          Submit\r\n        </Button>\r\n      </div>);\r\n    }\r\n    var result;\r\n    if (this.state.answer_uid === this.state.your_uid) {\r\n      if (this.state.answer === \"63\") {\r\n        result = this.state.answer + \" is correct. You Won!\";\r\n      } else {\r\n        result = this.state.answer + \" is incorrect. You Lost!\";\r\n      }\r\n    } else {\r\n      if (this.state.answer === \"63\") {\r\n        result = \"Too slow. You Lost!\"\r\n      } else {\r\n        result = \"Your opponent was wrong. You Won!\"\r\n      }\r\n        \r\n    }\r\n    return (<div>\r\n      <h1>Game Over</h1>\r\n      <h1>{result}</h1>\r\n    </div>);\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport RaisedButton from 'material-ui/RaisedButton';\r\n// import AppBar from 'material-ui/AppBar';\r\nimport firebase from 'firebase'\r\nimport UserApi from '../../UserApi.js';\r\nimport Avatar from 'material-ui/Avatar';\r\n\r\nexport default class Pokemon extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            playerOne: \"\", //this.state.playerOneName\r\n            playerOneHealth: 0,\r\n            playerOneTrainer: \"\",\r\n            playerTwo: \"\",\r\n            playerTwoHealth: 0,\r\n            playerTwoTrainer: \"\",\r\n        };\r\n    }\r\n\r\n    componentWillMount() {\r\n        var id = this.props.match.params.id;\r\n        this.sessionDatabaseRef = firebase.database().ref(\"/session/\" + id);\r\n        var currentUser = firebase.auth().currentUser.uid;\r\n\r\n        this.sessionDatabaseRef.on(\"value\", (snapshot) => {\r\n            var sessionSnapshot = snapshot.val();\r\n            if (sessionSnapshot === null) {\r\n                return;\r\n            }\r\n\r\n            if (!sessionSnapshot.playerOne) {\r\n                this.sessionDatabaseRef.update({ playerOne: currentUser });\r\n            }\r\n            else if (!sessionSnapshot.playerTwo && currentUser !== sessionSnapshot.playerOne) {\r\n                this.sessionDatabaseRef.update({ playerTwo: currentUser });\r\n            }\r\n\r\n            this.setState({\r\n                playerOne: sessionSnapshot.playerOne,\r\n                playerOneHealth: sessionSnapshot.playerOneHealth,\r\n                playerTwo: sessionSnapshot.playerTwo,\r\n                playerTwoHealth: sessionSnapshot.playerTwoHealth,\r\n            });\r\n        });\r\n    }\r\n\r\n\r\n    randomNumber() {\r\n       return Math.floor(Math.random() * 25) + 5;\r\n    }\r\n\r\n    playerOneAttack() {\r\n        // make randam attack to bring score down\r\n        this.sessionDatabaseRef.update({ playerTwoHealth: this.state.playerTwoHealth - this.randomNumber() });\r\n    }\r\n\r\n    playerTwoAttack() {\r\n        // make randam attack to bring score down\r\n        this.sessionDatabaseRef.update({ playerOneHealth: this.state.playerOneHealth - this.randomNumber() });\r\n    }\r\n\r\n\r\n    gameReset() {\r\n        this.sessionDatabaseRef.update({ playerOneHealth: 100 });\r\n        this.sessionDatabaseRef.update({ playerTwoHealth: 100 });\r\n    }\r\n\r\n    runScene(){\r\n        console.log(\"Scene is Running\")\r\n    }\r\n\r\n    checkWin() {\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        let display\r\n         if(this.state.playerOneHealth <= 0) {\r\n             display = <h1>{UserApi.getName(this.state.playerTwo)} Wins</h1>\r\n             this.gameReset()\r\n         } else if(this.state.playerTwoHealth <= 0) {\r\n             display = <h1>{UserApi.getName(this.state.playerOne)} Wins</h1>\r\n             this.gameReset()\r\n         }\r\n\r\n        return (\r\n            <div className=\"pokemon\">\r\n                <div id=\"mainTitle\">\r\n                    <h1> Pokemon Universe! </h1>\r\n                    <RaisedButton label=\"Start/Reset\" primary={true} onClick={this.gameReset.bind(this)}/>\r\n                    {display}\r\n                </div>\r\n                <div className=\"playerOne\">\r\n                    <h2>Player 1: {UserApi.getName(this.state.playerOne)}</h2>\r\n                    <Avatar src={UserApi.getPhotoUrl(this.state.playerOne)}/>\r\n                    <h3> HP {this.state.playerOneHealth} </h3>\r\n                    <div className=\"fixed-btns\">\r\n                        <RaisedButton className=\"Attack1\" label=\"Attack\" onClick={this.playerOneAttack.bind(this)}/>\r\n                        <RaisedButton className =\"Attack2\" label=\"Run\" onClick={this.gameReset.bind(this)}/>\r\n                        <RaisedButton className = \"Attack3\" label=\"random1\" />\r\n                        <RaisedButton className = \"Attack4\" label=\"random2\" />\r\n                    </div>\r\n                </div>\r\n                <div id=\"mainBox\">\r\n                    <img alt='' className=\"battleImage\" src=\"https://raw.githubusercontent.com/ijgreenidge/studio-multiplayer-game/master/src/images/Background1.png\" />\r\n                </div>\r\n                <div class=\"playerTwo\">\r\n                    <div id=\"playerInfo2\">\r\n                    <h2>Player 2: {UserApi.getName(this.state.playerTwo)}</h2>\r\n                    <h3> HP {this.state.playerTwoHealth} </h3>\r\n                    <Avatar src={UserApi.getPhotoUrl(this.state.playerTwo)}/>\r\n                    </div>\r\n                    <div className=\"fixed-btns\">\r\n                        <RaisedButton className=\"Attack1\" label=\"Attack\" onClick={this.playerTwoAttack.bind(this)}/>\r\n                        <RaisedButton className = \"Attack2\" label=\"Run\" onClick={this.gameReset.bind(this)}/>\r\n                        <RaisedButton className = \"Attack3\" label=\"random1\" />\r\n                        <RaisedButton className = \"Attack4\" label=\"random2\" />\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\n","import Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport React, { Component } from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport UserApi from '../../UserApi.js';\r\nimport firebase from 'firebase';\r\n\r\n/*\r\n * Database schema:\r\n *  - left: // Left player one == creator\r\n *    - userid: User id\r\n *    - height: Integer position of the top of paddle\r\n *  - right: // Right player two == creator\r\n *    - userid: User id (0 if one-player game)\r\n *    - height: Integer position of the top of paddle\r\n *  - ball:\r\n *    - x: Integer ball horizontal position\r\n *    - y: Integer ball veritical position\r\n *  - winner: null until game over then user id of winner\r\n *  - started: Boolean of whether or not game has started\r\n */\r\n\r\nconst W = 500, H = 500; // Size of game\r\nconst R = 20; // Radius of ball\r\nconst paddleWidth = 10, paddleHeight = 100;\r\n\r\nexport default class Pong extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.user = firebase.auth().currentUser.uid;\r\n    this.isCreator = this.user === props.location.state.creator;\r\n    this.session = firebase.database().ref(`/session/${props.location.state.id}`);\r\n    if(this.isCreator) {\r\n      this.player = this.session.child(\"left\");\r\n    } else {\r\n      this.player = this.session.child(\"right\");\r\n    }\r\n    this.ball = this.session.child(\"ball\");\r\n    this.state = {winner: false, started: false};\r\n    this.started = this.session.child(\"started\");\r\n    this.started.on(\"value\", (snapshot) => {\r\n      if(snapshot.val()) {\r\n        this.onGameStarted();\r\n      }\r\n    });\r\n    this.winner = this.session.child(\"winner\");\r\n    this.winner.on(\"value\", (snapshot) => {\r\n      if(snapshot.val() !== false) {\r\n        this.onGameOver();\r\n      }\r\n    });\r\n    this.session.on(\"value\", (snapshot) => {\r\n      this.setState(snapshot.val());\r\n    });\r\n  }\r\n\r\n  onGameStarted() {\r\n    if(this.isCreator) {\r\n      var initState = {\r\n        winner: false,\r\n        started: true,\r\n        ball: {\r\n          x: W/2 - R,\r\n          y: H/2 - R,\r\n          dx: Math.random() * -3 - 2,\r\n          dy: Math.random() * 6 - 3,\r\n        },\r\n        left: {\r\n          userid: this.user,\r\n          height: H/2 - paddleHeight/2,\r\n        },\r\n        right: {\r\n          height: H/2 - paddleHeight/2,\r\n        },\r\n      };\r\n      if(this.props.location.state.users.length === 1) {\r\n        initState.right.userid = 0;\r\n      } else {\r\n        this.props.location.state.users.forEach(uid => {\r\n          if(uid !== this.user) {\r\n            initState.right.userid = uid;\r\n          }\r\n        });\r\n      }\r\n      this.session.set(initState);\r\n      this.setState(initState);\r\n      this.interval = setInterval(() => this.gameLoop(), 10);\r\n    }\r\n  }\r\n\r\n  gameLoop() {\r\n    this.updateBall();\r\n    // For one player game keep computer player paddle centered on ball\r\n    if(this.state.right.userid === 0) {\r\n      this.session.update({\r\n        \"right/height\": this.state.ball.y + R - paddleHeight/2\r\n      });\r\n    }\r\n  }\r\n\r\n  updateBall() {\r\n    var {x, y, dx, dy} = this.state.ball;\r\n    if(x <= 2*paddleWidth && y + 2*R >= this.state.left.height &&\r\n      y <= this.state.left.height + paddleHeight) {\r\n      dx = -dx; // Hit left paddle\r\n    } else if(x + 2*R >= W - 2*paddleWidth && y + 2*R >= this.state.right.height &&\r\n      y <= this.state.right.height + paddleHeight) {\r\n      dx = -dx; // Hit right paddle\r\n    } else if(x <= 0) {\r\n      this.winner.set(this.state.right.userid); // Hit left wall\r\n    } else if(x + 2*R >= W) {\r\n      this.winner.set(this.state.left.userid); // Hit right wall\r\n    }\r\n    if(y <= 0 || y + 2*R >= H) {\r\n      dy = -dy; // Hit top/bottom\r\n    }\r\n    this.ball.update({ x: x + dx, y: y + dy, dx: dx, dy: dy });\r\n  }\r\n\r\n  onMouseMove(e) {\r\n    this.player.update({height: e.clientY - paddleHeight});\r\n  }\r\n\r\n  onGameOver(uid) {\r\n    if(this.interval) {\r\n      clearInterval(this.interval);\r\n      this.interval = false;\r\n    }\r\n    if(this.state.started) {\r\n      this.started.set(false);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.session.off();\r\n    this.started.off();\r\n    this.winner.off();\r\n    this.onGameOver();\r\n  }\r\n\r\n  render() {\r\n    if(this.state.started === false) {\r\n      return (\r\n        <div style={{textAlign: 'center'}}>\r\n          { this.state.winner !== false &&\r\n            <h1>Game Over: {this.state.winner === 0 ?  'Computer':\r\n                UserApi.getName(this.state.winner)} won</h1>\r\n          }\r\n          <Button\r\n              style={{margin: 10}}\r\n              variant=\"contained\"\r\n              onClick={() => this.started.set(true)}>\r\n            Start Game\r\n          </Button>\r\n          <div style={{\r\n              display:'flex',\r\n              justifyContent: 'center',\r\n          }}>\r\n            <Typography variant=\"title\">\r\n              Users:\r\n            </Typography>\r\n            {this.props.location.state.users.map((uid) =>\r\n              <Avatar\r\n                  key={uid}\r\n                  style={{marginLeft: 10}}\r\n                  src={UserApi.getPhotoUrl(uid)} />\r\n            )}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div style={{\r\n        margin: '30px auto', position: 'relative', backgroundColor: 'black',\r\n        width: W+'px', height: H+'px', cursor: 'none',\r\n      }} onMouseMove={(e) => this.onMouseMove(e)}>\r\n      <div style={{\r\n        position: 'absolute', backgroundColor: 'white',\r\n        width: paddleWidth+'px', height: paddleHeight+'px',\r\n        top: this.state.left.height+'px', left: paddleWidth+'px',\r\n      }}></div>\r\n      <div style={{\r\n        position: 'absolute', backgroundColor: 'white',\r\n        width: paddleWidth+'px', height: paddleHeight+'px',\r\n        top: this.state.right.height+'px', right: paddleWidth+'px',\r\n      }}></div>\r\n      <div style={{\r\n        position: 'absolute', backgroundColor: 'white',\r\n        width: 2*R+'px', height: 2*R+'px', borderRadius: R+'px',\r\n        top: this.state.ball.y+'px', left: this.state.ball.x+'px',\r\n      }}></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Button from '@material-ui/core/Button';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport GameComponent from '../../GameComponent.js';\r\nimport React from 'react';\r\n\r\nconst gameOverMessages = {\r\n  Rock: {\r\n    Rock: \"Tie: Rock v Rock\",\r\n    Paper: \"You lost: Paper covers Rock\",\r\n    Scissors: \"You won! Rock beats Scissors\",\r\n  },\r\n  Paper: {\r\n    Rock: \"You won! Paper covers Rock\",\r\n    Paper: \"Tie: Paper v Paper\",\r\n    Scissors: \"You lost: Scissors cuts Paper\",\r\n  },\r\n  Scissors: {\r\n    Rock: \"You lost: Rock beats Scissors\",\r\n    Paper: \"You won! Scissors cuts Paper\",\r\n    Scissors: \"Tie: Scissors v Scissors\",\r\n  },\r\n};\r\n\r\nexport default class RockPaperScissors extends GameComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      choice: \"\",\r\n      opponent: \"\",\r\n    };\r\n  }\r\n\r\n  onSessionDataChanged(data) {\r\n    for(var uid in data) {\r\n      if(uid === this.getMyUserId()) {\r\n        this.setState({choice: data[uid]});\r\n      } else {\r\n        this.setState({opponent: data[uid]});\r\n      }\r\n    }\r\n  }\r\n\r\n  select(choice) {\r\n    var userChoice = {};\r\n    userChoice[this.getMyUserId()] = choice;\r\n    this.getSessionDatabaseRef().set(userChoice, (error) => {\r\n      if (error) {\r\n        console.error(\"Error storing session metadata\", error);\r\n      }\r\n    });\r\n    this.setState({choice: choice});\r\n  }\r\n\r\n  render() {\r\n    if(this.state.choice === \"\") {\r\n      return (<div>\r\n        <h1>Make your choice!</h1>\r\n        <div>\r\n          <Button onClick={() => this.select(\"Rock\")}>\r\n            Rock\r\n          </Button>\r\n          <Button\r\n              color=\"primary\"\r\n              onClick={() => this.select(\"Paper\")}>\r\n            Paper\r\n          </Button>\r\n          <Button\r\n              color=\"secondary\"\r\n              onClick={() => this.select(\"Scissors\")}>\r\n            Scissors\r\n          </Button>\r\n        </div>\r\n      </div>);\r\n    } else if(this.state.opponent === \"\") {\r\n      return (<div>\r\n        <h1>Waiting for opponent</h1>\r\n        <CircularProgress size={60}/>\r\n      </div>);\r\n    }\r\n    return (<div>\r\n      <h1>Game Over</h1>\r\n      <h2>{gameOverMessages[this.state.choice][this.state.opponent]}</h2>\r\n    </div>);\r\n  }\r\n}\r\n","import Avatar from 'material-ui/Avatar';\r\nimport React, { Component } from 'react';\r\nimport TextField from 'material-ui/TextField';\r\nimport firebase from 'firebase';\r\nimport { List, ListItem } from 'material-ui/List';\r\nimport {GridList, GridTile} from 'material-ui/GridList';\r\nimport FloatingActionButton from 'material-ui/FloatingActionButton';\r\nimport ContentAdd from 'material-ui/svg-icons/content/add';\r\nimport Dialog from 'material-ui/Dialog';\r\nimport FlatButton from 'material-ui/FlatButton';\r\n\r\nimport Subheader from 'material-ui/Subheader';\r\nimport CommunicationChatBubble from 'material-ui/svg-icons/communication/chat-bubble';\r\n\r\n\r\nconst styles = {\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'space-around',\r\n  },\r\n  gridList: {\r\n    width: 500,\r\n    height: 450,\r\n    overflowY: 'auto',\r\n  },\r\n};\r\n\r\nconst ButtonStyle = {\r\n  position: \"fixed\",\r\n  right: 24,\r\n  bottom: 24,\r\n  marginBottom: 0,\r\n  zIndex: 998,\r\n};\r\n\r\nexport default class Spark extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    var path = \"/session/\" + this.props.match.params.id;\r\n    this.sessionRef = firebase.database().ref(path);\r\n\r\n    this.state = {\r\n      posts: [],\r\n      urlInput: \"\",\r\n      userInput: \"\",\r\n      open: false,\r\n    };\r\n  }\r\n  handleOpen() {\r\n    this.setState({\r\n      open: true,\r\n    })\r\n  }\r\n  \r\n  handleClose() {\r\n    this.sessionRef.push({\r\n      user: this.state.userInput,\r\n      name: \"\",\r\n      image: this.state.urlInput,\r\n    })\r\n    this.setState({\r\n      open: false,\r\n      input: \"\",\r\n    })\r\n  }\r\n  \r\n  handleCancel() {\r\n    this.setState({\r\n      open: false,\r\n      input: \"\",\r\n    })\r\n  }\r\n\r\n  handleUserChange(event, newValue) {\r\n    this.setState({\r\n      userInput: newValue,\r\n    })\r\n  }\r\n  \r\n    handleUrlChange(event, newValue) {\r\n    this.setState({\r\n      urlInput: newValue,\r\n    })\r\n  }\r\n\r\n  componentWillMount() {\r\n    \r\n    /*\r\n    From firebase: {\r\n    \r\n      \"<random-id>\": {\r\n        user: \"foo\",\r\n        name: \"foo name\",\r\n        image: \"URL\"\r\n      }\r\n      ....\r\n    }\r\n    \r\n    We want: [\r\n      {\r\n        user: \"foo\",\r\n        name: \"foo name\",\r\n        image: \"URL\"\r\n      }\r\n    ]\r\n    */\r\n    this.sessionRef.on(\"value\", (snapshot) => this.setState({\r\n      posts: snapshot.val() ? Object.values(snapshot.val()) : [],\r\n    }))\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  handleKeyEvent(key) {\r\n  }\r\n\r\n  render() {\r\n    const actions = [\r\n      <FlatButton\r\n        label=\"POST\"\r\n        primary={true}\r\n        onClick={() => this.handleClose()}\r\n      />,\r\n      <FlatButton\r\n        label=\"CANCEL\"\r\n        secondary={true}\r\n        onClick={() => this.handleCancel()}\r\n      />\r\n    ];\r\n\r\n    return (\r\n      <div className=\"spark\" style={{margin: 56}}>\r\n      <Dialog\r\n          title=\"Paste your url...\"\r\n          actions={actions}\r\n          modal={false}\r\n          open={this.state.open}\r\n        >\r\n        <TextField onChange={(event, newValue) => this.handleUrlChange(event, newValue)}\r\n              hintText=\"Paste your url \"\r\n              floatingLabelText=\"Photo url \" />        \r\n        <TextField onChange={(event, newValue) => this.handleUserChange(event, newValue)}\r\n              hintText=\"Enter your username\"\r\n              floatingLabelText=\"Username\" />\r\n      </Dialog>\r\n        <GridList\r\n          cellHeight={\"auto\"}\r\n          style={styles.gridList}\r\n      >\r\n          {this.state.posts.map((tile) => (\r\n            <GridTile\r\n              title={tile.name}>\r\n              <img alt='' src={tile.image} />\r\n            </GridTile>\r\n          ))}\r\n        </GridList>\r\n        <div class= \"blurb\">\r\n        <h1>Spark</h1>\r\n        <p>Spark is a modern photo-sharing app aimed at connecting\r\n          you with the things you cherish and care about---in \r\n          our case, it was cats. It is a combination of our favorite\r\n          social media apps: the roasting of black Twitter,\r\n          the stalking of Instagram for “reliable” ads,\r\n          and organizing a life you’ll never have on Pinterest.\r\n          It consists of a platform to share photos,\r\n          and a bar that always tells you who of the people\r\n          you follow is currently online.\r\n          It is an innovative app that allows you to---\r\n       </p>\r\n       <p> M’baku: Are you done?\r\n       </p>\r\n        </div>\r\n        \r\n        <div class= \"list\">\r\n          <List>\r\n            <Subheader>Currently online are...</Subheader>\r\n            <ListItem\r\n              primaryText=\"Ramata Williams Bah\"\r\n              leftAvatar={<Avatar src=\"https://i.pinimg.com/236x/12/e4/36/12e436feb149808f974bfdb9a61c4eef--amazing-sketches-instagram-fashion.jpg\" />}\r\n              rightIcon={<CommunicationChatBubble />}\r\n            />\r\n            <ListItem\r\n              primaryText=\"Andrea Cajamarca\"\r\n              leftAvatar={<Avatar src=\"https://www.toonpool.com/user/4550/files/salma_hayek_721035.jpg\" />}\r\n              rightIcon={<CommunicationChatBubble />}\r\n            />\r\n          </List>\r\n       </div>\r\n\r\n        <FloatingActionButton secondary={true} style={ButtonStyle} onClick={() => this.handleOpen()}>\r\n          <ContentAdd />\r\n        </FloatingActionButton>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n//subtitle={<span>by <b>{tile.author}</b></span>}\r\n","import Button from '@material-ui/core/Button';\r\nimport GameComponent from '../../GameComponent.js';\r\nimport React from 'react';\r\nimport UserApi from '../../UserApi.js';\r\n\r\nconst State = {\r\n  EMPTY: \" \",\r\n  X: \"X\",\r\n  O: \"0\",\r\n};\r\n\r\nexport default class TicTacToe extends GameComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      cellState: (new Array(9)).fill(State.EMPTY),\r\n      currentUser: this.getSessionCreatorUserId(),\r\n    };\r\n  }\r\n\r\n  onSessionDataChanged(data) {\r\n    this.setState({\r\n      cellState: data.cell_state,\r\n      currentUser: data.current_user,\r\n    });\r\n  }\r\n\r\n  isMyTurn() {\r\n    return this.state.currentUser === this.getMyUserId();\r\n  }\r\n\r\n  getMyCellState() {\r\n    if (this.getSessionCreatorUserId() === this.getMyUserId()) {\r\n      return State.X;  // The session creator is always \"X\".\r\n    } else {\r\n      return State.O;\r\n    }\r\n  }\r\n\r\n  getOtherUser() {\r\n    return this.getSessionUserIds().find((uid) => {\r\n      return uid !== this.getMyUserId();\r\n    });\r\n  }\r\n\r\n  playTurn(i) {\r\n    var cellState = this.state.cellState.slice();\r\n    cellState[i] = this.getMyCellState();\r\n    var databaseState = {\r\n      cell_state: cellState,\r\n      current_user: this.getOtherUser(),\r\n    }\r\n    this.getSessionDatabaseRef().set(databaseState, (error) => {\r\n      if (error) {\r\n        console.error(\"Error updating TicTacToe state\", error);\r\n      }\r\n    });\r\n  }\r\n\r\n  getWinner() {\r\n    var isWinner = (x) => {\r\n      var state = this.state.cellState;\r\n      var isX = cell => (cell === x);\r\n      return state.slice(0, 3).every(isX) || // Row 1\r\n          state.slice(3, 6).every(isX) || // Row 2\r\n          state.slice(6, 9).every(isX) || // Row 3\r\n          [state[0], state[3], state[6]].every(isX) || // Column 1\r\n          [state[1], state[4], state[7]].every(isX) || // Column 2\r\n          [state[2], state[5], state[8]].every(isX) || // Column 3\r\n          [state[0], state[4], state[8]].every(isX) || // Diagonal\r\n          [state[2], state[4], state[6]].every(isX); // Diagonal\r\n    };\r\n    if (isWinner(State.X)) {\r\n      return State.X;\r\n    } else if(isWinner(State.O)) {\r\n      return State.O;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var currentUserName = UserApi.getName(this.state.currentUser);\r\n    var winnerState = this.getWinner();\r\n    var headerText;\r\n    if (winnerState !== null) {\r\n      headerText = winnerState + \" WINS!\"\r\n    } else if (this.state.cellState.every(cell => (cell !== State.EMPTY))) {\r\n      headerText = \"Draw! Game over.\";\r\n    } else if (this.isMyTurn()) {\r\n      headerText = \"It's YOUR turn, go!\";\r\n    } else {\r\n      headerText = \"It's \" + currentUserName + \"'s turn, wait...\";\r\n    }\r\n\r\n    var allCellsDisabled = winnerState !== null || !this.isMyTurn();\r\n    var cells = this.state.cellState.map((cell, i) => (\r\n      <Button\r\n          key={i}\r\n          variant=\"outlined\"\r\n          style={{height: 36}}\r\n          onClick={() => this.playTurn(i)}\r\n          disabled={allCellsDisabled || cell !== State.EMPTY}>\r\n        {cell}\r\n      </Button>\r\n    ));\r\n    return (\r\n      <center>\r\n        <h1>{headerText}</h1>\r\n        {cells.slice(0, 3)}\r\n        <br />\r\n        {cells.slice(3, 6)}\r\n        <br />\r\n        {cells.slice(6, 9)}\r\n      </center>\r\n    );\r\n  }\r\n}\r\n","import GameComponent from \"../../GameComponent.js\";\r\nimport React from \"react\";\r\nimport UserApi from \"../../UserApi.js\";\r\nimport \"./TugOfWar.css\";\r\n\r\nexport default class TugOfWar extends GameComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    var myId = this.getMyUserId();\r\n    var defaultValue = {};\r\n    defaultValue[myId] = 0;\r\n    //this.getSessionDatabaseRef().update(defaultValue);\r\n    this.state = defaultValue;\r\n  }\r\n\r\n  onSessionDataChanged(data) {\r\n    // data = {\r\n    //   <user-id-1>: 100,\r\n    //   <user-id-2>: 200,\r\n    // }\r\n    //\r\n    this.setState(data);\r\n  }\r\n\r\n  componentDidMount() {\r\n    super.componentDidMount();\r\n    this.setDocumentKeyPressHandler();\r\n  }\r\n\r\n  setDocumentKeyPressHandler() {\r\n    document.body.onkeyup = e => {\r\n      if (e.keyCode === 32 && !this.gameOver()) {\r\n        var user = this.getMyUserId();\r\n        var newCounter = this.state[user] + 1;\r\n        this.getSessionDatabaseRef()\r\n          .child(user)\r\n          .set(newCounter);\r\n      }\r\n    };\r\n  }\r\n\r\n  gameOver() {\r\n    var spacebarDifference = Math.abs(this.getSpaceBarDifference());\r\n    if (spacebarDifference >= 25) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.body.onkeyup = null;\r\n    super.componentWillUnmount();\r\n  }\r\n\r\n  getSpaceBarDifference() {\r\n    var counters = this.getSessionUserIds().map(user_id => this.state[user_id]);\r\n\r\n    var dif = counters[0] - counters[1];\r\n    return dif;\r\n  }\r\n\r\n  getWinnerUserId() {\r\n    var arr = this.getSessionUserIds().map(user_id => UserApi.getName(user_id));\r\n\r\n    if (this.getSpaceBarDifference() < 0) {\r\n      return arr[1];\r\n    } else {\r\n      return arr[0];\r\n    }\r\n  }\r\n\r\n  onResetButtonClicked() {\r\n    var arr = this.getSessionUserIds();\r\n    var obj = {};\r\n    obj[arr[0]] = 0;\r\n    obj[arr[1]] = 0;\r\n    this.getSessionDatabaseRef().update(obj);\r\n  }\r\n\r\n  render() {\r\n    var winner = \"TBD\";\r\n    var resetButton = <div />;\r\n    if (this.gameOver()) {\r\n      winner = this.getWinnerUserId();\r\n\r\n      resetButton = (\r\n        <button onClick={() => this.onResetButtonClicked()}>Reset</button>\r\n      );\r\n    }\r\n    var marginLeft = this.getSpaceBarDifference() * 15;\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"text-Cen\">\r\n          <h3>HIT SPACE BAR AND WIN !!!!!</h3>\r\n          <br />\r\n          <h1>Winner: {winner}</h1>\r\n          <br />\r\n          <div>{resetButton}</div>\r\n          <br />\r\n        </div>\r\n        <div className=\"main\">\r\n          <div className=\"ropeBorder\">\r\n            <div className=\"rope \" style={{ marginLeft: marginLeft }}>\r\n              <div className=\"marker\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport firebase from 'firebase';\r\nimport { Tabs, Tab } from 'material-ui/Tabs';\r\nimport TextField from 'material-ui/TextField';\r\nimport Dialog from 'material-ui/Dialog';\r\nimport FlatButton from 'material-ui/FlatButton';\r\n\r\nconst gameMessage = [\r\n    [\r\n        \"Which ocean lies on the east coast of the United States?\",\r\n        \"Atlantic Ocean\"\r\n    ],\r\n    [\r\n        \"What is the 5th president of the United States?\",\r\n        \"Donald Trump\"\r\n    ],\r\n    [\r\n        \"Whos face is on a one dollor bill?\",\r\n        \"George Washignton\"\r\n    ],\r\n    [\r\n        \"How many State in the USA?\",\r\n        \"50\"\r\n    ],\r\n    [\r\n        \"What year was America found?\",\r\n        \"1600\"\r\n    ],\r\n    [\r\n        \"What is the worlds largest mountain?\",\r\n        \"Mount Everest\"\r\n    ],\r\n    [\r\n        \"How many great lakes are there?\",\r\n        \"5\"\r\n    ],\r\n    [\r\n        \"What is the longest River in the US?\",\r\n        \"Missouri River\"\r\n    ],\r\n    [\r\n        \"The biggest desert in the world is...\",\r\n        \"Sahara\"\r\n    ],\r\n    [\r\n        \"How many Kindoms is the United Kindom comprised of?\",\r\n        \"4\"\r\n    ],\r\n    [\r\n        \"Dry Ice is a Frozen form of which gas?\",\r\n        \"Carbon Dioxide\"\r\n    ],\r\n    [\r\n        \"What is the longest river in the world?\",\r\n        \"Nile River\"\r\n    ],\r\n    [\r\n        \"What is the largest body of water?\",\r\n        \"Pacific Ocean\"\r\n    ],\r\n    [\r\n        \"What is the most popular country?\",\r\n        \"China\"\r\n    ],\r\n    [\r\n        \"What is the capital of IceLand?\",\r\n        \"Reykjavik\"\r\n    ],\r\n    [\r\n        \"What continent is the largest in terms of land?\",\r\n        \"Asia\"\r\n    ],\r\n    [\r\n        \"What is the largest mountain range in the world?\",\r\n        \"Andes\"\r\n    ],\r\n    [\r\n        \"What is the smallest country in the world?\",\r\n        \"Vatican City\"\r\n    ],\r\n    [\r\n        \"What is the river that runs through Paris, France is called?\",\r\n        \"The Seine\"\r\n    ],\r\n    [\r\n        \"What is the most common speaking language in the world?\",\r\n        \"English\"\r\n    ],\r\n    [\r\n        \"What is the name of the household garget that South Karean people believe can kill you?\",\r\n        \"Electric fan\"\r\n    ]\r\n];\r\n\r\nexport default class TwentyOneQuestions extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            choice: \"\",\r\n            opponent: \"\",\r\n            answer: \"\",\r\n            answer2: \"\",\r\n            tally1: 0,\r\n            tally2: 0,\r\n            answerIsCorrect: false,\r\n            hidden: true,\r\n            open: false,\r\n            cUser: this.props.location.state.creator,\r\n            winner: \"\",\r\n            isGameFinished: false,\r\n            question1: [],\r\n            question2: []\r\n        };\r\n        var currentUser = firebase.auth().currentUser.uid;\r\n        this.creator = props.location.state.creator === currentUser;\r\n    }\r\n\r\n    componentWillMount() {\r\n        var id = this.props.match.params.id;\r\n        var sessionDatabaseRef = firebase.database().ref(\"/session/\" + id);\r\n        sessionDatabaseRef.on(\"value\", (snapshot) => {\r\n            var sessionSnapshot = snapshot.val();\r\n            if (sessionSnapshot !== null) {\r\n                var tally1 = 0;\r\n                var tally2 = 0;\r\n                var quest1 =[];\r\n                var quest2 = [];\r\n                \r\n                if(sessionSnapshot.tally1){\r\n                    tally1 = sessionSnapshot.tally1;\r\n                }\r\n                \r\n                if(sessionSnapshot.tally2){\r\n                    tally2 = sessionSnapshot.tally2;\r\n                }\r\n                \r\n                if(sessionSnapshot.question1){\r\n                    quest1 = Object.values(sessionSnapshot.question1);\r\n                }\r\n                \r\n                if(sessionSnapshot.question2){\r\n                    quest2 = Object.values(sessionSnapshot.question2);\r\n                }\r\n                \r\n               if(tally1 + tally2 === 21){\r\n                    if(tally1 > tally2){\r\n                        this.setState({winner: \"Player 1 Wins!!\", isGameFinished: true});\r\n                    } else {\r\n                        this.setState({winner: \"Player 2 Wins!!\", isGameFinished: true});\r\n                    }\r\n                } else {\r\n                    this.setState({isGameFinished: false});\r\n                }\r\n                \r\n                this.setState({\r\n                    tally1: tally1,\r\n                    tally2: tally2,\r\n                    cUser: sessionSnapshot.current_user,\r\n                    question1: quest1,\r\n                    question2: quest2\r\n                });\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    sayMessage() {\r\n        this.setState({ 'message': gameMessage })\r\n    }\r\n\r\n    toggleHidden() {\r\n        this.setState({\r\n            hidden: !this.state.hidden\r\n        })\r\n    }\r\n\r\n    handleOpen = (i) => {\r\n        this.setState({ open: true, choice: i });\r\n        console.log(i);\r\n    };\r\n    \r\n    handleInsertQChange = (event) => {\r\n        this.setState({'insertQ': event.target.value });\r\n    }\r\n    handleInsertAChange = (event) => {\r\n        this.setState({'insertA': event.target.value });\r\n    }\r\n    \r\n    handleSubmit = () => {\r\n        var currentUser = firebase.auth().currentUser.uid;\r\n        var insertA = this.state.insertA || \"\";\r\n        var insertQ = this.state.insertQ || \"\";\r\n        var sessionId = this.props.match.params.id;\r\n        var sessionDatabaseRef = firebase.database().ref(\"/session/\" + sessionId);\r\n        if(this.creator){\r\n            sessionDatabaseRef.child(\"question1\").push({\r\n                question: insertQ,\r\n                answer: insertA,\r\n                uid: currentUser,\r\n            });\r\n        }else{\r\n            sessionDatabaseRef.child(\"question2\").push({\r\n                question: insertQ,\r\n                answer: insertA,\r\n                uid: currentUser,\r\n            });\r\n        }\r\n    }\r\n    \r\n    handleClose = () => {\r\n        let a = this.check(this.state.choice, this.creator? this.state.answer: this.state.answer2);\r\n        console.log(a, this.state.choice, this.state.answer, this.state.answer2);\r\n\r\n        if (a) {\r\n            var sessionId = this.props.match.params.id;\r\n            var sessionDatabaseRef = firebase.database().ref(\"/session/\" + sessionId);\r\n         \r\n            if(this.creator) {\r\n                sessionDatabaseRef.child(\"tally1\").set(this.state.tally1 + 1, (error) => {\r\n                    if (error) {\r\n                        console.error(\"Error storing session metadata\", error);\r\n                    }\r\n                });\r\n            } else {\r\n                sessionDatabaseRef.child(\"tally2\").set(this.state.tally2 + 1, (error) => {\r\n                    if (error) {\r\n                        console.error(\"Error storing session metadata\", error);\r\n                    }\r\n                });\r\n            }\r\n            this.setState({ open: false });\r\n        }\r\n        else {\r\n            this.setState({ open: false, answerIsCorrect: a });\r\n        }\r\n    };\r\n    \r\n    reset = () => {\r\n        this.setState({\r\n            open: false,\r\n            tally1: 0,\r\n            tally2: 0,\r\n            answerIsCorrect: false,\r\n            hidden: true,\r\n            cUser: this.props.location.state.creator,\r\n            winner: \"\",\r\n            isGameFinished: false\r\n        });\r\n    }\r\n\r\n\r\n    handleChange = name => event => {\r\n        if (this.creator) {\r\n            this.setState({ answer: event.target.value });\r\n        }\r\n        else {\r\n            this.setState({ answer2: event.target.value });\r\n        }\r\n    };\r\n\r\n    check(choice, answer) {\r\n        if (answer === choice[1]) {\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    \r\n    render() {\r\n        const list = gameMessage.map((item) => {\r\n            return <li className = \"question\" key={item} onClick={() => this.handleOpen(item)}> {item[0]} </li>\r\n        });\r\n        \r\n        const quest1 = this.state.question1.map((item) => {\r\n            return <li className = \"question\" key={item} onClick={() => this.handleOpen([item.question, item.answer])}> {item.question} </li>\r\n        });\r\n        \r\n        const quest2 = this.state.question2.map((item) => {\r\n            return <li className = \"question\" key={item} onClick={() => this.handleOpen([item.question, item.answer])}> {item.question} </li>\r\n        });\r\n\r\n        const actions = [\r\n            <FlatButton\r\n            label=\"Cancel\"\r\n            primary={true}\r\n            onClick={() => { console.log(1); this.handleClose() }}\r\n            //onClick={this.handleClose}\r\n          />,\r\n            <FlatButton\r\n            label=\"Submit\"\r\n            primary={true}\r\n            keyboardFocused={true}\r\n            onClick={this.handleClose}\r\n          />,\r\n        ];\r\n\r\n        const inpt = () => (\r\n            <Dialog title=\"Answer Question\" actions={actions} modal={false} open={this.state.open} onRequestClose={this.handleClose}>\r\n            <p>{this.state.choice[0]}</p>\r\n            <TextField id=\"text-field-default\" placeholder=\"Answer\" value={this.creator? this.state.answer: this.state.answer2} onChange={this.handleChange()}/>\r\n        </Dialog>\r\n        );\r\n\r\n        const showWin = () => (\r\n            <Dialog title=\"Winner\" actions={actions} modal={false} open={this.state.isGameFinished} onRequestClose={this.reset}>\r\n                <h1>{this.state.winner}</h1>\r\n            </Dialog>\r\n        );\r\n\r\n        const txt = () => (\r\n            <div>\r\n            <TextField id=\"text-field-default\" onChange = {this.handleInsertQChange} placeholder=\"Question\"/><br />\r\n            <TextField id=\"text-field-default\" onChange = {this.handleInsertAChange} placeholder=\"Answer\"/><br />\r\n        <FlatButton\r\n            label=\"Submit\"\r\n            primary={true}\r\n            keyboardFocused={true}\r\n            onClick={this.handleSubmit}\r\n        />\r\n         </div>\r\n        );\r\n\r\n        return (<div className=\"twentyonequestion\">\r\n        <center><h1>Welcome to 21 Questions!</h1></center>\r\n        <div>\r\n        \r\n          <Tabs\r\n    value={this.state.value}\r\n    onChange={this.handleChange}\r\n  >\r\n    <Tab label=\"Questions\" value=\"a\">\r\n      <div>\r\n        <ol>\r\n            {list}\r\n            {this.creator? quest2: quest1}\r\n        </ol>\r\n        <div style={{flexDirection: 'row'}}>\r\n            <h1>Tally</h1>\r\n            <hr />\r\n            <h2 style={{marginLeft: 'auto'}}>Player 1: {this.state.tally1}</h2>\r\n            <h2 style={{marginLeft: 'auto'}}>Player 2: {this.state.tally2}</h2>\r\n        </div>\r\n      </div>\r\n    </Tab>\r\n    <Tab label=\"Input your own Question\" value=\"b\">\r\n      <div>\r\n      <br />\r\n        {txt()}\r\n        <br/>\r\n      </div>\r\n    </Tab>\r\n  </Tabs>\r\n  \r\n  {inpt()}\r\n  {showWin()}\r\n  \r\n        </div>\r\n      </div>);\r\n    }\r\n}\r\n","import GameComponent from \"../../GameComponent.js\";\r\nimport React from \"react\";\r\nimport UserApi from \"../../UserApi.js\";\r\nimport firebase from \"firebase\";\r\nimport \"./style.css\";\r\n//\r\n//\r\nconst W = document.body.clientWidth - 200;\r\nconst H = 700;\r\nconst fps = 100;\r\nconst paddleWidth = 100,\r\n  paddleHeight = 10,\r\n  paddleY = H - 20;\r\n\r\nvar windowWidth = document.body.clientWidth;\r\nvar derp = (windowWidth - W) / 2;\r\n\r\nvar line = W / 2 - 5;\r\nvar lineW = 10;\r\n\r\nvar numGone = 0;\r\nvar goneBlocks = [];\r\n\r\nvar durability = {\r\n  0: \"black\",\r\n  1: \"red\",\r\n  2: \"yellow\",\r\n  3: \"blue\"\r\n};\r\n\r\nclass block {\r\n  constructor(top, left, width, height) {\r\n    var ranDurability = Math.floor(Math.random() * 3) + 1;\r\n    this.width = width;\r\n    this.height = height;\r\n    this.top = top;\r\n    this.left = left;\r\n    this.durabilityNum = ranDurability;\r\n    this.color = durability[ranDurability];\r\n    this.save = function() {\r\n      return {\r\n        width: this.width,\r\n        height: this.height,\r\n        top: this.top,\r\n        left: this.left,\r\n        durability: this.durabilityNum,\r\n        color: this.color\r\n      };\r\n    };\r\n  }\r\n}\r\n\r\n//back row\r\nvar block1 = new block(10, 10, W / 20, 20);\r\nvar block2 = new block(10, W / 20 + 20, W / 20, 20);\r\nvar block3 = new block(10, 2 * (W / 20) + 30, W / 20, 20);\r\nvar block4 = new block(10, 3 * (W / 20) + 40, W / 20, 20);\r\nvar block5 = new block(10, 4 * (W / 20) + 50, W / 20, 20);\r\nvar block6 = new block(10, 5 * (W / 20) + 60, W / 20, 20);\r\n//Second last row\r\nvar block7 = new block(120, 10, W / 20, 20);\r\nvar block8 = new block(120, W / 20 + 20, W / 20, 20);\r\nvar block9 = new block(120, 2 * (W / 20) + 30, W / 20, 20);\r\nvar block10 = new block(120, 3 * (W / 20) + 40, W / 20, 20);\r\nvar block11 = new block(120, 4 * (W / 20) + 50, W / 20, 20);\r\nvar block12 = new block(120, 5 * (W / 20) + 60, W / 20, 20);\r\n// first row\r\nvar block13 = new block(230, 10, W / 20, 20);\r\nvar block14 = new block(230, W / 20 + 20, W / 20, 20);\r\nvar block15 = new block(230, 2 * (W / 20) + 30, W / 20, 20);\r\nvar block16 = new block(230, 3 * (W / 20) + 40, W / 20, 20);\r\nvar block17 = new block(230, 4 * (W / 20) + 50, W / 20, 20);\r\nvar block18 = new block(230, 5 * (W / 20) + 60, W / 20, 20);\r\nvar blocks = [\r\n  block1,\r\n  block2,\r\n  block3,\r\n  block4,\r\n  block5,\r\n  block6,\r\n  block7,\r\n  block8,\r\n  block9,\r\n  block10,\r\n  block11,\r\n  block12,\r\n  block13,\r\n  block14,\r\n  block15,\r\n  block16,\r\n  block17,\r\n  block18\r\n];\r\n\r\n//back row\r\nvar eBlock1 = new block(10, line + lineW + 10, W / 20, 20);\r\nvar eBlock2 = new block(10, W / 20 + line + lineW + 20, W / 20, 20);\r\nvar eBlock3 = new block(10, 2 * (W / 20) + line + lineW + 30, W / 20, 20);\r\nvar eBlock4 = new block(10, 3 * (W / 20) + line + lineW + 40, W / 20, 20);\r\nvar eBlock5 = new block(10, 4 * (W / 20) + line + lineW + 50, W / 20, 20);\r\nvar eBlock6 = new block(10, 5 * (W / 20) + line + lineW + 60, W / 20, 20);\r\n\r\n//middle row\r\nvar eBlock7 = new block(120, line + lineW + 10, W / 20, 20);\r\nvar eBlock8 = new block(120, W / 20 + line + lineW + 20, W / 20, 20);\r\nvar eBlock9 = new block(120, 2 * (W / 20) + line + lineW + 30, W / 20, 20);\r\nvar eBlock10 = new block(120, 3 * (W / 20) + line + lineW + 40, W / 20, 20);\r\nvar eBlock11 = new block(120, 4 * (W / 20) + line + lineW + 50, W / 20, 20);\r\nvar eBlock12 = new block(120, 5 * (W / 20) + line + lineW + 60, W / 20, 20);\r\n\r\n//front row\r\nvar eBlock13 = new block(230, line + lineW + 10, W / 20, 20, 1);\r\nvar eBlock14 = new block(230, W / 20 + line + lineW + 20, W / 20, 20, 1);\r\nvar eBlock15 = new block(230, 2 * (W / 20) + line + lineW + 30, W / 20, 20, 1);\r\nvar eBlock16 = new block(230, 3 * (W / 20) + line + lineW + 40, W / 20, 20, 1);\r\nvar eBlock17 = new block(230, 4 * (W / 20) + line + lineW + 50, W / 20, 20, 1);\r\nvar eBlock18 = new block(230, 5 * (W / 20) + line + lineW + 60, W / 20, 20, 1);\r\nvar blocks2 = [\r\n  eBlock1,\r\n  eBlock2,\r\n  eBlock3,\r\n  eBlock4,\r\n  eBlock5,\r\n  eBlock6,\r\n  eBlock7,\r\n  eBlock8,\r\n  eBlock9,\r\n  eBlock10,\r\n  eBlock11,\r\n  eBlock12,\r\n  eBlock13,\r\n  eBlock14,\r\n  eBlock15,\r\n  eBlock16,\r\n  eBlock17,\r\n  eBlock18\r\n];\r\n\r\nexport default class burst_Forth extends GameComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.user = firebase.auth().currentUser.uid;\r\n    this.session = firebase\r\n      .database()\r\n      .ref(`/session/${props.location.state.id}`);\r\n    this.isCreator = this.user === props.location.state.creator;\r\n    this.users = this.getSessionUserIds().map(user_id =>\r\n      UserApi.getName(user_id)\r\n    );\r\n    this.creator = UserApi.getName(this.getSessionCreatorUserId());\r\n    this.interval = setInterval(() => this.ballMove(), 1000 / fps);\r\n    this.state = {\r\n      ball: {\r\n        left: W / 4,\r\n        top: paddleY - 50,\r\n        ballR: 10,\r\n        ballSpeedX: -4,\r\n        ballSpeedY: -3\r\n      },\r\n      ball2: {\r\n        //use this later for the collsion of the other player\r\n        left2: (3 * W) / 4,\r\n        top2: paddleY - 50,\r\n        ballR2: 10,\r\n        ballSpeedX2: -4,\r\n        ballSpeedY2: -3\r\n      },\r\n      you: {\r\n        score: 0,\r\n        left: W / 2,\r\n        blocks: [\r\n          block1.save(),\r\n          block2.save(),\r\n          block3.save(),\r\n          block4.save(),\r\n          block5.save(),\r\n          block6.save(),\r\n          block7.save(),\r\n          block8.save(),\r\n          block9.save(),\r\n          block10.save(),\r\n          block11.save(),\r\n          block12.save(),\r\n          block13.save(),\r\n          block14.save(),\r\n          block15.save(),\r\n          block16.save(),\r\n          block17.save(),\r\n          block18.save()\r\n        ]\r\n      },\r\n      p2: {\r\n        left: (3 * W) / 4,\r\n        score: 0,\r\n        blocks: [\r\n          eBlock1.save(),\r\n          eBlock2.save(),\r\n          eBlock3.save(),\r\n          eBlock4.save(),\r\n          eBlock5.save(),\r\n          eBlock6.save(),\r\n          eBlock7.save(),\r\n          eBlock8.save(),\r\n          eBlock9.save(),\r\n          eBlock10.save(),\r\n          eBlock11.save(),\r\n          eBlock12.save(),\r\n          eBlock13.save(),\r\n          eBlock14.save(),\r\n          eBlock15.save(),\r\n          eBlock16.save(),\r\n          eBlock17.save(),\r\n          eBlock18.save()\r\n        ],\r\n        win: false\r\n      }\r\n    };\r\n    this.getSessionDatabaseRef().set({\r\n      ball: this.state.ball,\r\n      ball2: this.state.ball2,\r\n      P1: {\r\n        name: this.users[0],\r\n        x_cord: this.state.you.left,\r\n        score: this.state.you.score,\r\n        blocks: [\r\n          block1.save(),\r\n          block2.save(),\r\n          block3.save(),\r\n          block4.save(),\r\n          block5.save(),\r\n          block6.save(),\r\n          block7.save(),\r\n          block8.save(),\r\n          block9.save(),\r\n          block10.save(),\r\n          block11.save(),\r\n          block12.save(),\r\n          block13.save(),\r\n          block14.save(),\r\n          block15.save(),\r\n          block16.save(),\r\n          block17.save(),\r\n          block18.save()\r\n        ],\r\n        win: false\r\n      },\r\n      P2: {\r\n        name: this.users[1],\r\n        x_cord: this.state.p2.left,\r\n        score: this.state.p2.score, //change to the state score later\r\n        blocks: [\r\n          eBlock1.save(),\r\n          eBlock2.save(),\r\n          eBlock3.save(),\r\n          eBlock4.save(),\r\n          eBlock5.save(),\r\n          eBlock6.save(),\r\n          eBlock7.save(),\r\n          eBlock8.save(),\r\n          eBlock9.save(),\r\n          eBlock10.save(),\r\n          eBlock11.save(),\r\n          eBlock12.save(),\r\n          eBlock13.save(),\r\n          eBlock14.save(),\r\n          eBlock15.save(),\r\n          eBlock16.save(),\r\n          eBlock17.save(),\r\n          eBlock18.save()\r\n        ],\r\n        win: false\r\n      }\r\n    });\r\n  }\r\n\r\n  checkWin() {\r\n    if (this.isCreator) {\r\n      numGone = 0;\r\n      for (var q = 0; q < blocks.length; q++) {\r\n        if (blocks[q].durabilityNum === 0) {\r\n          numGone += 1;\r\n          goneBlocks.push(blocks[q]);\r\n          if (numGone === blocks.length) {\r\n            this.getSessionDatabaseRef().update({\r\n              P1: {\r\n                name: this.users[0],\r\n                x_cord: this.state.you.left,\r\n                score: numGone, //change to the state score later\r\n                blocks: this.state.you.blocks,\r\n                win: true\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n        }\r\n      }\r\n    } else {\r\n      numGone = 0;\r\n      for (var y = 0; y < blocks2.length; y++) {\r\n        if (blocks2[y].durabilityNum === 0) {\r\n          numGone += 1;\r\n          if (numGone === blocks2.length) {\r\n            this.getSessionDatabaseRef().update({\r\n              P2: {\r\n                name: this.users[1],\r\n                x_cord: this.state.p2.left,\r\n                score: numGone, //change to the state score later\r\n                blocks: this.state.p2.blocks,\r\n                win: true\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  ballMove() {\r\n    // fix this god damn funstion, i don't know why it doesn't work\r\n    this.checkWin();\r\n    if (this.isCreator) {\r\n      var { left, top, ballR, ballSpeedX, ballSpeedY } = this.state.ball;\r\n\r\n      //wall collisions\r\n      if (left + ballR / 2 > W || ballR + left < 0) {\r\n        ballSpeedX = -ballSpeedX;\r\n      }\r\n      if (top + ballR / 2 > H || top < 0) {\r\n        ballSpeedY = -ballSpeedY;\r\n      }\r\n\r\n      //middle collision\r\n      if (left + ballR > line) {\r\n        ballSpeedX = -ballSpeedX;\r\n      }\r\n\r\n      //paddle collisions\r\n      if (\r\n        this.state.you.left - derp - paddleWidth / 2 < left + ballR &&\r\n        this.state.you.left - derp + paddleWidth / 2 > left\r\n      ) {\r\n        if (top + ballR >= paddleY && top <= paddleY + paddleHeight) {\r\n          ballSpeedY = -ballSpeedY;\r\n          // var delta = left - (this.state.you.left - derp + paddleHeight / 2);\r\n          // ballSpeedX = delta * 0.15;\r\n        }\r\n      }\r\n\r\n      //block collsions\r\n\r\n      for (var i = 0; i < blocks.length; i++) {\r\n        var currentBlock = blocks[i];\r\n        if (\r\n          left + ballR >= blocks[i].left &&\r\n          left + ballR <= blocks[i].left + 2\r\n        ) {\r\n          if (\r\n            top + ballR <= blocks[i].top + blocks[i].height &&\r\n            top + ballR >= blocks[i].top\r\n          ) {\r\n            ballSpeedX = -ballSpeedX;\r\n            currentBlock.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock);\r\n          } else if (\r\n            top <= blocks[i].top + blocks[i].height &&\r\n            top >= blocks[i].top\r\n          ) {\r\n            ballSpeedX = -ballSpeedX;\r\n            currentBlock.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock);\r\n          }\r\n        } else if (\r\n          left >= blocks[i].left + blocks[i].width - 2 &&\r\n          left <= blocks[i].left + blocks[i].width\r\n        ) {\r\n          if (\r\n            top + ballR <= blocks[i].top + blocks[i].height &&\r\n            top + ballR >= blocks[i].top\r\n          ) {\r\n            ballSpeedX = -ballSpeedX;\r\n            currentBlock.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock);\r\n          } else if (\r\n            top <= blocks[i].top + blocks[i].height &&\r\n            top >= blocks[i].top\r\n          ) {\r\n            ballSpeedX = -ballSpeedX;\r\n            currentBlock.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock);\r\n          }\r\n        } else if (\r\n          left + ballR <= blocks[i].left + blocks[i].width &&\r\n          left + ballR >= blocks[i].left\r\n        ) {\r\n          if (\r\n            top + ballR <= blocks[i].top + 2 &&\r\n            top + ballR >= blocks[i].top\r\n          ) {\r\n            ballSpeedY = -ballSpeedY;\r\n            currentBlock.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock);\r\n          } else if (\r\n            top <= blocks[i].top + blocks[i].height &&\r\n            top >= blocks[i].top + blocks[i].height - 2\r\n          ) {\r\n            ballSpeedY = -ballSpeedY;\r\n            currentBlock.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock);\r\n          }\r\n        } else if (\r\n          left <= blocks[i].left + blocks[i].height &&\r\n          left >= blocks[i].width + blocks[i].left - 2\r\n        ) {\r\n          if (top >= blocks[i].top && top <= blocks[i].top + blocks[i].height) {\r\n            ballSpeedX = -ballSpeedX;\r\n            currentBlock.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock);\r\n          } else if (\r\n            top + ballR >= blocks[i].top &&\r\n            top + ballR <= blocks[i].top + blocks[i].height\r\n          ) {\r\n            ballSpeedX = -ballSpeedX;\r\n            currentBlock.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock);\r\n          }\r\n        }\r\n      }\r\n\r\n      this.getSessionDatabaseRef().update({\r\n        ball: {\r\n          left: left + ballSpeedX,\r\n          top: top + ballSpeedY,\r\n          ballR: ballR,\r\n          ballSpeedX: ballSpeedX,\r\n          ballSpeedY: ballSpeedY\r\n        }\r\n      });\r\n    } else {\r\n      //ball 2 collisions\r\n\r\n      var { left2, top2, ballR2, ballSpeedX2, ballSpeedY2 } = this.state.ball2;\r\n\r\n      //wall collisions\r\n      if (left2 + ballR2 > W || ballR2 + left2 < line + lineW) {\r\n        ballSpeedX2 = -ballSpeedX2;\r\n      }\r\n      if (top2 + ballR2 > H || top2 < 0) {\r\n        ballSpeedY2 = -ballSpeedY2;\r\n        if (top2 >= H) {\r\n          //punishment for hitting the bottom\r\n        }\r\n      }\r\n\r\n      //middle collision\r\n      if (left2 - ballR2 < line + lineW) {\r\n        ballSpeedX2 = -ballSpeedX2;\r\n      }\r\n\r\n      //paddle collisions\r\n      if (\r\n        this.state.p2.left - derp - paddleWidth / 2 < left2 &&\r\n        this.state.p2.left - derp + paddleWidth / 2 > left2 + ballR2\r\n      ) {\r\n        if (top2 + ballR2 >= paddleY && top2 <= paddleY + paddleHeight) {\r\n          ballSpeedY2 = -ballSpeedY2;\r\n          var delta2 = left - (this.state.p2.left - derp + paddleHeight / 2);\r\n          ballSpeedX = delta2 * 0.25;\r\n        }\r\n      }\r\n      //\r\n      //block collsions\r\n\r\n      for (var x = 0; x < blocks2.length; x++) {\r\n        var currentBlock2 = blocks2[x];\r\n        if (\r\n          left2 + ballR2 >= blocks2[x].left &&\r\n          left2 + ballR2 <= blocks2[x].left + 2\r\n        ) {\r\n          if (\r\n            top2 + ballR2 <= blocks2[x].top + blocks2[x].height &&\r\n            top2 + ballR2 >= blocks2[x].top\r\n          ) {\r\n            ballSpeedX2 = -ballSpeedX2;\r\n            currentBlock2.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock2);\r\n          } else if (\r\n            top2 <= blocks2[x].top + blocks2[x].height &&\r\n            top2 >= blocks2[x].top\r\n          ) {\r\n            ballSpeedX2 = -ballSpeedX2;\r\n            currentBlock2.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock2);\r\n          }\r\n        } else if (\r\n          left2 >= blocks2[x].left + blocks2[x].width - 2 &&\r\n          left2 <= blocks2[x].left + blocks2[x].width\r\n        ) {\r\n          if (\r\n            top2 + ballR2 <= blocks2[x].top + blocks2[x].height &&\r\n            top2 + ballR2 >= blocks2[x].top\r\n          ) {\r\n            ballSpeedX2 = -ballSpeedX2;\r\n            currentBlock2.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock2);\r\n          } else if (\r\n            top2 <= blocks2[x].top + blocks2[x].height &&\r\n            top2 >= blocks2[x].top\r\n          ) {\r\n            ballSpeedX2 = -ballSpeedX2;\r\n            currentBlock2.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock2);\r\n          }\r\n        } else if (\r\n          left2 + ballR2 <= blocks2[x].left + blocks2[x].width &&\r\n          left2 + ballR2 >= blocks2[x].left\r\n        ) {\r\n          if (\r\n            top2 + ballR2 <= blocks2[x].top + 2 &&\r\n            top2 + ballR2 >= blocks2[x].top\r\n          ) {\r\n            ballSpeedY2 = -ballSpeedY2;\r\n            currentBlock2.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock2);\r\n          } else if (\r\n            top2 <= blocks2[x].top + blocks2[x].height &&\r\n            top2 >= blocks2[x].top + blocks2[x].height - 2\r\n          ) {\r\n            ballSpeedY2 = -ballSpeedY2;\r\n            currentBlock2.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock2);\r\n          }\r\n        } else if (\r\n          left2 <= blocks2[x].left + blocks2[x].height &&\r\n          left2 >= blocks2[x].left + blocks[x].width - 2\r\n        ) {\r\n          if (\r\n            top2 + ballR2 <= blocks2[x].top + blocks2[x].height &&\r\n            top2 + ballR2 >= blocks2[x].top\r\n          ) {\r\n            ballSpeedX2 = -ballSpeedX2;\r\n            currentBlock2.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock2);\r\n          } else if (\r\n            top2 <= blocks2[x].top + blocks2[x].height &&\r\n            top2 >= blocks2[x].top\r\n          ) {\r\n            ballSpeedX2 = -ballSpeedX2;\r\n            currentBlock2.durabilityNum -= 1;\r\n            this.checkBlock(currentBlock);\r\n          }\r\n        }\r\n      }\r\n      this.getSessionDatabaseRef().update({\r\n        ball2: {\r\n          left2: left2 + ballSpeedX2,\r\n          top2: top2 + ballSpeedY2,\r\n          ballR2: ballR2,\r\n          ballSpeedX2: ballSpeedX2,\r\n          ballSpeedY2: ballSpeedY2\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  checkBlock(currentBlock) {\r\n    currentBlock.color = durability[currentBlock.durabilityNum];\r\n\r\n    if (currentBlock.durabilityNum <= 0) {\r\n      currentBlock.height = 0;\r\n      currentBlock.width = 0;\r\n      currentBlock.left = -10;\r\n      currentBlock.top = -10;\r\n    }\r\n\r\n    if (this.isCreator) {\r\n      this.getSessionDatabaseRef().update({\r\n        P1: {\r\n          name: this.users[0],\r\n          x_cord: this.state.you.left,\r\n          score: numGone, //change to the state score later\r\n          blocks: [\r\n            block1.save(),\r\n            block2.save(),\r\n            block3.save(),\r\n            block4.save(),\r\n            block5.save(),\r\n            block6.save(),\r\n            block7.save(),\r\n            block8.save(),\r\n            block9.save(),\r\n            block10.save(),\r\n            block11.save(),\r\n            block12.save(),\r\n            block13.save(),\r\n            block14.save(),\r\n            block15.save(),\r\n            block16.save(),\r\n            block17.save(),\r\n            block18.save()\r\n          ]\r\n        }\r\n      });\r\n\r\n      //push the blocks changes into firebase\r\n    } else {\r\n      this.getSessionDatabaseRef().update({\r\n        P2: {\r\n          name: this.users[1],\r\n          x_cord: this.state.p2.left,\r\n          score: numGone, //change to the state score later\r\n          blocks: [\r\n            eBlock1.save(),\r\n            eBlock2.save(),\r\n            eBlock3.save(),\r\n            eBlock4.save(),\r\n            eBlock5.save(),\r\n            eBlock6.save(),\r\n            eBlock7.save(),\r\n            eBlock8.save(),\r\n            eBlock9.save(),\r\n            eBlock10.save(),\r\n            eBlock11.save(),\r\n            eBlock12.save(),\r\n            eBlock13.save(),\r\n            eBlock14.save(),\r\n            eBlock15.save(),\r\n            eBlock16.save(),\r\n            eBlock17.save(),\r\n            eBlock18.save()\r\n          ]\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onMouseMove(e) {\r\n    //if this is session creator\r\n    if (this.isCreator && e.clientX < line + lineW + 50 && e.clientX > 150) {\r\n      this.getSessionDatabaseRef().update({\r\n        P1: {\r\n          name: this.users[0],\r\n          x_cord: e.clientX,\r\n          score: this.state.you.score, //change to the state score later\r\n          blocks: [\r\n            block1.save(),\r\n            block2.save(),\r\n            block3.save(),\r\n            block4.save(),\r\n            block5.save(),\r\n            block6.save(),\r\n            block7.save(),\r\n            block8.save(),\r\n            block9.save(),\r\n            block10.save(),\r\n            block11.save(),\r\n            block12.save(),\r\n            block13.save(),\r\n            block14.save(),\r\n            block15.save(),\r\n            block16.save(),\r\n            block17.save(),\r\n            block18.save()\r\n          ]\r\n        }\r\n      });\r\n    }\r\n    if (\r\n      UserApi.getName(this.user) === this.users[1] &&\r\n      e.clientX > line + lineW + 150 &&\r\n      e.clientX < windowWidth - 150\r\n    ) {\r\n      this.getSessionDatabaseRef().update({\r\n        P2: {\r\n          name: this.users[1], //change name\r\n          x_cord: e.clientX,\r\n          score: this.state.p2.score, //change to the state score later\r\n          blocks: [\r\n            eBlock1.save(),\r\n            eBlock2.save(),\r\n            eBlock3.save(),\r\n            eBlock4.save(),\r\n            eBlock5.save(),\r\n            eBlock6.save(),\r\n            eBlock7.save(),\r\n            eBlock8.save(),\r\n            eBlock9.save(),\r\n            eBlock10.save(),\r\n            eBlock11.save(),\r\n            eBlock12.save(),\r\n            eBlock13.save(),\r\n            eBlock14.save(),\r\n            eBlock15.save(),\r\n            eBlock16.save(),\r\n            eBlock17.save(),\r\n            eBlock18.save()\r\n          ]\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onSessionDataChanged(data) {\r\n    var winner = null;\r\n    if (data.P1.win === true) {\r\n      winner = \"p1\";\r\n    } else if (data.P2.win === true) {\r\n      winner = \"p2\";\r\n    }\r\n    this.setState({\r\n      ball: {\r\n        left: data.ball.left,\r\n        top: data.ball.top,\r\n        ballR: data.ball.ballR,\r\n        ballSpeedX: data.ball.ballSpeedX,\r\n        ballSpeedY: data.ball.ballSpeedY\r\n      },\r\n      ball2: {\r\n        //use this later for the collsion of the other player\r\n        left2: data.ball2.left2,\r\n        top2: data.ball2.top2,\r\n        ballR2: data.ball2.ballR2,\r\n        ballSpeedX2: data.ball2.ballSpeedX2,\r\n        ballSpeedY2: data.ball2.ballSpeedY2\r\n      },\r\n      you: {\r\n        score: data.P1.score,\r\n        left: data.P1.x_cord,\r\n        blocks: data.P1.blocks\r\n      },\r\n      p2: {\r\n        score: data.P2.score,\r\n        left: data.P2.x_cord,\r\n        blocks: data.P2.blocks\r\n      },\r\n      win: winner\r\n    });\r\n  }\r\n\r\n  render() {\r\n    windowWidth = document.body.clientWidth;\r\n    derp = (windowWidth - W) / 2;\r\n    // var id = this.getSessionId();\r\n    // var users = this.getSessionUserIds().map(user_id => (\r\n    //   <li key={user_id}>{user_id}</li>\r\n    // ));\r\n    // var creator = this.getSessionCreatorUserId();\r\n\r\n    if (this.state.win) {\r\n      if (this.state.win === \"p1\") {\r\n        if (this.users[0] === UserApi.getName(this.user)) {\r\n          return (\r\n            <div\r\n              style={{\r\n                height: \"800px\",\r\n                background:\r\n                  \"url('http://clipart-library.com/images/8cAEdyAXi.png')  \",\r\n                textAlign: \"center\"\r\n              }}\r\n            >\r\n              <div\r\n                className=\"result\"\r\n                style={{\r\n                  zIndex: \"2\",\r\n                  display: \"flex\",\r\n                  postion: \"relative\",\r\n                  justifyContent: \"center\",\r\n                  flex: \"center\",\r\n                  paddingTop: \"20px\",\r\n                  fontSize: \"30px\",\r\n                  boxShadow: \"5px 5px 12px 12px rgba(0, 0, 255, .2)\",\r\n                  width: \"50%\",\r\n                  margin: \"auto\",\r\n                  marginTop: \"20px\",\r\n                  borderRadius: \"50%\",\r\n                  backgroundColor: \"white\",\r\n                  animationName: \"gameOver\",\r\n                  animationDuration: \"3s\",\r\n                }}\r\n              >\r\n                <h1>{this.users[0]} is the winner !</h1>\r\n              </div>\r\n            </div>\r\n          );\r\n        } else {\r\n          return (\r\n            <div\r\n              style={{\r\n                height: \"800px\",\r\n                background:\r\n                  \"url('http://cdn.shopify.com/s/files/1/0641/1521/products/pins-sad-balloon.jpg?v=1516215357') center \"\r\n              }}\r\n            >\r\n              <div\r\n                className=\"result\"\r\n                style={{\r\n                  zIndex: \"2\",\r\n                  display: \"flex\",\r\n                  postion: \"relative\",\r\n                  justifyContent: \"center\",\r\n                  flex: \"center\",\r\n                  paddingTop: \"20px\",\r\n                  fontSize: \"30px\",\r\n                  boxShadow: \"5px 5px 12px 12px rgba(0, 0, 255, .2)\",\r\n                  width: \"50%\",\r\n                  margin: \"auto\",\r\n                  marginTop: \"20px\",\r\n                  borderRadius: \"50%\",\r\n                  backgroundColor: \"white\"\r\n                }}\r\n              >\r\n                <h1>{this.users[1]} has lost !</h1>\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n      } else {\r\n        if (this.users[0] === UserApi.getName(this.user)) {\r\n          return (\r\n            <div\r\n              style={{\r\n                height: \"800px\",\r\n                background:\r\n                  \"url('http://cdn.shopify.com/s/files/1/0641/1521/products/pins-sad-balloon.jpg?v=1516215357') center \"\r\n              }}\r\n            >\r\n              <div\r\n                className=\"result\"\r\n                style={{\r\n                  zIndex: \"2\",\r\n                  display: \"flex\",\r\n                  postion: \"relative\",\r\n                  justifyContent: \"center\",\r\n                  flex: \"center\",\r\n                  paddingTop: \"20px\",\r\n                  boxShadow: \"5px 5px 12px 12px rgba(0, 0, 255, .2)\",\r\n                  width: \"50%\",\r\n                  margin: \"auto\",\r\n                  marginTop: \"20px\",\r\n                  textAlign: \"center\",\r\n                  borderRadius: \"50%\",\r\n                  backgroundColor: \"white\"\r\n                }}\r\n              >\r\n                <h1>{this.users[0]} has lost !</h1>\r\n              </div>\r\n            </div>\r\n          );\r\n        } else {\r\n          return (\r\n            <div\r\n              style={{\r\n                height: \"800px\",\r\n                background:\r\n                  \"url('http://clipart-library.com/images/8cAEdyAXi.png')  \"\r\n              }}\r\n            >\r\n              <div\r\n                className=\"result\"\r\n                style={{\r\n                  zIndex: \"2\",\r\n                  display: \"flex\",\r\n                  postion: \"relative\",\r\n                  justifyContent: \"center\",\r\n                  flex: \"center\",\r\n                  paddingTop: \"20px\",\r\n                  boxShadow: \"5px 5px 12px 12px rgba(0, 0, 255, .2)\",\r\n                  width: \"50%\",\r\n                  margin: \"auto\",\r\n                  marginTop: \"20px\",\r\n                  textAlign: \"center\",\r\n                  borderRadius: \"50%\",\r\n                  backgroundColor: \"white\"\r\n                }}\r\n              >\r\n                <h1>{this.users[1]} is the winner !</h1>\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n      }\r\n    } else {\r\n      return (\r\n        <div\r\n          style={{\r\n            padding: \"30px\",\r\n            width: \"90%\",\r\n            margin: \"auto\",\r\n            marginTop: \"2%\",\r\n            height: \"80%\",\r\n            // border: \"5px solid\",\r\n            boxShadow: \"5px 5px 12px 12px rgba(0, 0, 255, .2)\",\r\n            textAlign: \"center\"\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              height: \"40px\",\r\n              width: \"100%\",\r\n              margin: \"auto\",\r\n              textAlign: \"center\",\r\n              position: \"relative\",\r\n              color: \"black\",\r\n              // border: \"5px solid\",\r\n              padding: \"1px\",\r\n              boxShadow: \"5px 5px 12px 12px rgba(0, 0, 255, .2)\"\r\n            }}\r\n          >\r\n            <p\r\n              style={{\r\n                width: \"50%\",\r\n                float: \"left\"\r\n              }}\r\n            >\r\n              {this.users[0]} has {this.state.you.score} points\r\n            </p>\r\n            <p\r\n              style={{\r\n                width: \"50%\",\r\n                float: \"right\"\r\n              }}\r\n            >\r\n              {this.users[1]} has {this.state.p2.score} points\r\n            </p>\r\n          </div>\r\n          <div\r\n            style={{\r\n              margin: \"auto \",\r\n              marginTop: \" 20px\",\r\n              position: \"relative\",\r\n              background:\r\n                \"linear-gradient(217deg, rgba(255,0,0,.8), rgba(255,0,0,0) 70.71%),linear-gradient(127deg, rgba(0,255,0,.8), rgba(0,255,0,0) 70.71%), linear-gradient(336deg, rgba(0,0,255,.8), rgba(0,0,255,0) 70.71%)\",\r\n              width: W + \"px\",\r\n              height: H + \"px\",\r\n              border: \"5px solid\"\r\n              // cursor: \"none\"\r\n            }}\r\n            onMouseMove={e => this.onMouseMove(e)}\r\n          >\r\n            <div\r\n              className=\"You\"\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: \"green\",\r\n                width: paddleWidth + \"px\",\r\n                height: paddleHeight + \"px\",\r\n                top: paddleY + \"px\",\r\n                left: this.state.you.left - derp - paddleWidth / 2 + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              className=\"ball1\"\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: \"white\",\r\n                width: this.state.ball.ballR + \"px\",\r\n                height: this.state.ball.ballR + \"px\",\r\n                borderRadius: \"50%\",\r\n                top: this.state.ball.top + \"px\",\r\n                left: this.state.ball.left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[0].color,\r\n                width: this.state.you.blocks[0].width + \"px\",\r\n                height: this.state.you.blocks[0].height + \"px\",\r\n                top: this.state.you.blocks[0].top + \"px\",\r\n                left: this.state.you.blocks[0].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[1].color,\r\n                width: this.state.you.blocks[1].width + \"px\",\r\n                height: this.state.you.blocks[1].height + \"px\",\r\n                top: this.state.you.blocks[1].top + \"px\",\r\n                left: this.state.you.blocks[1].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[2].color,\r\n                width: this.state.you.blocks[2].width + \"px\",\r\n                height: this.state.you.blocks[2].height + \"px\",\r\n                top: this.state.you.blocks[2].top + \"px\",\r\n                left: this.state.you.blocks[2].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[3].color,\r\n                width: this.state.you.blocks[3].width + \"px\",\r\n                height: this.state.you.blocks[3].height + \"px\",\r\n                top: this.state.you.blocks[3].top + \"px\",\r\n                left: this.state.you.blocks[3].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[4].color,\r\n                width: this.state.you.blocks[4].width + \"px\",\r\n                height: this.state.you.blocks[4].height + \"px\",\r\n                top: this.state.you.blocks[4].top + \"px\",\r\n                left: this.state.you.blocks[4].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[5].color,\r\n                width: this.state.you.blocks[5].width + \"px\",\r\n                height: this.state.you.blocks[5].height + \"px\",\r\n                top: this.state.you.blocks[5].top + \"px\",\r\n                left: this.state.you.blocks[5].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[6].color,\r\n                width: this.state.you.blocks[6].width + \"px\",\r\n                height: this.state.you.blocks[6].height + \"px\",\r\n                top: this.state.you.blocks[6].top + \"px\",\r\n                left: this.state.you.blocks[6].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[7].color,\r\n                width: this.state.you.blocks[7].width + \"px\",\r\n                height: this.state.you.blocks[7].height + \"px\",\r\n                top: this.state.you.blocks[7].top + \"px\",\r\n                left: this.state.you.blocks[7].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[8].color,\r\n                width: this.state.you.blocks[8].width + \"px\",\r\n                height: this.state.you.blocks[8].height + \"px\",\r\n                top: this.state.you.blocks[8].top + \"px\",\r\n                left: this.state.you.blocks[8].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[9].color,\r\n                width: this.state.you.blocks[9].width + \"px\",\r\n                height: this.state.you.blocks[9].height + \"px\",\r\n                top: this.state.you.blocks[9].top + \"px\",\r\n                left: this.state.you.blocks[9].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[10].color,\r\n                width: this.state.you.blocks[10].width + \"px\",\r\n                height: this.state.you.blocks[10].height + \"px\",\r\n                top: this.state.you.blocks[10].top + \"px\",\r\n                left: this.state.you.blocks[10].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[11].color,\r\n                width: this.state.you.blocks[11].width + \"px\",\r\n                height: this.state.you.blocks[11].height + \"px\",\r\n                top: this.state.you.blocks[11].top + \"px\",\r\n                left: this.state.you.blocks[11].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[12].color,\r\n                width: this.state.you.blocks[12].width + \"px\",\r\n                height: this.state.you.blocks[12].height + \"px\",\r\n                top: this.state.you.blocks[12].top + \"px\",\r\n                left: this.state.you.blocks[12].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[13].color,\r\n                width: this.state.you.blocks[13].width + \"px\",\r\n                height: this.state.you.blocks[13].height + \"px\",\r\n                top: this.state.you.blocks[13].top + \"px\",\r\n                left: this.state.you.blocks[13].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[14].color,\r\n                width: this.state.you.blocks[14].width + \"px\",\r\n                height: this.state.you.blocks[14].height + \"px\",\r\n                top: this.state.you.blocks[14].top + \"px\",\r\n                left: this.state.you.blocks[14].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[15].color,\r\n                width: this.state.you.blocks[15].width + \"px\",\r\n                height: this.state.you.blocks[15].height + \"px\",\r\n                top: this.state.you.blocks[15].top + \"px\",\r\n                left: this.state.you.blocks[15].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[16].color,\r\n                width: this.state.you.blocks[16].width + \"px\",\r\n                height: this.state.you.blocks[16].height + \"px\",\r\n                top: this.state.you.blocks[16].top + \"px\",\r\n                left: this.state.you.blocks[16].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.you.blocks[17].color,\r\n                width: this.state.you.blocks[17].width + \"px\",\r\n                height: this.state.you.blocks[17].height + \"px\",\r\n                top: this.state.you.blocks[17].top + \"px\",\r\n                left: this.state.you.blocks[17].left + \"px\"\r\n              }}\r\n            />\r\n\r\n            <div\r\n              className=\"line\"\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: \"white\",\r\n                width: lineW + \"px\",\r\n                height: \"inherit\",\r\n                left: line + \"px\"\r\n              }}\r\n            />\r\n\r\n            <div\r\n              className=\"Player2\"\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: \"purple\",\r\n                width: paddleWidth + \"px\",\r\n                height: paddleHeight + \"px\",\r\n                top: paddleY + \"px\",\r\n                left: this.state.p2.left - derp - paddleWidth / 2 + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              className=\"ball2\"\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: \"white\",\r\n                width: this.state.ball2.ballR2 + \"px\",\r\n                height: this.state.ball2.ballR2 + \"px\",\r\n                borderRadius: \"50%\",\r\n                top: this.state.ball2.top2 + \"px\",\r\n                left: this.state.ball2.left2 + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[0].color,\r\n                width: this.state.p2.blocks[0].width + \"px\",\r\n                height: this.state.p2.blocks[0].height + \"px\",\r\n                top: this.state.p2.blocks[0].top + \"px\",\r\n                left: this.state.p2.blocks[0].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[1].color,\r\n                width: this.state.p2.blocks[1].width + \"px\",\r\n                height: this.state.p2.blocks[1].height + \"px\",\r\n                top: this.state.p2.blocks[1].top + \"px\",\r\n                left: this.state.p2.blocks[1].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[2].color,\r\n                width: this.state.p2.blocks[2].width + \"px\",\r\n                height: this.state.p2.blocks[2].height + \"px\",\r\n                top: this.state.p2.blocks[2].top + \"px\",\r\n                left: this.state.p2.blocks[2].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[3].color,\r\n                width: this.state.p2.blocks[3].width + \"px\",\r\n                height: this.state.p2.blocks[3].height + \"px\",\r\n                top: this.state.p2.blocks[3].top + \"px\",\r\n                left: this.state.p2.blocks[3].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[4].color,\r\n                width: this.state.p2.blocks[4].width + \"px\",\r\n                height: this.state.p2.blocks[4].height + \"px\",\r\n                top: this.state.p2.blocks[4].top + \"px\",\r\n                left: this.state.p2.blocks[4].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[5].color,\r\n                width: this.state.p2.blocks[5].width + \"px\",\r\n                height: this.state.p2.blocks[5].height + \"px\",\r\n                top: this.state.p2.blocks[5].top + \"px\",\r\n                left: this.state.p2.blocks[5].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[6].color,\r\n                width: this.state.p2.blocks[6].width + \"px\",\r\n                height: this.state.p2.blocks[6].height + \"px\",\r\n                top: this.state.p2.blocks[6].top + \"px\",\r\n                left: this.state.p2.blocks[6].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[7].color,\r\n                width: this.state.p2.blocks[7].width + \"px\",\r\n                height: this.state.p2.blocks[7].height + \"px\",\r\n                top: this.state.p2.blocks[7].top + \"px\",\r\n                left: this.state.p2.blocks[7].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[8].color,\r\n                width: this.state.p2.blocks[8].width + \"px\",\r\n                height: this.state.p2.blocks[8].height + \"px\",\r\n                top: this.state.p2.blocks[8].top + \"px\",\r\n                left: this.state.p2.blocks[8].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[8].color,\r\n                width: this.state.p2.blocks[8].width + \"px\",\r\n                height: this.state.p2.blocks[8].height + \"px\",\r\n                top: this.state.p2.blocks[8].top + \"px\",\r\n                left: this.state.p2.blocks[8].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[9].color,\r\n                width: this.state.p2.blocks[9].width + \"px\",\r\n                height: this.state.p2.blocks[9].height + \"px\",\r\n                top: this.state.p2.blocks[9].top + \"px\",\r\n                left: this.state.p2.blocks[9].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[10].color,\r\n                width: this.state.p2.blocks[10].width + \"px\",\r\n                height: this.state.p2.blocks[10].height + \"px\",\r\n                top: this.state.p2.blocks[10].top + \"px\",\r\n                left: this.state.p2.blocks[10].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[11].color,\r\n                width: this.state.p2.blocks[11].width + \"px\",\r\n                height: this.state.p2.blocks[11].height + \"px\",\r\n                top: this.state.p2.blocks[11].top + \"px\",\r\n                left: this.state.p2.blocks[11].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[12].color,\r\n                width: this.state.p2.blocks[12].width + \"px\",\r\n                height: this.state.p2.blocks[12].height + \"px\",\r\n                top: this.state.p2.blocks[12].top + \"px\",\r\n                left: this.state.p2.blocks[12].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[13].color,\r\n                width: this.state.p2.blocks[13].width + \"px\",\r\n                height: this.state.p2.blocks[13].height + \"px\",\r\n                top: this.state.p2.blocks[13].top + \"px\",\r\n                left: this.state.p2.blocks[13].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[14].color,\r\n                width: this.state.p2.blocks[14].width + \"px\",\r\n                height: this.state.p2.blocks[14].height + \"px\",\r\n                top: this.state.p2.blocks[14].top + \"px\",\r\n                left: this.state.p2.blocks[14].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[15].color,\r\n                width: this.state.p2.blocks[15].width + \"px\",\r\n                height: this.state.p2.blocks[15].height + \"px\",\r\n                top: this.state.p2.blocks[15].top + \"px\",\r\n                left: this.state.p2.blocks[15].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[16].color,\r\n                width: this.state.p2.blocks[16].width + \"px\",\r\n                height: this.state.p2.blocks[16].height + \"px\",\r\n                top: this.state.p2.blocks[16].top + \"px\",\r\n                left: this.state.p2.blocks[16].left + \"px\"\r\n              }}\r\n            />\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                backgroundColor: this.state.p2.blocks[17].color,\r\n                width: this.state.p2.blocks[17].width + \"px\",\r\n                height: this.state.p2.blocks[17].height + \"px\",\r\n                top: this.state.p2.blocks[17].top + \"px\",\r\n                left: this.state.p2.blocks[17].left + \"px\"\r\n              }}\r\n            />\r\n            {/* <div className=\"Enemy\"\r\n          style={{\r\n            position: \"relative\",\r\n            backgroundColor: \"white\",\r\n            width: paddleWidth + \"px\",\r\n            height: paddleHeight + \"px\"\r\n          }}\r\n        /> */}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","export var character = {\r\n  magician: {\r\n    hp: 100,\r\n    attack_damage: 10,\r\n    defense: 0.2,\r\n    speed: 10\r\n  }\r\n};\r\nexport var characterList = [\"magician\", \"warrior\"];\r\n","import GameComponent from \"../../GameComponent.js\";\r\nimport React from \"react\";\r\nimport UserApi from \"../../UserApi.js\";\r\nimport \"./fight.css\";\r\nimport P5Wrapper from \"react-p5-wrapper\";\r\nimport sketchFactory from \"./sketch.js\";\r\nimport { character } from \"./character.js\";\r\n\r\nexport default class fight extends GameComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      p1: {\r\n        characterType: \"magician\",\r\n        playerLocation: {\r\n          x: 50,\r\n          y: 520\r\n        },\r\n        playerAction: {\r\n          left: false,\r\n          right: false,\r\n          jump: false,\r\n          basic_attack: false,\r\n          ability_1: false,\r\n          ability_2: false,\r\n          ability_3: false,\r\n          facing: \"right\"\r\n        }\r\n      },\r\n      p2: {\r\n        characterType: \"magician\",\r\n        playerLocation: {\r\n          x: 960,\r\n          y: 520\r\n        },\r\n        playerAction: {\r\n          left: false,\r\n          right: false,\r\n          jump: false,\r\n          basic_attack: false,\r\n          ability_1: false,\r\n          ability_2: false,\r\n          ability_3: false,\r\n          facing: \"left\"\r\n        }\r\n      },\r\n      sketch: sketchFactory(\r\n        () => this.updateFirebase(),\r\n        () => this.getState(),\r\n        () => this.getMyUser(),\r\n        () => this.identifyCharacter()\r\n      )\r\n    };\r\n\r\n    this.getSessionDatabaseRef().set({\r\n      p1: {\r\n        characterType: \"magician\",\r\n        playerLocation: {\r\n          x: 50,\r\n          y: 520\r\n        },\r\n        playerAction: {\r\n          basic_attack: false,\r\n          ability_1: false,\r\n          ability_2: false,\r\n          ability_3: false,\r\n          facing: 1\r\n        }\r\n      },\r\n      p2: {\r\n        characterType: \"magician\",\r\n        playerLocation: {\r\n          x: 960,\r\n          y: 520\r\n        },\r\n        playerAction: {\r\n          basic_attack: false,\r\n          ability_1: false,\r\n          ability_2: false,\r\n          ability_3: false,\r\n          facing: -1\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  getState() {\r\n    return this.state;\r\n  }\r\n\r\n  identifyCharacter() {\r\n    let char;\r\n    if (this.getMyUser() === \"player 1\") {\r\n      char = this.state.p1.characterType;\r\n    }\r\n    if (this.getMyUser() === \"player 2\") {\r\n      char = this.state.p2.characterType;\r\n    }\r\n    return character[char];\r\n  }\r\n\r\n  onSessionDataChanged(data) {\r\n    this.setState(data);\r\n  }\r\n\r\n  handleButtonClick() {\r\n    this.getSessionDatabaseRef().set({\r\n      user_id: UserApi.getName(this.getMyUserId())\r\n    });\r\n  }\r\n\r\n  getMyUser() {\r\n    if (this.getMyUserId() === this.getSessionCreatorUserId()) {\r\n      return \"player 1\";\r\n    } else {\r\n      return \"player 2\";\r\n    }\r\n  }\r\n\r\n  updateFirebase() {\r\n    if (this.getMyUser() === \"player 1\") {\r\n      this.getSessionDatabaseRef()\r\n        .child(\"p1\")\r\n        .update({\r\n          playerLocation: playerLocation,\r\n          playerAction: playerAction\r\n        });\r\n    }\r\n    if (this.getMyUser() === \"player 2\") {\r\n      this.getSessionDatabaseRef()\r\n        .child(\"p2\")\r\n        .update({\r\n          playerLocation: playerLocation,\r\n          playerAction: playerAction\r\n        });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    //Identify the Users\r\n    var id = this.getSessionId();\r\n    var users = this.getSessionUserIds().map(user_id => (\r\n      <li key={user_id}>\r\n        <img alt=\"\" key={user_id} src={UserApi.getPhotoUrl(user_id)} height=\"50px\" />\r\n        {UserApi.getName(user_id)}\r\n      </li>\r\n    ));\r\n    var creator = UserApi.getName(this.getSessionCreatorUserId());\r\n    var identity;\r\n    if (this.getMyUserId() === this.getSessionCreatorUserId()) {\r\n      identity = \"host\";\r\n    } else {\r\n      identity = \"guest\";\r\n    }\r\n    if (true) {\r\n      return (\r\n        <div>\r\n          {/* <canvas ref=\"game\" /> */}\r\n          <P5Wrapper sketch={this.state.sketch} />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <div id=\"logInPage\">\r\n            <p>Session ID: {id}</p>\r\n            <p>Session creator: {creator}</p>\r\n            <p>Session users:</p>\r\n            <ul>{users} </ul>\r\n            <p>I am the {identity}!</p>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport var playerAction = {\r\n  basic_attack: false,\r\n  ability_1: false,\r\n  ability_2: false,\r\n  ability_3: false,\r\n  facing: \"\"\r\n};\r\n\r\nexport var playerLocation = {\r\n  x: 0,\r\n  y: 0\r\n};\r\n","import { playerAction, playerLocation } from \"./fight.js\";\r\nimport { character } from \"./character.js\";\r\n\r\nexport default function sketchFactory(\r\n  updateFirebase,\r\n  data,\r\n  getMyUser,\r\n  thisCharacter\r\n) {\r\n  return function sketch(p) {\r\n    var p1;\r\n    var p2;\r\n    var magicianPic = {\r\n      normal: \"\",\r\n      mirrored: \"\"\r\n    };\r\n    var MagicBall = [];\r\n    var frameRate = 60;\r\n    var gameOver = false;\r\n\r\n    p.preload = () => {\r\n      magicianPic.normal = p.loadImage(\r\n        \"/games/fight/whole.jpg\"\r\n      );\r\n      magicianPic.mirrored = p.loadImage(\r\n        \"/games/fight/whole-mirror.jpg\"\r\n      );\r\n    };\r\n\r\n    p.setup = () => {\r\n      p.createCanvas(1080, 720);\r\n      p.noStroke();\r\n      p.frameRate(frameRate);\r\n      p.setupPlayerLocation();\r\n      if (data().p1.characterType === \"magician\") {\r\n        p1 = new p.Magician(\r\n          data().p1.playerLocation.x,\r\n          data().p1.playerLocation.y\r\n        );\r\n      } else if (data().p1.characterType === \"warrior\") {\r\n        p1 = new p.Warrior(\r\n          data().p1.playerLocation.x,\r\n          data().p1.playerLocation.y\r\n        );\r\n      }\r\n      if (data().p2.characterType === \"magician\") {\r\n        p2 = new p.Magician(\r\n          data().p2.playerLocation.x,\r\n          data().p2.playerLocation.y\r\n        );\r\n      } else if (data().p2.characterType === \"warrior\") {\r\n        p1 = new p.Warrior(\r\n          data().p2.playerLocation.x,\r\n          data().p2.playerLocation.y\r\n        );\r\n      }\r\n      console.log();\r\n    };\r\n\r\n    p.draw = () => {\r\n      p.background(0);\r\n      p.checkingAction();\r\n      p1.x = data().p1.playerLocation.x;\r\n      p1.facing = data().p1.playerAction.facing;\r\n      p1.display();\r\n      p2.x = data().p2.playerLocation.x;\r\n      p2.facing = data().p2.playerAction.facing;\r\n      p2.display();\r\n      p.keyPressed();\r\n      p.displayMagicBall();\r\n      p.displayHealth();\r\n      p.gameOver();\r\n    };\r\n\r\n    p.setupPlayerLocation = () => {\r\n      if (getMyUser() === \"player 1\") {\r\n        console.log(getMyUser());\r\n        playerLocation.x = data().p1.playerLocation.x;\r\n        playerLocation.y = data().p1.playerLocation.y;\r\n      }\r\n      if (getMyUser() === \"player 2\") {\r\n        console.log(getMyUser());\r\n        playerLocation.x = data().p2.playerLocation.x;\r\n        playerLocation.y = data().p2.playerLocation.y;\r\n      }\r\n      console.log(playerLocation);\r\n    };\r\n\r\n    p.Magician = function(x, y) {\r\n      this.x = x;\r\n      this.y = y;\r\n      this.hp = character.magician.hp;\r\n      this.full_hp = character.magician.hp;\r\n      this.attack_damage = character.magician.attack_damage;\r\n      this.defense = character.magician.defense;\r\n      this.speed = character.magician.speed;\r\n      this.basic_attack_disabled = false;\r\n      this.facing = \"right\";\r\n      this.disabled_timer = {\r\n        basic_attack: frameRate\r\n      };\r\n\r\n      this.update = function() {\r\n        if (this.disabled_timer.basic_attack) {\r\n          console.log(\"Basic Attack Is Disabled\");\r\n        }\r\n      };\r\n\r\n      this.display = function() {\r\n        //character\r\n        // p.fill(255);\r\n        // p.rect(this.x, this.y, 70, 200);\r\n        if (this.facing === \"left\") {\r\n          p.image(magicianPic.mirrored, this.x, this.y, 200, 200);\r\n        } else {\r\n          p.image(magicianPic.normal, this.x, this.y, 200, 200);\r\n        }\r\n      };\r\n\r\n      this.action = function(enemy, action, facing) {\r\n        this.enemy = enemy;\r\n        if (action === \"basic_attack\") {\r\n          if (!this.basic_attack_disabled) {\r\n            console.log(\"basic attcak!\");\r\n            MagicBall.push(\r\n              new p.MagicBall(\r\n                this.enemy,\r\n                this.x,\r\n                this.y,\r\n                facing,\r\n                this.attack_damage\r\n              )\r\n            );\r\n            console.log(this.enemy, this.x, this.y, facing);\r\n          }\r\n        }\r\n      };\r\n\r\n      this.damaged = function(damage) {\r\n        if (this.hp > 0) {\r\n          this.hp -= damage - damage * this.defense;\r\n        }\r\n        if (this.hp <= 0) {\r\n          this.hp = 0;\r\n          this.dies();\r\n        }\r\n      };\r\n\r\n      this.dies = function() {\r\n        gameOver = true;\r\n      };\r\n    };\r\n\r\n    p.MagicBall = function(enemy, x, y, facing, damage) {\r\n      this.x = x;\r\n      this.y = y + (720 - y) / 2;\r\n      this.radius = 80;\r\n      this.disappear_after = frameRate * 1.5;\r\n      this.speed = 20;\r\n      this.enemy = enemy;\r\n\r\n      console.log(this.enemy);\r\n      this.display = function() {\r\n        this.update();\r\n        p.fill(153, 102, 255);\r\n        p.arc(this.x, this.y, this.radius, this.radius, 0, Math.PI * 2);\r\n      };\r\n\r\n      this.update = function() {\r\n        if (facing === \"right\") {\r\n          this.x += this.speed;\r\n        }\r\n        if (facing === \"left\") {\r\n          this.x -= this.speed;\r\n        }\r\n        this.disappear_after--;\r\n        this.collision();\r\n      };\r\n\r\n      this.collision = function() {\r\n        if (\r\n          this.x + this.radius >= this.enemy.x &&\r\n          this.x - this.radius <= this.enemy.x\r\n        ) {\r\n          console.log(\"hits enemy\");\r\n          enemy.damaged(damage);\r\n          this.disappear_after = 0;\r\n        }\r\n      };\r\n    };\r\n\r\n    p.displayMagicBall = function() {\r\n      for (var i = 0; i < MagicBall.length; i++) {\r\n        MagicBall[i].display();\r\n        if (MagicBall[i].disappear_after <= 1) {\r\n          MagicBall.splice(i, 1);\r\n          console.log(MagicBall);\r\n        }\r\n      }\r\n    };\r\n\r\n    p.keyPressed = function() {\r\n      playerAction.basic_attack = false;\r\n      playerAction.ability_1 = false;\r\n      playerAction.ability_2 = false;\r\n      playerAction.ability_3 = false;\r\n\r\n      if (p.keyIsDown(65)) {\r\n        if (playerLocation.x > 0) {\r\n          playerLocation.x -= thisCharacter().speed;\r\n          playerAction.facing = \"left\";\r\n        }\r\n        console.log(data().p1.playerLocation.x, data().p1.playerAction.facing);\r\n      }\r\n      if (p.keyIsDown(68)) {\r\n        if (playerLocation.x < 1080) {\r\n          playerLocation.x += thisCharacter().speed;\r\n          playerAction.facing = \"right\";\r\n        }\r\n        console.log(data().p1.playerLocation.x, data().p1.playerAction.facing);\r\n      }\r\n      if (p.keyIsDown(75)) {\r\n        playerLocation.y -= 10;\r\n      }\r\n      if (p.keyIsDown(74)) {\r\n        playerAction.basic_attack = true;\r\n      }\r\n      if (p.keyIsDown(85)) {\r\n        playerAction.ability_1 = true;\r\n      }\r\n      updateFirebase();\r\n    };\r\n\r\n    p.checkingAction = function() {\r\n      if (data().p1.playerAction.basic_attack === true) {\r\n        p1.action(p2, \"basic_attack\", data().p1.playerAction.facing);\r\n      }\r\n\r\n      if (data().p2.playerAction.basic_attack === true) {\r\n        p2.action(p1, \"basic_attack\", data().p2.playerAction.facing);\r\n      }\r\n    };\r\n\r\n    p.checkLocation = function() {\r\n      console.log(data().p1.playerLocation.x);\r\n    };\r\n\r\n    p.displayHealth = function() {\r\n      var health_bar = {\r\n        p1: {\r\n          xPos: 10,\r\n          yPos: 10,\r\n          width: 400,\r\n          height: 100\r\n        },\r\n        p2: {\r\n          xPos: 670,\r\n          yPos: 10,\r\n          width: 400,\r\n          height: 100\r\n        }\r\n      };\r\n      // p1 Health Bar Background\r\n      p.stroke(255);\r\n      p.fill(50);\r\n      p.rect(\r\n        health_bar.p1.xPos,\r\n        health_bar.p1.yPos,\r\n        health_bar.p1.width,\r\n        health_bar.p1.height\r\n      );\r\n      // p1 Health Bar\r\n      p.noStroke();\r\n      p.fill(102, 255, 102);\r\n      p.rect(\r\n        health_bar.p1.xPos,\r\n        health_bar.p1.yPos,\r\n        health_bar.p1.width * (p1.hp / p1.full_hp),\r\n        health_bar.p1.height\r\n      );\r\n      // p1 Health Bar Text\r\n      p.noStroke();\r\n      p.textSize(80);\r\n      p.fill(0);\r\n      p.text(\r\n        p1.hp + \" / \" + p1.full_hp,\r\n        health_bar.p1.xPos,\r\n        health_bar.p1.yPos + health_bar.p1.height - 10\r\n      );\r\n\r\n      // p2 Health Bar Background\r\n      p.stroke(255);\r\n      p.fill(50);\r\n      p.rect(\r\n        health_bar.p2.xPos,\r\n        health_bar.p2.yPos,\r\n        health_bar.p2.width,\r\n        health_bar.p2.height\r\n      );\r\n      // p2 Health Bar\r\n      p.noStroke();\r\n      p.fill(102, 255, 102);\r\n      p.rect(\r\n        health_bar.p2.xPos,\r\n        health_bar.p2.yPos,\r\n        health_bar.p2.width * (p2.hp / p2.full_hp),\r\n        health_bar.p2.height\r\n      );\r\n      // p1 Health Bar Text\r\n      p.noStroke();\r\n      p.textSize(80);\r\n      p.fill(0);\r\n      p.text(\r\n        p2.hp + \" / \" + p2.full_hp,\r\n        health_bar.p2.xPos,\r\n        health_bar.p2.yPos + health_bar.p2.height - 10\r\n      );\r\n    };\r\n\r\n    p.gameOver = function() {\r\n      if (gameOver) {\r\n        p.background(0);\r\n        p.fill(255);\r\n        p.textSize(80);\r\n        if (p1.hp > p2.hp) {\r\n          p.text(\"Player 1 has won the game!\", 20, 400);\r\n        }\r\n        if (p2.hp > p1.hp) {\r\n          p.text(\"Player 2 has won the game!\", 20, 400);\r\n        }\r\n        if (p1.hp === p2.hp) {\r\n          p.text(\"Tie!\", 20, 400);\r\n        }\r\n      }\r\n    };\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\nimport RaisedButton from 'material-ui/RaisedButton';\r\nimport firebase from 'firebase';\r\n\r\nfunction shuffle(a) {\r\n  var j, x, i;\r\n  for (i = a.length - 1; i > 0; i--) {\r\n    j = Math.floor(Math.random() * (i + 1));\r\n    x = a[i];\r\n    a[i] = a[j];\r\n    a[j] = x;\r\n  }\r\n  return a;\r\n}\r\n\r\nexport default class uno extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    var allCards = [];\r\n    var suits = [\"H\", \"C\", \"S\", \"D\"];\r\n    var values = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13];\r\n    for (var v = 0; v < values.length; v++) {\r\n      for (var s = 0; s < suits.length; s++) {\r\n        allCards.push([values[v], suits[s]]);\r\n\r\n      }\r\n    }\r\n\r\n    allCards = shuffle(allCards);\r\n    // console.log(allCards[0][0])\r\n    var leftSide = allCards.splice(0, 26);\r\n    var rightSide = allCards.splice(0, 26);\r\n    this.state = {\r\n      readyplayer1: false,\r\n      readyplayer2: false,\r\n      stack1: leftSide,\r\n      stack2: rightSide,\r\n      pile1: [],\r\n      pile2: [],\r\n      winner: null,\r\n    };\r\n    var id = this.props.match.params.id;\r\n    var sessionDatabaseRef = firebase.database().ref(\"/session/\" + id);\r\n    this.readyplayer1 = sessionDatabaseRef.child('readyplayer1');\r\n    this.readyplayer2 = sessionDatabaseRef.child('readyplayer2');\r\n    this.stack1 = sessionDatabaseRef.child('stack1');\r\n    this.stack2 = sessionDatabaseRef.child('stack2');\r\n    this.pile1 = sessionDatabaseRef.child('pile1');\r\n    this.pile2 = sessionDatabaseRef.child('pile2');\r\n    this.winner = sessionDatabaseRef.child('winner');\r\n    this.isCreator = firebase.auth().currentUser.uid === props.location.state.creator;\r\n  }\r\n  componentWillMount() {\r\n    this.setState({ isNextRoundButtonDisabled: true });\r\n    this.readyplayer1.set(this.state.readyplayer1);\r\n    this.readyplayer1.on('value', s => {\r\n      let v = s.val();\r\n      if (v !== null) {\r\n        this.setState({ readyplayer1: v });\r\n        if (this.state.readyplayer1 === true && this.state.readyplayer2 === true) {\r\n          this.setState({ isNextRoundButtonDisabled: false });\r\n        }\r\n        if(this.state.readyplayer1 === false){\r\n          this.setState({ isButtonDisabled: false});\r\n        }\r\n      }\r\n    });\r\n    this.readyplayer2.set(this.state.readyplayer2);\r\n    \r\n    this.readyplayer2.on('value', s => {\r\n      let v = s.val();\r\n      if (v !== null) {\r\n        this.setState({ readyplayer2: v });\r\n        if (this.state.readyplayer1 === true && this.state.readyplayer2 === true) {\r\n          this.setState({ isNextRoundButtonDisabled: false });\r\n        }\r\n        if(this.state.readyplayer2 === false){\r\n          this.setState({ isButtonDisabled: false});\r\n        }\r\n      }\r\n    });\r\n    this.stack1.set(this.state.stack1);\r\n    this.stack1.on('value', s => {\r\n      let v = s.val();\r\n      if (v !== null) {\r\n        this.setState({ stack1: s.val() });\r\n      }\r\n    });\r\n    this.stack2.set(this.state.stack2);\r\n    this.stack2.on('value', s => {\r\n      let v = s.val();\r\n      if (v !== null) {\r\n        this.setState({ stack2: s.val() });\r\n      }\r\n    });\r\n    this.pile1.set(this.state.pile1);\r\n    this.pile1.on('value', s => {\r\n      let v = s.val();\r\n      if (v !== null) {\r\n        this.setState({ pile1: s.val() });\r\n      }\r\n    });\r\n    this.pile2.set(this.state.pile2);\r\n    this.pile2.on('value', s => {\r\n      let v = s.val();\r\n      if (v !== null) {\r\n        this.setState({ pile2: s.val() });\r\n      }\r\n    });\r\n    this.winner.set(this.state.winner);\r\n    this.winner.on('value', s => {\r\n      let v = s.val();\r\n      if (v !== null) {\r\n        this.setState({ winner: s.val() });\r\n      }\r\n    });\r\n  }\r\n\r\n  playCard1() {\r\n    this.playerOneReady();\r\n    this.buttonDisabled();\r\n    var card = this.state.stack1.shift();\r\n    this.stack1.set(this.state.stack1);\r\n    this.state.pile1.push(card);\r\n    this.pile1.set(this.state.pile1);\r\n    console.log(this.state.pile1[0][0]);\r\n    this.checkWinner();\r\n}\r\n    playCard2() {\r\n      this.playerTwoReady();\r\n      this.buttonDisabled();\r\n      var card = this.state.stack2.shift();\r\n      this.stack2.set(this.state.stack2);\r\n      this.state.pile2.push(card);\r\n      this.pile2.set(this.state.pile2);\r\n      this.checkWinner();\r\n    }\r\n\r\n\r\n\r\n    disabledNextRoundButton() {\r\n      this.setState({ isNextRoundButtonDisabled: true });\r\n    }\r\n\r\n    enabledNextRoundButton() {\r\n        this.setState({ isNextRoundButtonDisabled: false });\r\n    }\r\n\r\n    playerOneReady() {\r\n      this.readyplayer1.set(true);\r\n    }\r\n\r\n    playerTwoReady() {\r\n      this.readyplayer2.set(true);\r\n    }\r\n\r\n    checkWinner() {\r\n      if(this.state.pile1[0] != null && this.state.pile2[0] != null){\r\n        if(this.state.pile1[0][0] > this.state.pile2[0][0]){\r\n          this.winner.set(\"P1 Wins\")\r\n          this.state.stack1.push(this.state.pile1)\r\n        } else if(this.state.pile1[0][0] < this.state.pile2[0][0]){\r\n          this.winner.set(\"P2 Wins!\")\r\n        } \r\n      } else {\r\n        console.log(\"no cards\")\r\n      }\r\n    }\r\n\r\n    buttonDisabled() {\r\n      this.setState({ isButtonDisabled: true });\r\n    }\r\n\r\n    nextRound() {\r\n      this.setState({ isButtonDisabled: false });\r\n      this.readyplayer1.set(false);\r\n      this.readyplayer2.set(false);\r\n      this.disabledNextRoundButton();\r\n    }\r\n\r\n    render() {\r\n\r\n      return (\r\n        <div className=\"war\">\r\n        <div>\r\n          <RaisedButton label=\"Player 1 Start\" fullWidth={true} disabled={this.isCreator || this.state.isButtonDisabled || this.state.isbuttonEnabled} onClick={this.playCard1.bind(this)}/>\r\n          <h1 className=\"number\"> {this.state.pile1} </h1>\r\n        </div>\r\n        <div className=\"center\">\r\n          <RaisedButton label=\"Next Round\" fullWidth={false} disabled={this.state.isNextRoundButtonDisabled} onClick={this.nextRound.bind(this)}/> \r\n          <p>{this.state.winner}</p>\r\n        </div>\r\n        <div className=\"playerTwo\">\r\n          <h1 className=\"number\"> {this.state.pile2} </h1>\r\n          <RaisedButton label=\"Player 2 Start\" fullWidth={true} disabled={!this.isCreator || this.state.isButtonDisabled }  onClick={this.playCard2.bind(this)}/>\r\n        </div>\r\n    </div>\r\n      );\r\n    }\r\n  }\r\n","import React from 'react';\r\n\r\nexport default class TopInfo extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"topInfo\">\r\n                <div className=\"topInfoText\">\r\n                    Name: {this.props.name || \"\"}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport TopInfo from \"./TopInfo/TopInfo.js\"\r\n\r\nexport default class LobbyTop extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"lobbyTop\">\r\n                <div className=\"profilePicContainer\">\r\n                    <img className=\"profilePic\" src={this.props.userProfilePic}></img>\r\n                </div>\r\n                <TopInfo name={this.props.username}/>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class LobbyCreateRoomButton extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    onCreateRoomButton(e){\r\n        this.props.onCreateRoomButton(e);\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"lobbyCreateRoom\">\r\n                <div className=\"lobbyCreateRoomButton\" onClick={(e) => this.onCreateRoomButton(e)}>\r\n                    Create New Room\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class LobbyCreateRoomOption extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            roomName: \"Regular Room\",\r\n            maxPlayer: 8,\r\n        };\r\n    }\r\n\r\n    onCreateRoomButton(e){\r\n        this.props.onCreateRoom(this.state.roomName, this.state.maxPlayer);\r\n    }\r\n\r\n    handleRoomNameChange(e){\r\n        this.setState({roomName: e.target.value});\r\n    }\r\n\r\n    handlePlayerChange(e){\r\n        this.setState({maxPlayer: parseInt(e.target.value) || 0});\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"lobbyCreateRoomOption\">\r\n                <div className=\"createRoomRow\">\r\n                    <div className=\"optionName\">Room Name: </div>\r\n                    <textarea className=\"inputBox\" onChange={(e) => this.handleRoomNameChange(e)} value={this.state.roomName}></textarea>\r\n                </div>\r\n                <div className=\"createRoomRow\">\r\n                    <div className=\"optionName\">Max Player: </div>\r\n                    <textarea className=\"inputBox\" onChange={(e) => this.handlePlayerChange(e)} value={this.state.maxPlayer}></textarea>\r\n                </div>\r\n                <div className=\"createRoomRow createRoomButtonRow\">\r\n                    <div className=\"createRoomButton\" onClick={(e) => this.onCreateRoomButton(e)}>Create ROom</div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class LobbyRoomList extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    onRoomJoinClick(e, room){\r\n        this.props.onRoomJoin(room);\r\n    }\r\n\r\n    render(){\r\n        let list = this.props.roomList;\r\n        let roomJSX = [];\r\n        for (let thekey in list){\r\n            let room = list[thekey];\r\n            //dont append in game rooms\r\n            if (room.inGame){\r\n                continue;\r\n            }\r\n            roomJSX.push(\r\n            <div className=\"roomListContent\" key={room.id + \"container\"}>\r\n                <div className=\"roomListName\" key={room.id + \"name\"}>{room.name}</div>\r\n                <div className=\"roomListPlayer\" key={room.id + \"number\"}>{`Player: ${room.userList.length}/${room.maxPlayer}`}</div>\r\n                <div className=\"roomListJoin\" key={room.id + \"join\"} onClick={(e) => this.onRoomJoinClick(e, room)}>{room.userList.length === room.maxPlayer ? \"Full\" : \"Join\"}</div>\r\n            </div>);\r\n        }\r\n        //if empty\r\n        if (roomJSX.length === 0){\r\n            roomJSX.push(\r\n                <div className=\"roomListSadness\" key=\"noroom\">Currently no room! -.-</div>\r\n            )\r\n        }\r\n        return (\r\n            <div className=\"lobbyRoomList\">\r\n                {roomJSX}\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class LobbyRoom extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    onRoomExit(e){\r\n        let room = this.props.roomList[this.props.myself.roomID];\r\n        this.props.onRoomExit(room);\r\n    }\r\n    onStartGame(e){\r\n        let room = this.props.roomList[this.props.myself.roomID];\r\n        this.props.onStartGame(room);\r\n    }\r\n\r\n    render(){\r\n        let room = this.props.roomList[this.props.myself.roomID];\r\n        if (room){\r\n            let playerList = room.userList;\r\n            let myself = this.props.myself;\r\n            //push player list\r\n            let playerJSX = [];\r\n            for (let i = 0; i < playerList.length; i ++){\r\n                let player = playerList[i];\r\n                playerJSX.push(\r\n                    <div className=\"lobbyRoomUser\" key={player.key + \"userinroom\"}>\r\n                        <img className=\"lobbyRoomUserIcon\" key={player.key + \"userinroomIcon\"} src={player.profilePic}/>\r\n                        <div className=\"lobbyRoomUserName\" key={player.key + \"userinroomName\"}>\r\n                            {player.username}\r\n                        </div>\r\n                    </div>\r\n                );\r\n            }\r\n            //push button\r\n            let buttons = [];\r\n            if (room.creatorKey === myself.key){\r\n                buttons.push(<div className=\"lobbyRoomStart lobbyRoomButton\" key=\"lobbyRoomStart\" onClick={(e) => this.onStartGame(e)}>Start Game</div>);\r\n                buttons.push(<div className=\"lobbyRoomBack lobbyRoomButton\" key=\"lobbyRoomBack\" onClick={(e) => this.onRoomExit(e)}>Remove Room</div>);\r\n            }else{\r\n                buttons.push(<div className=\"lobbyRoomBack lobbyRoomButton\" key=\"lobbyRoomExit\" onClick={(e) => this.onRoomExit(e)}>Exit Room</div>);\r\n            }\r\n            return (\r\n                <div className=\"lobbyRoom\">\r\n                    <div className=\"lobbyRoomName\">{room.name}</div>\r\n                    <div className=\"lobbyRoomUserContainer\">\r\n                        {playerJSX}\r\n                    </div>\r\n                    <div className=\"lobbyRoomButtonContainer\">\r\n                        {buttons}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }else{\r\n            console.log(\"???\")\r\n        }\r\n    }\r\n}","import React from 'react';\r\nimport LobbyCreateRoomButton from \"./LobbyCreateRoomButton/LobbyCreateRoomButton\";\r\nimport LobbyCreateRoomOption from \"./LobbyCreateRoomOption/LobbyCreateRoomOption\";\r\nimport LobbyRoomList from \"./LobbyRoomList/LobbyRoomList\";\r\nimport LobbyRoom from \"./LobbyRoom/LobbyRoom\"\r\n\r\nexport default class LobbyBot extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            //showing, 1: roomList  2: Create Room option\r\n            showing: 1,\r\n        };\r\n    }\r\n\r\n    onCreateRoom(name, max){\r\n        this.props.onCreateRoom(name, max);\r\n    }\r\n\r\n    onCreateRoomButton(e){\r\n        this.setState({showing: (this.state.showing + 1) % 2});\r\n    }\r\n\r\n    render(){\r\n        let bottomContent;\r\n        if (this.state.showing === 1){\r\n            bottomContent = <LobbyRoomList roomList={this.props.roomList} onRoomJoin={(room) => this.props.onRoomJoin(room)}/>;\r\n        }else{\r\n            bottomContent = <LobbyCreateRoomOption onCreateRoom={(name, max) => this.onCreateRoom(name, max)} />;\r\n        }\r\n        if (this.props.location === \"room\"){\r\n            return (\r\n                <div className=\"lobbyBot\">\r\n                    <LobbyRoom \r\n                    onRoomExit={(room) => this.props.onRoomExit(room)}\r\n                    onStartGame={(room) => this.props.onStartGame(room)}\r\n                    roomList={this.props.roomList}\r\n                    myself={this.props.myself}/>\r\n                </div>\r\n            );\r\n        }else{\r\n            return (\r\n                <div className=\"lobbyBot\">\r\n                    <LobbyCreateRoomButton onCreateRoomButton={(e) => this.onCreateRoomButton(e)} currentShowing={this.state.showing}/>\r\n                    <div className=\"lobbyBotBot\">\r\n                        {bottomContent}\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class LobbyChat extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            inputValue: \"\",\r\n            currentTab: \"lobbyChat\"\r\n        };\r\n    }\r\n\r\n    handleInputChange(event){\r\n        this.setState({inputValue: event.target.value});\r\n    }\r\n\r\n    handleButtonClick(event){\r\n        console.log(this.state.inputValue);\r\n        this.props.sendMessage(this.state.inputValue, this.state.currentTab);\r\n        this.setState({inputValue: \"\"});\r\n    }\r\n\r\n    handleTabClick(event, tabName){\r\n        console.log(tabName);\r\n        this.setState({\r\n            currentTab: tabName\r\n        })\r\n    }\r\n\r\n    render(){\r\n        let chatList = this.props.chatList;\r\n        //append tabs\r\n        let tabsJSX = [];\r\n        for (let key in chatList){\r\n            let style = {};\r\n            if (key !== this.state.currentTab){\r\n                style[\"borderBottom\"] = \"solid 5px\";\r\n            }\r\n            tabsJSX.push(\r\n            <div className=\"lobbyChatTab\" key={key + \"ChatTab\"} style={style} onClick={(e) => this.handleTabClick(e, key)}>\r\n                {key.replace(\"Chat\", \"\")}\r\n            </div>);\r\n        }\r\n        //append useless filler\r\n        for (let i = tabsJSX.length; i < 5; i ++){\r\n            tabsJSX.push(\r\n                <div className=\"lobbyChatTabFiller\" key={`filler${i}`}></div>\r\n            );\r\n        }\r\n        //append chats\r\n        let currentTab = this.state.currentTab\r\n        let currentChat = chatList[currentTab];\r\n        let displayChat = [];\r\n        for (let key in currentChat){\r\n            let picture = currentChat[key].picture;\r\n            let message = currentChat[key].message;\r\n            let username = currentChat[key].username;\r\n            displayChat.unshift(\r\n                <div key={key} className=\"chatContent\">\r\n                    <img className=\"chatPicture\" src={picture}></img>\r\n                    <div className=\"chatMessageContainer\">\r\n                        <div className=\"chatUsername\">{username}</div>\r\n                        <div className=\"chatMessage\">{message}</div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n        return (\r\n            <div className=\"lobbyChat\">\r\n                <div className=\"lobbyChatTitle\">Chat</div>\r\n                <div className=\"lobbyChatTabs\">\r\n                    {tabsJSX}\r\n                </div>\r\n                <div className=\"lobbyChatMessages\">\r\n                    {displayChat}\r\n                </div>\r\n                <div className=\"lobbyChatForm\">\r\n                    <div className=\"lobbyChatInput\">\r\n                        <textarea className=\"inputBox\" onChange={(e) => this.handleInputChange(e)} value={this.state.inputValue}></textarea>\r\n                    </div>\r\n                    <div className=\"lobbyChatSubmit\">\r\n                        <button className=\"sendButton\" onClick={(e) => this.handleButtonClick(e)}>Send</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class GameMid extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    exitGame(){\r\n        this.props.exitGame();\r\n    }\r\n\r\n    render(){\r\n        let JSX;\r\n        if (this.props.isDead){\r\n            JSX = (\r\n                <div className=\"gameDead\">You have been killed! But you can still spectate the game</div>\r\n            );\r\n        }\r\n        let endGameJSX;\r\n        if (this.props.showButton){\r\n            endGameJSX = (\r\n                <div className=\"gameExitGame\">\r\n                    <div className=\"gameExitGameButton\" onClick={() => this.exitGame()}>Exit Game</div>\r\n                </div>\r\n            );\r\n        }\r\n        return (\r\n            <div className=\"gameMid\">\r\n                <div className=\"gameJudge\">\r\n                    {this.props.text}\r\n                    {JSX}\r\n                </div>\r\n                {endGameJSX}\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport \"./Game.css\"\r\nimport GameMid from \"./GameMid/GameMid\"\r\nimport CrossImg from\"./cross.png\"\r\n\r\nexport default class Game extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            guess: new Array(this.props.game.userList.length).fill(\"?\"),\r\n            currentIndex: undefined,\r\n            showing: false,\r\n            selecting: undefined,\r\n            isDead: false,\r\n        }\r\n    }\r\n\r\n    handleGuessClick(event, index){\r\n        event.stopPropagation();\r\n        let showing = this.state.showing;\r\n        if (this.props.me.place === index){\r\n            return;\r\n        }\r\n        if (showing === false){\r\n            //show clicked stuff\r\n            this.setState({\r\n                showing: true,\r\n                currentIndex: index\r\n            });\r\n        }else if (showing === true && this.state.currentIndex === index){\r\n            //hide clicked stuff\r\n            this.setState({showing: false});\r\n        }else{\r\n            //change stuff\r\n            this.setState({currentIndex: index});\r\n        }\r\n    }\r\n\r\n    handlePickClick(event, thing){\r\n        let index = this.state.currentIndex;\r\n        let guess = this.state.guess;\r\n        guess[index] = thing;\r\n        this.setState({\r\n            showing: false,\r\n            guess: guess\r\n        });\r\n    }\r\n\r\n    handleUserClick(event, index){\r\n        let me = this.props.me;\r\n        let game = this.props.game;\r\n        //check if in game\r\n        if (game){\r\n            //check if u are called\r\n            if (game.commandList[me.key]){\r\n                let command = game.commandList[me.key];\r\n                if (command.type === \"any\"){\r\n                    this.props.handleUserClick(index);\r\n                    this.setState({selecting: index});\r\n                }else if (command.type === \"other\"){\r\n                    //check if index is self\r\n                    if (game.userList[index].key !== me.key){\r\n                        this.props.handleUserClick(index);\r\n                        this.setState({selecting: index});\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        let me = this.props.me;\r\n        let game = this.props.game;\r\n        //remove selecting when not selecting\r\n        if (game){\r\n            //check if u are not called\r\n            if (!game.commandList[me.key]){\r\n                //remove selecting\r\n                if (Number.isInteger(this.state.selecting)){\r\n                    this.setState({selecting: undefined});\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    render(){\r\n        let topJSX = [];\r\n        let rightJSX = [];\r\n        let botJSX = [];\r\n        let leftJSX = [];\r\n        //append\r\n        let me = this.props.me;\r\n        let game = this.props.game;\r\n        let userList = game.userList;\r\n        let extraPeopleTable = userList.length % 4 - 1;\r\n        let peopleCount = Math.floor(userList.length / 4);\r\n        let tableIndex = 0;\r\n        let currentPeople = 0;\r\n        for (let i = 0; i < userList.length; i ++){\r\n            //need extra\r\n            let extra = 0;\r\n            if (extraPeopleTable >= tableIndex){\r\n                extra = 1;\r\n            }\r\n            //check if exceeding\r\n            if (currentPeople >= peopleCount + extra){\r\n                tableIndex ++;\r\n                currentPeople = 0;\r\n            }\r\n            let target;\r\n            switch (tableIndex) {\r\n                case 0:\r\n                    target = topJSX;\r\n                    break;\r\n                case 1:\r\n                    target = rightJSX;\r\n                    break;\r\n                case 2:\r\n                    target = botJSX;\r\n                    break;\r\n                case 3:\r\n                    target = leftJSX;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            let user = userList[i];\r\n            let isColumn = \"\";\r\n            if (tableIndex % 2 === 1){\r\n                isColumn = \"gameUserContainerColumn\";\r\n            }\r\n            let style = {};\r\n            let role = this.state.guess[i];\r\n            if (user.key === me.key){\r\n                style.background = \"rgb(0, 255, 106)\";\r\n                role = me.role;\r\n            }\r\n            //if werewolf\r\n            if (me.role === \"werewolf\"){\r\n                //see all other werewolf\r\n                if (user.role === \"werewolf\"){\r\n                    role = \"werewolf\";\r\n                }\r\n            }\r\n            //if investigator\r\n            if (me.role === \"investigator\"){\r\n                if (game.investResult){\r\n                    game.judge = game.investResult;\r\n                }\r\n            }\r\n            //if selecting\r\n            let containerStyle = {\r\n                border: \"0px\",\r\n                backgroundImage: \"\"\r\n            };\r\n            if (i === this.state.selecting){\r\n                containerStyle.border = \"solid 5px yellow\";\r\n            }\r\n            //if dead\r\n            if (user.isDead){\r\n                containerStyle[\"backgroundImage\"] = `url(${CrossImg})`;\r\n            }\r\n            target.push(\r\n                <div style={containerStyle} className={\"gameUserContainer \" + isColumn} key={\"gameUserContainer\" + i} onClick={(e) => this.handleUserClick(e, i)}>\r\n                    <div style={style} className=\"gameUserPosition\" key={\"gameUserPosition\" + i}>{i + 1}</div>\r\n                    <div className=\"gameUserGuess\" index={i} key={\"gameUserGuess\" + i} onClick={(e) => this.handleGuessClick(e, i)}>{role}</div>\r\n                    <img className=\"gameUserPic\" src={user.profilePic} key={\"gameUserPic\" + i}/>\r\n                    <div className=\"gameUserName\" key={\"gameUserName\" + i}>{user.username}</div>\r\n                </div>\r\n            );\r\n            currentPeople ++;\r\n        }\r\n        //setting box\r\n        let guessJSX;\r\n        if (this.state.showing){\r\n            guessJSX = (<div className=\"gameUserPicker\">\r\n                <div className=\"gamePick\" onClick={(e) => this.handlePickClick(e, \"√\")}>√</div>\r\n                <div className=\"gamePick\" onClick={(e) => this.handlePickClick(e, \"X\")}>X</div>\r\n                <div className=\"gamePick\" onClick={(e) => this.handlePickClick(e, \"?\")}>?</div>\r\n            </div>);\r\n        }\r\n        return (\r\n            <div className=\"gameDiv\">\r\n                {guessJSX}\r\n                <div className=\"gameColumn1\">\r\n                    {leftJSX}\r\n                </div>\r\n                <div className=\"gameColumn2\">\r\n                    <div className=\"gameTopContainer\">\r\n                        {topJSX}\r\n                    </div>\r\n                    <GameMid text={game.judge} isDead={this.props.isDead} showButton={game.end} exitGame={() => this.props.exitGame()}/>\r\n                    <div className=\"gameBotContainer\">\r\n                        {botJSX}\r\n                    </div>\r\n                </div>\r\n                <div className=\"gameColumn3\">\r\n                    {rightJSX}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport \"./Lobby.css\"\r\n//components\r\nimport LobbyTop from \"./LobbyTop/LobbyTop.js\"\r\nimport LobbyBot from \"./LobbyBot/LobbyBot.js\"\r\nimport LobbyChat from \"./LobbyChat/LobbyChat.js\"\r\nimport Game from \"./Game/Game\"\r\n\r\nexport default class Lobby extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    receiveChatMessage(message, tabName){\r\n        console.log(\"Lobby received: \" + message);\r\n        this.props.sendMessage(message, tabName);\r\n    }\r\n\r\n    onCreateRoom(name, max){\r\n        this.props.onCreateRoom(name, max);\r\n    }\r\n\r\n    handleUserClick(index){\r\n        let room = this.props.room;\r\n        let me = this.props.myself;\r\n        let game = room.game;\r\n        this.props.updateCommand(game, game.commandList[me.key], index);\r\n    }\r\n\r\n    render(){\r\n        let room = this.props.room;\r\n        let me = this.props.myself;\r\n        //check if in game\r\n        if (room){\r\n            let game = room.game;\r\n            if (game && me.location === \"game\"){\r\n                return (\r\n                    <div className=\"lobby\">\r\n                        <div className=\"lobbyLeft\">\r\n                            <Game game={game} me={me} isDead={me.isDead} handleUserClick={(i) => this.handleUserClick(i)} exitGame={() => this.props.exitGame()}/>\r\n                        </div>\r\n                        <LobbyChat chatList={this.props.chatList} sendMessage={(m, r) => this.receiveChatMessage(m, r)}/>\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n        return (\r\n            <div className=\"lobby\">\r\n                <div className=\"lobbyLeft\">\r\n                    <LobbyTop \r\n                        userProfilePic={this.props.userProfilePic} \r\n                        username={this.props.username}\r\n                    />\r\n                    <LobbyBot \r\n                        location={this.props.location}\r\n                        roomList={this.props.roomList}\r\n                        myself={this.props.myself} \r\n                        onCreateRoom={(name, max) => this.onCreateRoom(name, max)}\r\n                        onRoomJoin={(room) => this.props.onRoomJoin(room)}\r\n                        onRoomExit={(room) => this.props.onRoomExit(room)}\r\n                        onStartGame={(room) => this.props.onStartGame(room)}\r\n                    />\r\n                </div>\r\n                <LobbyChat chatList={this.props.chatList} sendMessage={(m, r) => this.receiveChatMessage(m, r)}/>\r\n            </div>\r\n        )\r\n    }\r\n}","import Avatar from '@material-ui/core/Avatar';\r\nimport GameComponent from '../../GameComponent.js';\r\nimport React from 'react';\r\nimport UserApi from '../../UserApi.js';\r\nimport firebase from 'firebase';\r\nimport { List, ListItem } from 'material-ui/List';\r\nimport \"./Werewolf.css\"\r\n//components\r\nimport Lobby from \"./components/Lobby/Lobby.js\";\r\nimport GameComp from \"./components/Lobby/Game/Game.js\";\r\n\r\nexport default class Werewolf extends GameComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      roomList: {},\r\n      userList: {},\r\n      pulse: null,\r\n      myself: {},\r\n      room: {},\r\n      didGameStarted: false,\r\n    };\r\n    //timer\r\n    this.timer = undefined;\r\n    //execute mounting\r\n    this.onMounted();\r\n  }\r\n\r\n  //virtual server\r\n  async isOnline(userSessionId){\r\n    return await this.firebaseRef.child(\"virtualServer\").child(\"userList\").once(\"value\", (data) => {\r\n      let userList = data.val();\r\n      for (let key in userList){\r\n        let user = userList[key];\r\n        if (user.getId() === userSessionId){\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    });\r\n  }\r\n\r\n  onSessionDataChanged(data) {\r\n    console.log(\"//data changed: \");\r\n    console.log(data);\r\n  }\r\n\r\n  onSessionMetadataChanged(metadata) {\r\n    console.log(\"//metadata changed:\");\r\n    console.log(metadata);\r\n  }\r\n\r\n  //onmount\r\n  componentDidMount(){\r\n    this.beforeunloadFunction = (e) => this.onUnload(e)\r\n    window.addEventListener(\"beforeunload\", this.beforeunloadFunction);\r\n    window.fbReferenceWithHope = this.firebaseRef;\r\n  }\r\n\r\n  onUnload(e){\r\n    this.onDisconnect(this.state.myself);\r\n    e.preventDefault();\r\n  }\r\n\r\n  //unmount\r\n  componentWillUnmount(){\r\n    //remove timer & stuff\r\n    window.removeEventListener(\"beforeunload\", this.beforeunloadFunction);\r\n    clearTimeout(this.timer);\r\n    this.onDisconnect(this.state.myself);\r\n  }\r\n\r\n  //disconnect\r\n  onDisconnect(user){\r\n    console.log(\"unmounted\");\r\n    //remove handlers\r\n    let fb = this.firebaseRef;\r\n    let virtualServer = fb.child(\"virtualServer\");\r\n    //only remove if self disconnecting\r\n    if (user.key === this.state.myself.key){\r\n      virtualServer.child(\"userList\").off();\r\n      virtualServer.child(\"pulse\").off();\r\n      //remove from petition \r\n      virtualServer.child(\"petition\").child(user.key).remove();\r\n      //remove from userList\r\n      virtualServer.child(\"userList\").child(user.key).remove();\r\n      //lobby\r\n      fb.child(\"lobby\").off();\r\n      fb.child(\"lobbyChat\").off();\r\n      //room and game\r\n      fb.child(\"roomList\").off();\r\n    }\r\n    //calling exits on those who should\r\n    if (user.roomID){\r\n      this.onRoomExit(user, this.state.roomList[user.roomID]);\r\n    }\r\n    //check if last user\r\n    if (Object.keys(this.state.userList).length <= 1){\r\n      //reset database\r\n      virtualServer.set({});\r\n      fb.child(\"roomList\").set({});\r\n    }\r\n  }\r\n\r\n  //on mount\r\n  onMounted() {\r\n    console.log(\"LMG mounted and loaded\");\r\n    //connect to \"virtual\" server\r\n    this.firebaseRef = this.getSessionDatabaseRef();\r\n    let fb = this.firebaseRef;\r\n    let virtualServer = fb.child(\"virtualServer\");\r\n    let component = this;\r\n    console.log(fb);\r\n    //send yourself to the virtual server\r\n    let myself = new LocalUser(this.getMyUserId());\r\n    //send yourself to userList\r\n    let userList = virtualServer.child(\"userList\");\r\n    let newRef = userList.push();\r\n    let key = newRef.key;\r\n    myself.key = key;\r\n    myself.location = \"lobby\";\r\n    //set state\r\n    this.state.myself = myself;\r\n    //set new ref\r\n    newRef.set(myself, (e) => {\r\n      if (e) throw e;\r\n      //fetch data\r\n      fb.once(\"value\", (data) => {\r\n        let objData = data.val();\r\n        console.log(objData);\r\n        let userListData = objData.virtualServer.userList;\r\n        let pulse = objData.virtualServer.pulse;\r\n        if (!pulse){\r\n          //set first item of userlist as pulse\r\n          userList.limitToFirst(1).once(\"value\" ,(data) => {\r\n            pulse = Object.keys(data.val())[0];\r\n            console.log(pulse);\r\n            component.setState({\r\n              userList: userListData,\r\n              pulse: pulse\r\n            });\r\n            virtualServer.child(\"pulse\").set(pulse);\r\n          });\r\n        }else{\r\n          //set state\r\n          component.setState({\r\n            userList: userListData,\r\n            pulse: pulse\r\n          });\r\n        }\r\n      });\r\n    });\r\n    //fetch roomlist\r\n    let roomListRef = fb.child(\"roomList\");\r\n    roomListRef.once(\"value\", (data) => {\r\n      if (data){\r\n        //data exist, write into state\r\n        this.state.roomList = data.val();\r\n      }else{\r\n        //data does not exist, create data\r\n        roomListRef.set({}, (e) => {\r\n          if (e) throw e;\r\n        });\r\n      }\r\n    })\r\n    //set handler on new room\r\n    roomListRef.on(\"value\", (snapshot) => {\r\n      let data = snapshot.val();\r\n      this.onRoomListChange(data);\r\n    })\r\n    //fetch lobby\r\n    let lobbyRef = fb.child(\"lobby\");\r\n    lobbyRef.once(\"value\", (data) => {\r\n      if (data){\r\n        //data exist, write into state\r\n        this.state.lobby = data.val();\r\n      }else{\r\n        //data does not exist, create data\r\n        lobbyRef.set({}, (e) => {\r\n          if (e) throw e;\r\n        });\r\n      }\r\n    })\r\n    //set handler on lobby\r\n    lobbyRef.on(\"value\", (snapshot) => {\r\n      let data = snapshot.val();\r\n      this.setState({lobby: data});\r\n    });\r\n    //set handler on lobby chat\r\n    let lobbyChatRef = fb.child(\"lobbyChat\");\r\n    lobbyChatRef.on(\"value\", (snapshot) => {\r\n      let data = snapshot.val();\r\n      this.setState({lobbyChat: data});\r\n    });\r\n    //set handler on new user\r\n    virtualServer.child(\"userList\").on(\"value\", (snapshot) => {\r\n      //update state\r\n      component.setState({userList: snapshot.val()});\r\n      //kickstart pulse\r\n      virtualServer.once(\"value\", (data) => {\r\n        let v = data.val();\r\n        // if (v){\r\n        //   component.nextPulse(v.pulse, userList, virtualServer);\r\n        // }else{\r\n        //   component.nextPulse(v, userList, virtualServer);\r\n        // }\r\n        component.nextPulse(v.pulse, userList, virtualServer);\r\n      })\r\n    });\r\n    //set handler on pulse\r\n    virtualServer.child(\"pulse\").on(\"value\", (snapshot) => {\r\n      //remove existing timer\r\n      clearTimeout(component.timer);\r\n      component.timer = undefined;\r\n      let pulse = snapshot.val();\r\n      component.setState({\r\n        pulse: pulse\r\n      });\r\n      //check if match self id\r\n      if (component.state.myself.key === pulse){\r\n        //move on to next\r\n        component.nextPulse(pulse, userList, virtualServer);\r\n      }else{\r\n        //if not self id\r\n        //try to remove after certain interval\r\n        let timer = setTimeout(() => {\r\n          //time up, petition for removal\r\n          //add petition to user of pulse\r\n          virtualServer.child(\"petition\").child(pulse).update({\r\n            //ur own key as key\r\n            [component.state.myself.key]:true\r\n          }, (e) => {\r\n            if (e) throw e;\r\n            //after finish, fetch # of petition\r\n            virtualServer.once(\"value\" ,(data) => {\r\n              let dataVal = data.val();\r\n              if (typeof dataVal.petition[pulse] !== 'object'){\r\n                //already removed, clean up get home\r\n                return;\r\n              }\r\n              let numOfPetition = Object.keys(dataVal.petition[pulse]).length;\r\n              let userListLength = Object.keys(dataVal.userList).length;\r\n              //if number is bigger than half, remove user\r\n              if (numOfPetition >= Math.floor(userListLength / 2)){\r\n                //move pulse to next\r\n                component.nextPulse(pulse, userList, virtualServer);\r\n                //get user from pulse\r\n                let user = component.state.userList[pulse];\r\n                //call disconnect\r\n                component.onDisconnect(user);\r\n              }\r\n            });\r\n          });\r\n        }, 5000);\r\n        component.timer = timer;\r\n      }\r\n    });\r\n  }\r\n\r\n  async nextPulse(currentPulse, userList, virtualServer){\r\n    let component = this;\r\n    let next;\r\n    if (currentPulse){\r\n      //if currentPulse exist\r\n      await virtualServer.child(\"userList\").orderByKey().startAt(currentPulse).limitToFirst(2).once(\"value\",async (data) => {\r\n        let dataVal = data.val();\r\n        if (dataVal){\r\n          next = Object.keys(dataVal)[1];\r\n        }else{\r\n          //nothing in userList?\r\n          //hacker gg\r\n          console.log(\"nothing in userList?\");\r\n        }\r\n        //if next\r\n        if (next){\r\n          component.setState({\r\n            currentPulse: next\r\n          });\r\n          await virtualServer.child(\"pulse\").set(next);\r\n        }\r\n        //if no next, set first item as pulse\r\n        else{\r\n          await userList.limitToFirst(1).once(\"value\" ,async (data) => {\r\n            currentPulse = Object.keys(data.val())[0];\r\n            console.log(currentPulse);\r\n            component.setState({\r\n              pulse: currentPulse\r\n            });\r\n            await virtualServer.child(\"pulse\").set(currentPulse);\r\n          });\r\n        }\r\n      });\r\n    }else{\r\n      //if currentpulse doesnt exist\r\n      //set first item as pulse\r\n      await userList.limitToFirst(1).once(\"value\" ,async (data) => {\r\n        currentPulse = Object.keys(data.val())[0];\r\n        console.log(currentPulse);\r\n        component.setState({\r\n          pulse: currentPulse\r\n        });\r\n        await virtualServer.child(\"pulse\").set(currentPulse);\r\n      });\r\n    }\r\n  }\r\n\r\n  //update user\r\n  updateUserFirebase(user, snapshot){\r\n    //update userlist\r\n    let data = snapshot.val();\r\n    let fb = this.firebaseRef;\r\n    let userListRef = fb.child(\"virtualServer\").child(\"userList\");\r\n    userListRef.child(user.key).set(user);\r\n    //if in room\r\n    if (user.roomID){\r\n      //get room & update firebase\r\n      let room = data.roomList[user.roomID];\r\n      //update creator\r\n      if (room.creatorKey === user.key){\r\n        fb.child(\"roomList\").child(user.roomID).child(\"creator\").set(user);\r\n      }\r\n      //userlist in room update\r\n      let realUserList = room.userList;\r\n      let index = 0;\r\n      for (let i = 0; i < realUserList.length; i ++){\r\n        if (realUserList[i].key === user.key){\r\n          realUserList[i] = user;\r\n          index = i;\r\n          break;\r\n        }\r\n      }\r\n      fb.child(\"roomList\").child(user.roomID).child(\"userList\").child(index).set(user);\r\n      //userlist in game update\r\n      if (room.inGame){\r\n        let game = room.game;\r\n        let userList = game.userList;\r\n        let aliveList = game.aliveList;\r\n        let deadList = game.deadList;\r\n        let done = false;\r\n        //loop\r\n        userList.forEach((v, i) => {\r\n          if (v.key === user.key){\r\n            fb.child(\"roomList\").child(user.roomID).child(\"game\").child(\"userList\").child(i).set(user);\r\n            return;\r\n          }\r\n        });\r\n        aliveList.forEach((v, i) => {\r\n          if (v.key === user.key){\r\n            done = true;\r\n            fb.child(\"roomList\").child(user.roomID).child(\"game\").child(\"aliveList\").child(i).set(user);\r\n            return;\r\n          }\r\n        });\r\n        if (!done){\r\n          deadList.forEach((v, i) => {\r\n            if (v.key === user.key){\r\n              fb.child(\"roomList\").child(user.roomID).child(\"game\").child(\"deadList\").child(i).set(user);\r\n              return;\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  //lobby\r\n  onChatMessage(message, tabName){\r\n    console.log(`Main received: ${message}`)\r\n    if (message.length <= 0){\r\n      return;\r\n    }\r\n    let fb = this.firebaseRef;\r\n    let currentUser = this.getMyUserId();\r\n    if (tabName === \"lobbyChat\"){\r\n      let newRef = fb.child(\"lobbyChat\").push();\r\n      let chat = new Chat(message, UserApi.getPhotoUrl(currentUser), UserApi.getName(currentUser));\r\n      newRef.set(chat, (e) => {\r\n        if (e) throw e;\r\n      });\r\n    }else if (tabName === \"roomChat\" || tabName === \"werewolfChat\" || tabName === \"gameChat\"){\r\n      let me = this.state.myself;\r\n      if (me.roomID){\r\n        let room = this.state.roomList[me.roomID];\r\n        let chat = new Chat(message, UserApi.getPhotoUrl(currentUser), UserApi.getName(currentUser));\r\n        if (tabName === \"werewolfChat\"){\r\n          if (!room.game.werewolfChat){\r\n            room.game.werewolfChat = [];\r\n          }\r\n          room.game.werewolfChat.push(chat);\r\n          fb.child(\"roomList\").child(me.roomID).child(\"game\").child(\"werewolfChat\").set(room.game.werewolfChat);\r\n        }else if (tabName === \"gameChat\"){\r\n          //check if current speaker\r\n          if (room.game.speakerKey === me.key){\r\n            if (!room.game.gameChat){\r\n              room.game.gameChat = [];\r\n            }\r\n            room.game.gameChat.push(chat);\r\n            fb.child(\"roomList\").child(me.roomID).child(\"game\").child(\"gameChat\").set(room.game.gameChat);\r\n          }\r\n        }else{\r\n          if (!room.chat){\r\n            room.chat = [];\r\n          }\r\n          room.chat.push(chat);\r\n          //firebase\r\n          fb.child(\"roomList\").child(me.roomID).set(room);\r\n        }\r\n      }else{\r\n        //you're F-ed\r\n        throw \"up right now\";\r\n      }\r\n    }\r\n  }\r\n\r\n  //create room\r\n  createRoom(name, max){\r\n    let me = this.state.myself;\r\n    //make a room\r\n    let room = new Room(me, name, max);\r\n    this.onRoomJoin(room);\r\n  }\r\n\r\n  //onRoomList\r\n  onRoomListChange(data){\r\n    //update\r\n    let roomList = data;\r\n    let me = this.state.myself;\r\n    //if data is null\r\n    if (data === null){\r\n      me.location = \"lobby\";\r\n      delete me.roomID;\r\n      this.setState({\r\n        roomList: {},\r\n        myself: me\r\n      });\r\n      return;\r\n    }\r\n    if (me.roomID){\r\n      //if creator destroys room\r\n      let room = roomList[me.roomID];\r\n      if (!room){\r\n        //exit room\r\n        this.onRoomExit(me);\r\n        alert(\"Room has been deleted by the host.\");\r\n        return;\r\n      }\r\n      //if game started\r\n      if (room.inGame){\r\n        let game = room.game;\r\n        return this.gameStarted(me, game);\r\n      }\r\n      this.setState({room: room});\r\n    }\r\n    //set state\r\n    this.setState({\r\n      roomList: roomList,\r\n      myself: me,\r\n    });\r\n  }\r\n\r\n  //buttons in room\r\n  onRoomExit(user, room){\r\n    let me = user;\r\n    let fb = this.firebaseRef;\r\n    if (room && room.creatorKey){\r\n      //splice index\r\n      let index;\r\n      for (let i = 0; i < room.userList.length; i ++){\r\n        let user = room.userList[i];\r\n        if (user.key === me.key){\r\n          index = i;\r\n          break;\r\n        }\r\n      }\r\n      if (Number.isInteger(index)){\r\n        room.userList.splice(index, 1);\r\n      }\r\n      //remove game\r\n      if (room.game){\r\n        this.exitGame(room.game, me);\r\n      }\r\n      //check if need to inherit\r\n      if (room.creatorKey === me.key){\r\n        //check if last\r\n        if (room.userList.length === 0){\r\n          //destroy room\r\n          fb.child(\"roomList\").child(room.id).remove();\r\n        }else{\r\n          //room creator exits, inherit to someone else\r\n          let creator = room.userList[0];\r\n          room.creator = creator;\r\n          room.creatorId = creator.userId;\r\n          room.creatorKey = creator.key;\r\n        }\r\n      }\r\n      //set room firebase\r\n      fb.child(\"roomList\").child(room.id).set(room);\r\n    }\r\n    //update user\r\n    me.location = \"lobby\";\r\n    delete me.roomID;\r\n    if (me.key === this.state.myself.key){\r\n      this.setState({\r\n        myself: me,\r\n        room: undefined,\r\n        didGameStarted: false\r\n      });\r\n    }\r\n    //final firebase update\r\n    fb.once(\"value\", (snapshot) => {\r\n      this.updateUserFirebase(me, snapshot);\r\n    });\r\n  }\r\n\r\n  onRoomJoin(room){\r\n    let me = this.state.myself;\r\n    let fb = this.firebaseRef;\r\n    if (room.maxPlayer > room.userList.length){\r\n      room.userList.push(me);\r\n      //update myself\r\n      me.location = \"room\";\r\n      me.roomID = room.id;\r\n      //set state\r\n      this.setState({\r\n        myself: me,\r\n        room: room,\r\n      });\r\n      //set firebase in room\r\n      let roomListRef = fb.child(\"roomList\");\r\n      roomListRef.child(room.id).set(room, (e) => {\r\n        if (e) throw e;\r\n        fb.once(\"value\", (snapshot) => {\r\n          //update user\r\n          this.updateUserFirebase(me, snapshot);\r\n        });\r\n      });\r\n    }else{\r\n      //room full lmao\r\n    }\r\n  }\r\n\r\n  onStartGame(room){\r\n    //check room\r\n    if (room){\r\n      let me = this.state.myself;\r\n      let fb = this.firebaseRef;\r\n      //check if creator\r\n      if (room.creatorKey === me.key){\r\n        //check # of ppl\r\n        if (room.userList.length < 4){\r\n          alert(\"Minimum player is 4\");\r\n          return;\r\n        }\r\n        //start game\r\n        let game = new Game(me, room.userList);\r\n        room.inGame = true;\r\n        room.game = game;\r\n        //set firebase\r\n        fb.child(\"roomList\").child(me.roomID).set(room);\r\n      }\r\n    }\r\n  }\r\n\r\n  gameStarted(me, game){\r\n    let fb = this.firebaseRef;\r\n    if (this.state.didGameStarted){\r\n      return;\r\n    }\r\n    console.log(\"game has started\");\r\n    //update self\r\n    for (let i = 0; i < game.aliveList.length; i ++){\r\n      if (me.key === game.aliveList[i].key){\r\n        me = game.aliveList[i];\r\n        break;\r\n      }\r\n    }\r\n    me.location = \"game\";\r\n    this.setState({\r\n      myself: me,\r\n      didGameStarted: true\r\n    });\r\n    //update self to firebase\r\n    fb.once(\"value\", (snapshot) => {\r\n      this.updateUserFirebase(me, snapshot);\r\n    });\r\n    //attach handler to game\r\n    fb.child(\"roomList\").child(me.roomID).child(\"game\").on(\"value\", (snapshot) => {\r\n      this.onGameUpdate(snapshot.val());\r\n    });\r\n  }\r\n\r\n  runningTheGame(game){\r\n    if (!game){\r\n      return;\r\n    }\r\n    let fb = this.firebaseRef;\r\n    let me = this.state.myself;\r\n    let timeoutMs = 0;\r\n    //first night\r\n    if (game.step === \"identify\"){\r\n      game.judge = \"Werewolfs, wake up and identify each other\";\r\n      timeoutMs = 5000;\r\n      game.step = \"killing\";\r\n    }\r\n    //cycle\r\n    else if (game.step === \"killing\"){\r\n      game.judge = \"Werewolfs, wake up and choose a player to kill\";\r\n      let keys = this.getUserKeyByRole(game, \"werewolf\");\r\n      for (let i = 0; i < keys.length; i ++){\r\n        if (keys[i]){\r\n          let key = keys[i];\r\n          let command = new Command(key, undefined, \"any\");\r\n          game.commandList[key] = command;\r\n        }\r\n      }\r\n      timeoutMs = 15000;\r\n      game.step = \"investigate\";\r\n    }\r\n\r\n    else if (game.step === \"investigate\"){\r\n      //determine who got killed\r\n      let userKeys = this.getUserKeyByRole(game, \"werewolf\");\r\n      let indexArray = [];\r\n      for (let i = 0; i < userKeys.length; i ++){\r\n         let command = game.commandList[userKeys[i]];\r\n         if (this.validateCommand(game, command)){\r\n          indexArray.push(command.value);\r\n         }\r\n      }\r\n      let result = this.findVotingResult(indexArray);\r\n      //set killing(index)\r\n      if (Number.isInteger(result)){\r\n        game.killing = result;\r\n      }else{\r\n        game.killing = game.aliveList[Math.floor(Math.random() * game.aliveList.length)].place;\r\n      }\r\n\r\n      //cleanse commandList\r\n      game.commandList = this.resetCommandList();\r\n      //set judge\r\n      game.judge = \"Investigator, wake up and choose a person to investigate.\";\r\n      timeoutMs = 10000;\r\n      //attach command to investigator\r\n      let key = this.getUserKeyByRole(game, \"investigator\")[0];\r\n      //prevent situation where no one is investigator\r\n      if (key){\r\n        let command = new Command(key, undefined, \"other\");\r\n        game.commandList[key] = command;\r\n      }\r\n      game.step = \"investigatorResult\";\r\n\r\n    }else if (game.step === \"investigatorResult\"){\r\n      let userKey = this.getUserKeyByRole(game, \"investigator\")[0];\r\n      if (userKey){\r\n        if (this.validateCommand(game, game.commandList[userKey])){\r\n          let index = game.commandList[userKey].value;\r\n          let player = game.userList[index];\r\n          if (player){\r\n            //display result\r\n            if (player.role === \"werewolf\"){\r\n              game.investResult = \"The person you investigated is a werewolf\";\r\n            }else{\r\n              game.investResult = \"The person you investigated is not a werewolf\";\r\n            }\r\n          }\r\n          //remove command\r\n          game.commandList = this.resetCommandList();\r\n        }\r\n      }\r\n      timeoutMs = 5000;\r\n      game.step = \"doctor\";\r\n\r\n    }else if (game.step === \"doctor\"){\r\n      game.investResult = null;\r\n      game.judge = \"Doctor, wake up and apply medicine to another player\";\r\n      let key = this.getUserKeyByRole(game, \"doctor\")[0];\r\n      if (key){\r\n        let command = new Command(key, undefined, \"any\");\r\n        game.commandList[key] = command;\r\n      }\r\n      timeoutMs = 10000;\r\n      game.step = \"day\";\r\n\r\n    }else if (game.step === \"day\"){\r\n      game.judge = \"Time passed, now is the day.\";\r\n      //fetch doctor command\r\n      let userKey = this.getUserKeyByRole(game, \"doctor\")[0];\r\n      let curing;\r\n      if (userKey){\r\n        //doctor exists\r\n        if (this.validateCommand(game, game.commandList[userKey])){\r\n          let index = game.commandList[userKey].value;\r\n          curing = index\r\n        }\r\n        if (!Number.isInteger(curing)){\r\n          //random heal if doctor doesnt pick\r\n          curing = game.aliveList[Math.floor(Math.random() * game.aliveList.length)].place\r\n        }\r\n      }\r\n      game.overdose = false;\r\n      if (Number.isInteger(curing)){\r\n        //check if last cure same\r\n        if (Number.isInteger(game.curing)){\r\n          if (curing === game.curing){\r\n            game.overdose = true;\r\n          }\r\n        }\r\n        //set curing\r\n        game.curing = curing;\r\n      }\r\n      //remove command\r\n      game.commandList = this.resetCommandList();\r\n      timeoutMs = 5000;\r\n      game.step = \"announce\";\r\n\r\n    }else if (game.step === \"announce\"){\r\n      let judgeWords = \"nothing\";\r\n      //check dead\r\n      //prevent 0 makes false\r\n      //actual index = + 1\r\n      if (Number.isInteger(game.killing)){\r\n        //check doctor\r\n        let successfulCure = false;\r\n        if (Number.isInteger(game.curing)){\r\n          //check if same\r\n          if (game.curing === game.killing){\r\n            successfulCure = true;\r\n          }\r\n        }\r\n        if (successfulCure){\r\n          judgeWords = \"This night, no one has died.\";\r\n        }else{\r\n          //kill\r\n          judgeWords = (game.killing + 1) + \" has been killed.\";\r\n          //splice lists\r\n          let user = game.userList[game.killing];\r\n          game = this.removePlayer(game, user);\r\n        }\r\n      }\r\n      //check repetitive healing\r\n      if (game.overdose){\r\n        judgeWords += \" The player at position \" (game.curing + 1) + \" has overdose the medicine and died.\";\r\n        game = this.removePlayer(game, game.userList[game.curing]);\r\n        game.curing = null;\r\n        game.overdose = null;\r\n      }\r\n      //announce dead\r\n      game.judge = judgeWords;\r\n      timeoutMs = 5000;\r\n      game.step = \"discussion\";\r\n\r\n    }else if (game.step === \"discussion\"){\r\n      let indexA = game.discussionIndex;\r\n      if (indexA === null || indexA === undefined){\r\n        indexA = 0;\r\n      }else{\r\n        indexA ++;\r\n      }\r\n\r\n      timeoutMs = 15000;\r\n\r\n      //set speaker\r\n      let user = game.userList[indexA];\r\n      while(user.isDead){\r\n        indexA ++;\r\n        user = game.userList[indexA];\r\n        if (!user){\r\n          game.step = \"vote\";\r\n          timeoutMs = 100;\r\n          break;\r\n        }\r\n      }\r\n      if (indexA === game.userList.length - 1){\r\n        //next step if last player\r\n        game.step = \"vote\";\r\n      }\r\n      if (user){\r\n        game.speakerKey = user.key;\r\n        game.judge = `Now the player at position ${indexA + 1} ${user.username} have 15 second to speak in the game channel.`;\r\n        game.discussionIndex = indexA;\r\n      }\r\n\r\n    }else if (game.step === \"vote\"){\r\n      //reset vars\r\n      game.discussionIndex = null;\r\n      game.speakerKey = null;\r\n      //attach command to living people\r\n      for (let i = 0; i < game.aliveList.length; i ++){\r\n        let key = game.aliveList[i].key;\r\n        let command = new Command(key, undefined, \"any\");\r\n        game.commandList[key] = command;\r\n      }\r\n      //set judge\r\n      game.judge = `Players now vote for a player to kill that they suspect to be the werewolf.`\r\n      game.step = \"hang\";\r\n      timeoutMs = 20000;\r\n\r\n    }else if (game.step === \"hang\"){\r\n      //retrieve command\r\n      let cValue = [];\r\n      for (let key in game.commandList){\r\n        if (this.validateCommand(game, game.commandList[key])){\r\n          if (Number.isInteger(game.commandList[key].value)){\r\n            cValue.push(game.commandList[key].value);\r\n          }\r\n        }else{\r\n          cValue.push(game.aliveList[randomInt(0, game.aliveList.length - 1)].place);\r\n        }\r\n      }\r\n      //killing time\r\n      let result = this.findVotingResult(cValue);\r\n      let userObj = game.userList[result];\r\n      //cleanse commandList\r\n      game.commandList = this.resetCommandList();\r\n      //remove player from existence\r\n      game = this.removePlayer(game, userObj);\r\n      game.judge = `The player at position ${result + 1} ${userObj.username} has been voted to be killed.`;\r\n      timeoutMs = 5000;\r\n      game.step = \"night\";\r\n\r\n    }else if (game.step === \"night\"){\r\n      game.judge = \"Time passed, now is the night.\";\r\n      timeoutMs = 5000;\r\n      game.step = \"killing\";\r\n\r\n    }else if (game.step === \"announceWin\"){\r\n      timeoutMs = -1;\r\n      let winner = this.gameCheckWin(game);\r\n      if (winner === \"werewolf\"){\r\n        game.judge = \"Werewolves have won the game!\"\r\n      }else if (winner === \"villager\"){\r\n        game.judge = \"Villagers have won the game!\"\r\n      }\r\n      game.judge += \" You can exit the menu by clicking the button below.\";\r\n      game.end = true;\r\n      //room no longer in game\r\n      let room = this.state.room;\r\n      room.inGame = false;\r\n      room.game = game;\r\n      fb.child(\"roomList\").child(me.roomID).set(room);\r\n    }\r\n\r\n    //check if winning\r\n    let ifWin = this.gameCheckWin(game);\r\n    if (ifWin){\r\n      game.step = \"announceWin\";\r\n    }\r\n    //timeout\r\n    if (timeoutMs >= 0){\r\n      let timerID = setTimeout(() => {\r\n        //timer\r\n        //fetch firebase first\r\n        fb.child(\"roomList\").child(me.roomID).child(\"game\").once(\"value\", (snapshot) => {\r\n          this.runningTheGame(snapshot.val());\r\n        });\r\n      }, timeoutMs);\r\n      this.state.timerID = timerID;\r\n      this.setState({timerID: timerID});\r\n    }\r\n    //update\r\n    fb.child(\"roomList\").child(me.roomID).child(\"game\").set(game);\r\n  }\r\n\r\n  exitGame(game, user){\r\n    let fb = this.firebaseRef;\r\n    //if actual user\r\n    if (!user){\r\n      user = this.state.myself;\r\n    }\r\n    user.location = \"room\";\r\n    //if alive then dies in game\r\n    if (!user.isDead){\r\n      this.removePlayer(game, user);\r\n    }\r\n    //inherit if creator\r\n    if (game){\r\n      if (game.creatorKey === user.key){\r\n        if (game.aliveList.length > 0){\r\n          let inheritor = game.aliveList[0];\r\n          game.creatorKey = inheritor.key;\r\n          fb.child(\"roomList\").child(user.roomID).child(\"game\").set(game);\r\n        }else{\r\n          //destroy game\r\n          fb.child(\"roomList\").child(user.roomID).child(\"game\").remove();\r\n        }\r\n      }\r\n    }\r\n    \r\n    //check if self\r\n    if (user.key === this.state.myself.key){\r\n      //remove timer if exist\r\n      if (this.state.timerID){\r\n        clearTimeout(this.state.timerID);\r\n        this.setState({timerID: undefined});\r\n      }\r\n      //final setstate\r\n      this.setState({\r\n        didGameStarted: false,\r\n      });\r\n      //remove handler\r\n      fb.child(\"roomList\").child(user.roomID).child(\"game\").off();\r\n    }\r\n    //final firebase\r\n    fb.once(\"value\", (snapshot) => {\r\n      this.updateUserFirebase(user, snapshot);\r\n    });\r\n  }\r\n\r\n  updateCommand(game, command, index){\r\n    command.value = index;\r\n    //update firebase\r\n    let fb = this.firebaseRef;\r\n    let me = this.state.myself;\r\n    fb.child(\"roomList\").child(me.roomID).child(\"game\").child(\"commandList\").child(command.key).set(command);\r\n  }\r\n\r\n  resetCommandList(commandList){\r\n    return {sample: new Command(0)};\r\n  }\r\n\r\n  removePlayer(game, user){\r\n    ///kill player in game\r\n    if (!user){\r\n      console.log(\"not user\");\r\n    }\r\n    if (!game){\r\n      return;\r\n    }\r\n    if (!user.isDead){\r\n      user.isDead = true;\r\n      let aliveIndex;\r\n      if (game.aliveList){\r\n        game.aliveList.forEach((v, i) => {\r\n          if (v.key === user.key){\r\n            aliveIndex = i;\r\n            return;\r\n          }\r\n        });\r\n        game.aliveList.splice(aliveIndex, 1);\r\n        if (game.deadList){\r\n          game.deadList.push(user);\r\n        }else{\r\n          game.deadList = [user];\r\n        }\r\n      }\r\n    }\r\n    if (user.key === this.state.myself.key){\r\n      this.setState({\r\n        myself: user\r\n      })\r\n    }\r\n    return game;\r\n  }\r\n\r\n  onGameUpdate(game){\r\n    let me = this.state.myself;\r\n    if (!game){\r\n      console.log(\"not a game\");\r\n      //exit game right now\r\n      this.exitGame();\r\n      return;\r\n    }\r\n    if (game.creatorKey === me.key){\r\n      if (!this.state.timerID){\r\n        //engage\r\n        this.runningTheGame(game);\r\n      }\r\n    }\r\n    //set yourself\r\n    game.userList.forEach((v) => {\r\n      if (v.key === me.key){\r\n        me = v;\r\n        return;\r\n      }\r\n    })\r\n    //final setState\r\n    this.state.room.game = game;\r\n    this.setState({\r\n      room: this.state.room,\r\n      myself: me\r\n    });\r\n  }\r\n\r\n  getUserKeyByRole(game, role){\r\n    let result = [];\r\n    game.userList.forEach((v, i) => {\r\n      if (v.role === role){\r\n        if (!v.isDead){\r\n          result.push(v.key);\r\n        }\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  validateCommand(三千世界, 佛法){\r\n    let 佛曰 = 佛法.target;\r\n    let 佛 = 三千世界.userList[佛法.value];\r\n    if (!佛){\r\n      return false;\r\n    }\r\n    if (佛曰 === \"any\"){\r\n      if (佛.key){\r\n        return true;\r\n      }\r\n    }else if (佛曰 === \"good\"){\r\n      if (佛.role !== \"werewolf\"){\r\n        return true;\r\n      }\r\n    }else if (佛曰 === \"bad\"){\r\n      if (佛.role === \"werewolf\"){\r\n        return true;\r\n      }\r\n    }else{\r\n      return undefined;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  findVotingResult(arrayVote){\r\n    ///receive array of number [0, 1, 2, 3, 3, 5, 5, 5] = 5 returns a random max occurance \r\n    let max = 0;\r\n    let result;\r\n    let theList = new Array(arrayVote.length).fill(0);\r\n    let dupeMax = false;\r\n    let maxIndex = 0;\r\n    for (let i = 0; i < arrayVote.length; i ++){\r\n      if (!Number.isInteger(theList[arrayVote[i]])){\r\n        theList[arrayVote[i]] = 1;\r\n      }else{\r\n        theList[arrayVote[i]] ++;\r\n      }\r\n      if (theList[arrayVote[i]] > max){\r\n        max = theList[arrayVote[i]];\r\n        maxIndex = [i];\r\n        dupeMax = false;\r\n      }else if(theList[arrayVote[i]] === max){\r\n        dupeMax = true;\r\n        maxIndex.push(i);\r\n      }\r\n    }\r\n    if (dupeMax){\r\n      result = arrayVote[maxIndex[Math.floor(Math.random() * maxIndex.length)]];\r\n    }else{\r\n      result = arrayVote[maxIndex[0]];\r\n    }\r\n    return result;\r\n  }\r\n\r\n  gameCheckWin(game){\r\n    let ww = this.getUserKeyByRole(game, \"werewolf\");\r\n    if (ww.length >= game.aliveList.length / 2){\r\n      return \"werewolf\";\r\n    }else if (ww.length === 0){\r\n      return \"villager\";\r\n    }\r\n    return false;\r\n  }\r\n\r\n  //rendering\r\n  render() {\r\n    //get some stuff server\r\n    var id = this.getSessionId();\r\n    var currentUser = this.getMyUserId();\r\n    let userProfilePicUrl = UserApi.getPhotoUrl(currentUser);\r\n    let username = UserApi.getName(currentUser);\r\n    var users = this.getSessionUserIds().map((user_id) => (\r\n      <li key={user_id}>{user_id}</li>\r\n    ));\r\n    var creator = this.getSessionCreatorUserId();\r\n    //userlist\r\n    let userList = this.state.userList;\r\n    let userListJSX = [];\r\n    for (let key in userList){\r\n      let user = userList[key];\r\n      userListJSX.push(<li key={key}>{user.key}</li>);\r\n    }\r\n    //chat list\r\n    let chatList = {};\r\n    chatList.lobbyChat = this.state.lobbyChat;\r\n    let me = this.state.myself;\r\n    if (me.roomID){\r\n      let room = this.state.roomList[me.roomID];\r\n      chatList.roomChat = room.chat;\r\n      if (room.game){\r\n        if (me.role === \"werewolf\"){\r\n          chatList.werewolfChat = room.game.werewolfChat;\r\n        }\r\n        chatList.gameChat = room.game.gameChat;\r\n      }\r\n    }\r\n    //location conditional render\r\n    let location = this.state.myself.location;\r\n    if (location === \"lobby\" || location === \"room\" || location === \"game\"){\r\n      //lobby\r\n      return(\r\n        <div className=\"werewolf\">\r\n          <Lobby \r\n            //lobby chat\r\n            sendMessage={(m, r) => this.onChatMessage(m, r)} \r\n            chatList={chatList}\r\n            //room\r\n            roomList={this.state.roomList} \r\n            onCreateRoom={(name, max) => this.createRoom(name, max)}\r\n            onRoomJoin={(room) => this.onRoomJoin(room)}\r\n            onRoomExit={(room) => this.onRoomExit(this.state.myself, room)}\r\n            onStartGame={(room) => this.onStartGame(room)}\r\n            //user info\r\n            userProfilePic={userProfilePicUrl}\r\n            username={username}\r\n            location={location}\r\n            myself={this.state.myself}\r\n            room={this.state.room}\r\n            //game\r\n            updateCommand={(game, command, index) => this.updateCommand(game, command, index)}\r\n            exitGame={() => this.exitGame()}\r\n          />\r\n        </div>\r\n      )\r\n    }else{\r\n      //emptiness\r\n      return (\r\n        <div className=\"werewolf\">Now Loading...</div>\r\n      )\r\n    }\r\n\r\n    // old stuff\r\n    // return (\r\n      \r\n    //   <div>\r\n    //     <p>Session ID: {id}</p>\r\n    //     <p>Session creator: {creator}</p>\r\n    //     <p>Your ID: {currentUser}</p>\r\n    //     <p>Your Key: </p>\r\n    //     <p>{(this.state.myself.key) || undefined}</p>\r\n    //     <p>All User:</p>\r\n    //     <ul> {users} </ul>\r\n    //     <p>Current Pulse: </p>\r\n    //     <p>{(this.state.pulse) || undefined}</p>\r\n    //     <p>Connected User: </p>\r\n    //     <ul> {userListJSX} </ul>\r\n    //   </div>\r\n    // );\r\n\r\n  }\r\n}\r\n\r\n//constructors\r\nclass LocalUser{\r\n  constructor(userId){\r\n    //unique to google account\r\n    this.userId = userId;\r\n    this.profilePic = UserApi.getPhotoUrl(userId);\r\n    this.username = UserApi.getName(userId);\r\n    //unique on connection\r\n    this.key = undefined;\r\n    //dynamic properties\r\n    this.location = undefined;\r\n    //this.roomID = undefined;\r\n    //this.role\r\n    //this.place\r\n    this.isDead = false;\r\n  }\r\n  getKey(){\r\n    return this.key;\r\n  }\r\n  getId(){\r\n    return this.userId;\r\n  }\r\n}\r\n\r\nclass Room{\r\n  constructor(creator, name, maxPlayer){\r\n    this.creator = creator;\r\n    this.creatorId = creator.userId;\r\n    this.creatorKey = creator.key;\r\n    this.userList = [];\r\n    this.id = randomID();\r\n    this.name = name;\r\n    this.maxPlayer = maxPlayer;\r\n    this.chat = [];\r\n    this.inGame = false;\r\n    //this.game = ?;\r\n  }\r\n}\r\n\r\nclass Game{\r\n  constructor(creator, userList){\r\n    //assign roles\r\n    let roleList = []\r\n    let playerNum = [];\r\n    //append roleList\r\n    for (let i = 1; i <= userList.length; i ++){\r\n      playerNum.push(i - 1);\r\n      //append role\r\n      switch (i) {\r\n        case 1: case 2: case 7:\r\n          roleList.push(\"villager\");\r\n          break;\r\n        case 3:\r\n          roleList.push(\"investigator\");\r\n          break;\r\n        case 4: case 5: case 8:\r\n          roleList.push(\"werewolf\");\r\n          break;\r\n        case 6:\r\n          roleList.push(\"doctor\");\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    this.userList = [];\r\n    //append roles\r\n    for(let i = 0; i < userList.length; i ++){\r\n      let user = userList[i];\r\n      let roleIndex = randomInt(0, roleList.length - 1);\r\n      let numIndex = randomInt(0, playerNum.length - 1);\r\n      let role = roleList[roleIndex];\r\n      let num = playerNum[numIndex];\r\n      user.role = role;\r\n      user.place = num;\r\n      user.location = \"game\";\r\n      //userList\r\n      this.userList[num] = user;\r\n      //splice\r\n      roleList.splice(roleIndex, 1);\r\n      playerNum.splice(numIndex, 1);\r\n    }\r\n    //basics\r\n    this.gameChat = [];\r\n    this.werewolfChat = [];\r\n    this.aliveList = userList;\r\n    this.deadList = [];\r\n    this.commandList = {sample: new Command(0)};\r\n    this.creatorKey = creator.key;\r\n    this.judge = \"\";\r\n    //dynamic\r\n    this.day = 0;\r\n    this.currentTime = \"night\";\r\n    this.step = \"identify\";\r\n    // first night: identify\r\n    // night: werewolf, investigator, doctor,\r\n    // day: announce, discussion, vote\r\n    this.investResult = null;\r\n    this.discussionIndex = null;\r\n    this.speakerKey = null;\r\n  }\r\n}\r\n\r\nclass Chat{\r\n  constructor(message, picture, username){\r\n    this.message = message;\r\n    this.picture = picture;\r\n    this.username = username;\r\n  }\r\n}\r\n\r\nclass Command{\r\n  constructor(targetKey, target, type){\r\n    this.open = true;\r\n    this.key = targetKey;\r\n    this.value = null;\r\n    //Good or Bad or Any\r\n    this.target = target || \"any\";\r\n    //any, self, other\r\n    this.type = type || \"any\";\r\n  }\r\n}\r\n\r\n//methods\r\nfunction randomInt(min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1) ) + min;\r\n}\r\n\r\nfunction randomID(){\r\n  return parseInt(String(Math.random()).substring(2));\r\n}\r\n\r\nwindow.fet = function(ref){\r\n  return ref.once('value', (data)=>{\r\n    console.log(data.val());\r\n  });\r\n}\r\n\r\nwindow.fetAll = function(){\r\n  return window.fbReferenceWithHope.once('value', (data)=>{\r\n    console.log(data.val());\r\n  });\r\n}\r\n\r\nwindow.cleanse = function(){\r\n  window.fbReferenceWithHope.child(\"virtualServer\").set({});\r\n  window.fbReferenceWithHope.child(\"roomList\").set({});\r\n}","import ChatRoom from './games/chatroom/ChatRoom.js';\r\nimport CookieClicker from \"./games/cookieClicker/CookieClicker.js\";\r\nimport GoogleGossip from \"./games/googlegossip/GoogleGossip.js\";\r\nimport Mafia from './games/mafia/Mafia.js';\r\nimport Multiplication from './games/multiplication/Multiplication.js';\r\nimport Pokemon from './games/pokemon/Pokemon.js'\r\nimport Pong from './games/pong/Pong.js';\r\nimport RockPaperScissors from './games/rps/RockPaperScissors.js';\r\nimport Spark from './games/spark/Spark.js';\r\nimport TicTacToe from './games/tictactoe/TicTacToe.js';\r\nimport TugOfWar from \"./games/TugOfWar/TugOfWar.js\";\r\nimport TwentyOneQuestions from './games/twentyOneQuestions/TwentyOneQuestions.js';\r\nimport burst_Forth from \"./games/Burst_Forth/burstForth.js\";\r\nimport fight from \"./games/fight/fight.js\";\r\nimport uno from './games/uno/uno.js';\r\nimport Werewolf from './games/werewolf/Werewolf.js';\r\n\r\nconst gameData = {\r\n\r\n  chatroom: {\r\n    title: \"Chat Room\",\r\n    authors: \"Joe Tessler\",\r\n    description: \"A place to chat with a group of friends\",\r\n    minUsers: 1,\r\n    maxUsers: 10,\r\n    component: ChatRoom,\r\n  },\r\n\r\n  tictactoe: {\r\n    title: \"Tic Tac Toe\",\r\n    authors: \"Joe Tessler\",\r\n    description: \"The classic two-player game with Xs and Os\",\r\n    minUsers: 2,\r\n    maxUsers: 2,\r\n    component: TicTacToe,\r\n  },\r\n\r\n  rockpaperscissors: {\r\n    title: \"Rock Paper Scissors\",\r\n    authors: \"Devraj Mehta\",\r\n    description: \"Class 2-player rock paper scissors\",\r\n    minUsers: 2,\r\n    maxUsers: 2,\r\n    component: RockPaperScissors,\r\n  },\r\n\r\n  multiplication: {\r\n    title: \"Multiplication\",\r\n    authors: \"Edwin Fuquen\",\r\n    description: \"A multiplication speed game\",\r\n    minUsers: 2,\r\n    maxUsers: 2,\r\n    component: Multiplication,\r\n  },\r\n\r\n  pong: {\r\n    title: \"Pong\",\r\n    authors: \"Devraj Mehta\",\r\n    description: \"Classic Pong\",\r\n    minUsers: 1,\r\n    maxUsers: 2,\r\n    component: Pong,\r\n  },\r\n\r\n  pokemon: {\r\n      title: \"Pokemon Simulator\",\r\n      authors: \"Imani Greenidge and Raishan Bernard\",\r\n      description: \"Turn Based Pokemon Battle\",\r\n      minUsers: 1,\r\n      maxUsers: 2,\r\n      component: Pokemon,\r\n  },\r\n\r\n  questions: {\r\n    title: \"21 Questions\",\r\n    authors: \"Jordan K., Prieya N.\",\r\n    description: \"21 questions between 2 players\",\r\n    minUsers: 1,\r\n    maxUsers: 2,\r\n    component: TwentyOneQuestions,\r\n  },\r\n\r\n  photosharing: {\r\n    title: \"Spark\",\r\n    authors: \"Ramata Williams and Andrea Cajamarca\",\r\n    description: \"Ripping off Twitter, Instagram, AND Tumblr.\",\r\n    minUsers: 2,\r\n    maxUserss: 5,\r\n    component: Spark,\r\n  },\r\n\r\n  uno: {\r\n    title: \"I Declare War\",\r\n    authors: \"Nia Davis, Jackie He, Lisandro Mayancela, Steven Rosario\",\r\n    description: \"The classic UNO game\",\r\n    minUsers: 2,\r\n    maxUsers: 2,\r\n    component: uno,\r\n  },\r\n\r\n  mafia: {\r\n    title: \"Mafia\",\r\n    authors: \"Caelan Springer, Daniel Lin, Daniel Zamilatskiy\",\r\n    description: \"Your greatest friends can be your greatest enemy. Trust no one but yourself.\",\r\n    minUsers: 1,\r\n    maxUsers: 20,\r\n    component: Mafia,\r\n  },\r\n\r\n  cookieClicker: {\r\n    title: \"Cookie Clicker\",\r\n    authors: \"Mahfuz,\",\r\n    description: \"click the cookie fast as possible\",\r\n    minUsers: 2,\r\n    maxUsers: 2,\r\n    component: CookieClicker\r\n  },\r\n\r\n  fight: {\r\n    title: \"fight\",\r\n    authors: \"Linhong Zhou, Jennifer P\",\r\n    description: \"FIGHT!\",\r\n    minUsers: 2,\r\n    maxUsers: 2,\r\n    component: fight\r\n  },\r\n\r\n  Burst_Forth: {\r\n    title: \"Burst Forth\",\r\n    authors: \"Jason Alvarez, William Collazo, Usman\",\r\n    description: \"oof\",\r\n    minUsers: 2,\r\n    maxUsers: 2,\r\n    component: burst_Forth\r\n  },\r\n\r\n  TugOfWar: {\r\n    title: \"Tug Of War\",\r\n    authors: \"Joel Veras\",\r\n    description: \"Pull the rope and win \",\r\n    minUsers: 2,\r\n    maxUsers: 2,\r\n    component: TugOfWar\r\n  },\r\n\r\n  googlegossip: {\r\n    title: \"Google Gossip\",\r\n    authors: \"Zaara Afida, Jermain Lewis, Daril Alanis\",\r\n    description:\r\n      \"We are here to spill teas and destroy lives while exposing fake people around us.\",\r\n    minUsers: 1,\r\n    maxUsers: 10,\r\n    component: GoogleGossip\r\n  },\r\n\r\n  werewolf:{\r\n    title: \"Werewolf\",\r\n    author: \"Liwei Huang\",\r\n    description: \"basically mafia\",\r\n    minUsers: 1,\r\n    maxUsers: Infinity,\r\n    component: Werewolf\r\n  }\r\n\r\n};\r\n\r\nexport default gameData;\r\n","import AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport React, { Component } from 'react';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport firebase from 'firebase';\r\nimport gameData from './gameData.js';\r\nimport { Link } from 'react-router-dom';\r\nimport { withRouter } from 'react-router';\r\n\r\nclass Header extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { drawerOpen: false };\r\n  }\r\n\r\n  setDrawerOpen(open) {\r\n    this.setState({ drawerOpen: open });\r\n  }\r\n\r\n  signOut() {\r\n    firebase.auth().signOut().catch(\r\n        (error) => console.error(\"Failed to sign out\", error));\r\n  }\r\n\r\n  getTitle() {\r\n    var parts = this.props.location.pathname.split(\"/\");\r\n    if (parts.length >= 2 && parts[1] in gameData) {\r\n      return gameData[parts[1]].title;\r\n    } else {\r\n      return \"Studio Games!\";\r\n    }\r\n  }\r\n\r\n  isInWaitingRoom() {\r\n    return this.props.location.pathname === \"/\";\r\n  }\r\n\r\n  render() {\r\n    var user = firebase.auth().currentUser;\r\n    return (\r\n      <div>\r\n        <AppBar position=\"static\">\r\n          <Toolbar>\r\n            <IconButton\r\n                style={{marginLeft: -12, marginRight: 20}}\r\n                onClick={() => this.setDrawerOpen(true)}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Typography\r\n                variant=\"h6\"\r\n                color=\"inherit\"\r\n                style={{flexGrow: 1}}>\r\n              {this.getTitle()}\r\n            </Typography>\r\n            <Button\r\n                color=\"inherit\"\r\n                onClick={() => this.signOut()}>\r\n              Sign out as {user.displayName}\r\n            </Button>\r\n          </Toolbar>\r\n        </AppBar>\r\n\r\n        <Drawer\r\n            open={this.state.drawerOpen}\r\n            onClose={() => this.setDrawerOpen(false)}>\r\n\r\n          <List>\r\n            <ListItem>\r\n              <ListItemText\r\n                primaryTypographyProps={{variant: \"title\"}}\r\n                primary=\"Navigation\" />\r\n            </ListItem>\r\n\r\n            <Link style={{textDecoration: 'none'}} to=\"/\">\r\n              <MenuItem\r\n                  onClick={() => this.setDrawerOpen(false)}\r\n                  disabled={this.isInWaitingRoom()}>\r\n                Go back to the waiting room\r\n              </MenuItem>\r\n            </Link>\r\n\r\n            <ListItem>\r\n              <ListItemText\r\n                primaryTypographyProps={{variant: \"title\"}}\r\n                primary=\"Active Games\" />\r\n            </ListItem>\r\n\r\n            <MenuItem disabled={true}>\r\n              Not implemented yet\r\n            </MenuItem>\r\n\r\n            <ListItem>\r\n              <ListItemText\r\n                primaryTypographyProps={{variant: \"title\"}}\r\n                primary=\"Debug Tools\" />\r\n            </ListItem>\r\n            \r\n            <Link style={{textDecoration: 'none'}} to=\"/dataViewer\">\r\n                <MenuItem\r\n                    onClick={() => this.setDrawerOpen(false)}>\r\n                  View Game Data\r\n                </MenuItem>\r\n            </Link>\r\n\r\n          </List>\r\n        </Drawer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Header);\r\n","import Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default class UnknownGameType extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { dialog_open: true };\r\n  }\r\n\r\n  componentWillMount() {\r\n    document.title = \"Unknown Game\";\r\n  }\r\n\r\n  render() {\r\n    var type = this.props.match.params.type;\r\n    var id = this.props.match.params.id;\r\n    return (\r\n      <Dialog\r\n          open={this.state.dialog_open}\r\n          disableBackdropClick={true}\r\n          disableEscapeKeyDown={true}>\r\n        <DialogTitle>Unknown Game!</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Game Type: <code>{type}</code>\r\n          </DialogContentText>\r\n          <DialogContentText>\r\n            Game ID: <code>{id}</code>\r\n          </DialogContentText>\r\n          <DialogContentText style={{marginTop: 10}}>\r\n            <b>Oops!</b> You do not have the code for this game type. This is\r\n            probably another team's project.  Please go back to the waiting\r\n            room and try another game.\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Link style={{textDecoration: 'none'}} to=\"/\">\r\n            <Button\r\n                color=\"primary\"\r\n                autoFocus={true}>\r\n              Go to waiting room\r\n            </Button>\r\n          </Link>\r\n        </DialogActions>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n","import Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport React, { Component } from 'react';\r\nimport firebase from 'firebase';\r\nimport gameData from './gameData.js';\r\n\r\nclass AddGameMenuItem extends Component {\r\n  addGame() {\r\n    var user = firebase.auth().currentUser;\r\n    var sessionData = {\r\n      type: this.props.type,\r\n      users: [user.uid],\r\n      creator: user.uid,\r\n      timestamp: firebase.database.ServerValue.TIMESTAMP,\r\n    }\r\n    var sessionsDatabaseRef = firebase.database().ref(\"/session-metadata\");\r\n\r\n    sessionsDatabaseRef.push(sessionData, (error) => {\r\n      if (error) {\r\n        console.error(\"Error storing session metadata\", error);\r\n      }\r\n    });\r\n\r\n    if (this.props.onClick) {\r\n      this.props.onClick();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <MenuItem onClick={() => this.addGame()}>\r\n        {this.props.title}\r\n      </MenuItem>\r\n    );\r\n  };\r\n}\r\n\r\nexport default class AddGameButton extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { popoverOpen: false };\r\n  }\r\n\r\n  openPopover(event) {\r\n    event.preventDefault(); // Prevent ghost click.\r\n\r\n    this.setState({\r\n      popoverOpen: true,\r\n      anchorEl: event.currentTarget,\r\n    });\r\n  };\r\n\r\n  closePopover() {\r\n    this.setState({ popoverOpen: false });\r\n  };\r\n\r\n  render() {\r\n    var menuItems = Object.keys(gameData).map((type) => (\r\n      <AddGameMenuItem\r\n          key={type}\r\n          type={type}\r\n          title={gameData[type].title}\r\n          onClick={() => this.closePopover()} />\r\n    ));\r\n\r\n    return (\r\n      <center style={this.props.style}>\r\n        <Button\r\n            variant=\"contained\"\r\n            onClick={(event) => this.openPopover(event)}>\r\n          Create new game\r\n        </Button>\r\n        <Menu\r\n            open={this.state.popoverOpen}\r\n            anchorEl={this.state.anchorEl}\r\n            onClose={() => this.closePopover()}>\r\n          {menuItems}\r\n        </Menu>\r\n      </center>\r\n    );\r\n  }\r\n}\r\n","import MenuItem from '@material-ui/core/MenuItem';\r\nimport React, { Component } from 'react';\r\nimport Select from '@material-ui/core/Select';\r\nimport {FILTER_TYPE} from './WaitingRoom.js'\r\n\r\nexport default class FilterSelect extends Component {\r\n\r\n  handleChange(event) {\r\n    this.props.onFilterGames(event.target.value)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Select\r\n          value={this.props.filterType}\r\n          onChange={(event) => this.handleChange(event)}>\r\n        <MenuItem value={FILTER_TYPE.MY_GAMES}>\r\n          Games I Created\r\n        </MenuItem>\r\n        <MenuItem value={FILTER_TYPE.GAMES_WITH_SPACE}>\r\n          Games with Space\r\n        </MenuItem>\r\n        <MenuItem value={FILTER_TYPE.GAMES_I_AM_IN}>\r\n          Games I Joined\r\n        </MenuItem>\r\n        <MenuItem value={FILTER_TYPE.ALL_GAMES}>\r\n          All Games\r\n        </MenuItem>\r\n      </Select>\r\n    );\r\n  }\r\n}\r\n","import Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport React, { Component } from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport UserApi from './UserApi.js';\r\nimport firebase from 'firebase';\r\nimport gameData from './gameData.js';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default class GameCard extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      expanded: false,\r\n    };\r\n  }\r\n\r\n  gameDataExists() {\r\n    return this.props.session.type in gameData;\r\n  }\r\n\r\n  /**\r\n   * Returns the game data for the given type. If the game type doesn't exist\r\n   * (i.e., we're trying to load a game that doesn't yet exist in this client\r\n   * code), return blank data.\r\n   */\r\n  getGameData() {\r\n    if (this.gameDataExists()) {\r\n      return gameData[this.props.session.type];\r\n    } else {\r\n      return {\r\n        title: \"Unknown Game Type\",\r\n        authors: \"Unknown Authors\",\r\n        description: \"You are missing the code for this game type. \" +\r\n            \"It is likely another team's project that is in development.\",\r\n        minUsers: 0,\r\n        maxUsers: 0,\r\n      };\r\n    }\r\n  }\r\n\r\n  getTitle() {\r\n    return this.getGameData().title;\r\n  }\r\n\r\n  getSubtitle() {\r\n    var date = new Date(this.props.session.timestamp);\r\n    var options = {\r\n      day: \"numeric\",\r\n      hour: \"numeric\",\r\n      minute: \"numeric\",\r\n      month: \"long\",\r\n      second: \"numeric\",\r\n      timeZone: \"America/New_York\",\r\n      weekday: \"long\",\r\n      year: \"numeric\",\r\n    };\r\n    var dateString = new Intl.DateTimeFormat(\"en-US\", options).format(date);\r\n    var creator = UserApi.getName(this.props.session.creator);\r\n    return \"Created on \" + dateString + \" by \" + creator;\r\n  }\r\n\r\n  getAuthors() {\r\n    var authors = this.getGameData().authors;\r\n    return \"This game was designed and built by \" + authors;\r\n  }\r\n\r\n  getDescription() {\r\n    return this.getGameData().description;\r\n  }\r\n\r\n  getUserListHeader() {\r\n    var numUsers = this.props.session.users.length;\r\n    var maxUsers = this.getGameData().maxUsers;\r\n    return numUsers + \"/\" + maxUsers + \" users waiting to start\";\r\n  }\r\n\r\n  getGamePath() {\r\n    var type = this.props.session.type;\r\n    var id = this.props.session.id;\r\n    return \"/\" + type + \"/\" + id;\r\n  }\r\n\r\n  joinSession() {\r\n    var uid = firebase.auth().currentUser.uid;\r\n    var path = \"/session-metadata/\" + this.props.session.id + \"/users\";\r\n    var sessionDatabaseRef = firebase.database().ref(path);\r\n    var maxUsers = this.getGameData().maxUsers;\r\n    sessionDatabaseRef.transaction((users) => {\r\n      // Only join the session is there is room and this user is not already in\r\n      // the session (i.e., spamming \"join game\").\r\n      if (users.length < maxUsers && users.indexOf(uid) < 0) {\r\n        users.push(uid);\r\n      }\r\n      return users;\r\n    }).catch((error, committed, snapshot) => {\r\n      console.error(\"Error joining session\", error);\r\n    });\r\n  }\r\n\r\n  deleteSession() {\r\n    var path = \"/session/\" + this.props.session.id;\r\n    var sessionDatabaseRef = firebase.database().ref(path);\r\n    sessionDatabaseRef.remove()\r\n        .then(() => {\r\n          // Permission to delete session data depends on state within the\r\n          // metadata node, so we must delete session metadata *after* removing\r\n          // session data.\r\n          this.deleteSessionMetadata();\r\n        })\r\n        .catch((error) => {\r\n          console.warn(\"Error removing session data\", error);\r\n          this.deleteSessionMetadata();\r\n        });\r\n  }\r\n\r\n  deleteSessionMetadata() {\r\n    var path = \"/session-metadata/\" + this.props.session.id;\r\n    var sessionDatabaseRef = firebase.database().ref(path);\r\n    sessionDatabaseRef.remove().catch((error) => {\r\n      console.error(\"Error removing session metadata\", error);\r\n    });\r\n  }\r\n\r\n  isGameCreator() {\r\n    var user = firebase.auth().currentUser;\r\n    return user.uid === this.props.session.creator;\r\n  }\r\n\r\n  isInSession() {\r\n    var uid = firebase.auth().currentUser.uid;\r\n    return this.props.session.users.indexOf(uid) >= 0;\r\n  }\r\n\r\n  shouldShowStartButton() {\r\n    var users = this.props.session.users;\r\n    var minUsers = this.getGameData().minUsers;\r\n    return this.isInSession() && users.length >= minUsers;\r\n  }\r\n\r\n  isFull() {\r\n    var users = this.props.session.users;\r\n    var maxUsers = this.getGameData().maxUsers;\r\n    return users.length >= maxUsers;\r\n  }\r\n\r\n  handleExpand() {\r\n    this.setState({expanded: !this.state.expanded});\r\n  }\r\n\r\n  render() {\r\n    var userListItems = this.props.session.users.map((uid) => (\r\n      <ListItem key={uid}>\r\n        <Avatar src={UserApi.getPhotoUrl(uid)} />\r\n        <ListItemText primary={UserApi.getName(uid)}/>\r\n      </ListItem>\r\n    ));\r\n\r\n    var gameActionButton;\r\n    if (!this.gameDataExists()) {\r\n      gameActionButton = (\r\n        <Button disabled={true}>\r\n          Cannot join unknown game type\r\n        </Button>\r\n      );\r\n    } else if (this.shouldShowStartButton()) {\r\n      var target = {\r\n        pathname: this.getGamePath(),\r\n        state: {\r\n          id: this.props.session.id,\r\n          creator: this.props.session.creator,\r\n          users: this.props.session.users,\r\n          title: this.getTitle(),\r\n        }\r\n      }\r\n      gameActionButton = (\r\n        <Link\r\n            style={{textDecoration: 'none'}}\r\n            to={target}>\r\n          <Button color=\"primary\">\r\n            Start game\r\n          </Button>\r\n        </Link>\r\n      );\r\n    } else {\r\n      gameActionButton = (\r\n        <Button\r\n            onClick={() => this.joinSession()}\r\n            disabled={this.isInSession() || this.isFull()}>\r\n          {this.isFull() ? \"Game is full\" : \"Join\"}\r\n        </Button>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Card style={this.props.style}>\r\n        <CardHeader\r\n            action={\r\n              <IconButton onClick={() => this.handleExpand()}>\r\n                {this.state.expanded ? <ExpandLessIcon /> : <ExpandMoreIcon />}\r\n              </IconButton>\r\n            }\r\n            title={this.getTitle()}\r\n            subheader={this.getSubtitle()} />\r\n        <Collapse in={this.state.expanded} timeout=\"auto\" unmountOnExit>\r\n          <CardContent>\r\n            <Typography variant=\"subtitle1\">\r\n              {this.getDescription()}\r\n            </Typography>\r\n            <Divider />\r\n            <List>\r\n              <Typography\r\n                  variant=\"subtitle2\"\r\n                  color=\"textSecondary\"\r\n                  paragraph={true}>\r\n                {this.getUserListHeader()}\r\n              </Typography>\r\n              {userListItems}\r\n            </List>\r\n            <Divider />\r\n            <Typography color=\"textSecondary\">\r\n              {this.getAuthors()}\r\n            </Typography>\r\n          </CardContent>\r\n        </Collapse>\r\n        <CardActions>\r\n          {gameActionButton}\r\n          <Button\r\n              onClick={() => this.deleteSession()}\r\n              disabled={!this.isGameCreator()}>\r\n            Delete\r\n          </Button>\r\n        </CardActions>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\n","import AddGameButton from './AddGameButton.js';\r\nimport FilterSelect from './FilterSelect.js';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport GameCard from './GameCard.js';\r\nimport React, { Component } from 'react';\r\nimport firebase from 'firebase';\r\nimport gameData from './gameData.js';\r\n\r\nconst cardStyle = {\r\n  marginTop: 14,\r\n};\r\n\r\nexport const FILTER_TYPE = Object.freeze({\r\n  ALL_GAMES: 0,\r\n  MY_GAMES: 1,\r\n  GAMES_WITH_SPACE: 2,\r\n  GAMES_I_AM_IN: 3,\r\n});\r\n\r\nexport default class WaitingRoom extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n        sessions: null,\r\n        filterType: FILTER_TYPE.MY_GAMES,\r\n    };\r\n  }\r\n\r\n  componentWillMount() {\r\n    var sessionsDatabaseRef = firebase.database().ref(\"/session-metadata\");\r\n    sessionsDatabaseRef.on(\"value\", (snapshot) => {\r\n      var sessionsSnapshot = snapshot.val();\r\n      if (sessionsSnapshot === null) {\r\n        this.setState({ sessions: [] });\r\n        return;\r\n      }\r\n\r\n      var sessions = Object.keys(sessionsSnapshot).map((id) => {\r\n        return {\r\n          id: id,\r\n          type: sessionsSnapshot[id].type,\r\n          users: sessionsSnapshot[id].users,\r\n          creator: sessionsSnapshot[id].creator,\r\n          timestamp: sessionsSnapshot[id].timestamp,\r\n        };\r\n      });\r\n      this.setState({ sessions: sessions });\r\n    });\r\n\r\n    document.title = \"Studio Games!\"\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    firebase.database().ref(\"/session-metadata\").off();\r\n  }\r\n\r\n  onFilterGames(filterType) {\r\n    this.setState({ filterType });\r\n  }\r\n\r\n  getFilterFunction() {\r\n    var my_uid = firebase.auth().currentUser.uid;\r\n\r\n    switch (this.state.filterType) {\r\n      case FILTER_TYPE.ALL_GAMES:\r\n        return (session) => true; // no-op\r\n      case FILTER_TYPE.MY_GAMES:\r\n        return (session) => session.creator === my_uid;\r\n      case FILTER_TYPE.GAMES_WITH_SPACE:\r\n        return (session) => {\r\n          return session.type in gameData &&\r\n              session.users.length < gameData[session.type].maxUsers;\r\n        }\r\n      case FILTER_TYPE.GAMES_I_AM_IN:\r\n        return (session) => session.users.indexOf(my_uid) >= 0;\r\n      default: // Log an error.\r\n        console.log(\"There's been an Error\");\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.state.sessions === null) {\r\n      return (\r\n        <center style={cardStyle}>\r\n          <CircularProgress size={56} />\r\n        </center>\r\n      )\r\n    }\r\n\r\n    var sessions = this.state.sessions.filter(this.getFilterFunction());\r\n\r\n    // Sort by timestamp (in reverse).\r\n    sessions.sort((a, b) => {\r\n      return b.timestamp - a.timestamp;\r\n    });\r\n\r\n    var cards = sessions.map((session) => (\r\n      <GameCard\r\n          key={session.id}\r\n          style={cardStyle}\r\n          session={session} />\r\n    ));\r\n\r\n    return (\r\n      <div >\r\n        <div style={{display:'flex', justifyContent: 'space-between', margin: '20px'}}>\r\n          <FilterSelect \r\n                style={cardStyle}\r\n                filterType={this.state.filterType}\r\n                onFilterGames={(f)=>this.onFilterGames(f)} />\r\n          <AddGameButton style={cardStyle} />\r\n        </div>\r\n        {cards}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import CircularProgress from '@material-ui/core/CircularProgress';\r\nimport DataViewer from './DataViewer.js';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport Header from './Header.js'\r\nimport PersonAdd from '@material-ui/icons/PersonAdd';\r\nimport React, { Component } from 'react';\r\nimport UnknownGameType from './UnknownGameType.js';\r\nimport WaitingRoom from './WaitingRoom.js';\r\nimport firebase from 'firebase';\r\nimport gameData from './gameData.js';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport { UserApiConfig } from './UserApi.js';\r\n\r\nconst buttonStyle = {\r\n  width: 56,\r\n  height: 56,\r\n  marginTop: 56,\r\n};\r\n\r\nexport default class App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      authIsLoading: true,\r\n      userApiIsLoading: true,\r\n      user: null\r\n    };\r\n  }\r\n\r\n  componentWillMount() {\r\n    // Some browser-based IDEs cleverly reload the app without destroying the\r\n    // Firebase instance. Check for this case to avoid initializing the same\r\n    // application twice (which throws an error).\r\n    if (firebase.apps.length === 0) {\r\n      firebase.initializeApp({\r\n        apiKey: \"AIzaSyCJPYgNY-rgkZul563iUipYrFKD7BLt_HA\",\r\n        authDomain: \"studio-multiplayer-game.firebaseapp.com\",\r\n        databaseURL: \"https://studio-multiplayer-game.firebaseio.com\",\r\n        projectId: \"studio-multiplayer-game\",\r\n        storageBucket: \"studio-multiplayer-game.appspot.com\",\r\n        messagingSenderId: \"953054375831\"\r\n      });\r\n    }\r\n\r\n    firebase.auth().onAuthStateChanged(\r\n        (user) => this.setState({\r\n          authIsLoading: false,\r\n          user: user\r\n        }));\r\n\r\n    UserApiConfig.startListeningForChanges().then(\r\n        () => this.setState({ userApiIsLoading: false }));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    UserApiConfig.stopListeningForChanges();\r\n  }\r\n\r\n  signIn() {\r\n    this.setState({ authIsLoading: true });\r\n    var provider = new firebase.auth.GoogleAuthProvider();\r\n    firebase.auth().signInWithRedirect(provider);\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.authIsLoading && this.state.user === null) {\r\n      return (\r\n        <center>\r\n          <Fab\r\n              style={buttonStyle}\r\n              onClick={() => this.signIn()}>\r\n            <PersonAdd />\r\n          </Fab>\r\n        </center>\r\n      );\r\n    } else if (this.state.authIsLoading || this.state.userApiIsLoading) {\r\n      return (\r\n        <center>\r\n          <CircularProgress\r\n              style={buttonStyle}\r\n              size={56} />\r\n        </center>\r\n      );\r\n    } else {\r\n      var gameRoutes = Object.keys(gameData).map((type) => (\r\n        <Route\r\n            key={type}\r\n            path={\"/\" + type + \"/:id\"}\r\n            component={gameData[type].component} />\r\n      ));\r\n      return (\r\n        <div>\r\n          <Header />\r\n          <Switch>\r\n            <Route path=\"/\" component={WaitingRoom} exact />\r\n            <Route path=\"/dataViewer\" component={DataViewer} exact />\r\n            {gameRoutes}\r\n            <Route\r\n                path={\"/:type/:id\"}\r\n                component={UnknownGameType} exact />\r\n          </Switch>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import './index.css';\r\nimport App from './App';\r\n// TODO(jrt): Migrate to newer Material UI theme provider after migrating all\r\n// game components.\r\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport registerServiceWorker from './registerServiceWorker';\r\nimport { BrowserRouter } from 'react-router-dom'\r\n\r\nconst WrappedApp = () => (\r\n  <BrowserRouter>\r\n    <MuiThemeProvider>\r\n      <App />\r\n    </MuiThemeProvider>\r\n  </BrowserRouter>\r\n);\r\n\r\nReactDOM.render(<WrappedApp />, document.getElementById('root'));\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}