(this["webpackJsonpstudio-multiplayer-game"]=this["webpackJsonpstudio-multiplayer-game"]||[]).push([[0],{177:function(e,t,a){},266:function(e,t,a){e.exports=a.p+"static/media/Logo.4454a02b.png"},267:function(e,t,a){e.exports=a.p+"static/media/Whisper icon.1687bbe5.png"},272:function(e,t,a){e.exports=a.p+"static/media/cross.0ee69f12.png"},292:function(e,t,a){e.exports=a(651)},293:function(e,t,a){},561:function(e,t,a){},582:function(e,t,a){},587:function(e,t,a){},588:function(e,t,a){},591:function(e,t,a){},592:function(e,t,a){},593:function(e,t,a){},651:function(e,t,a){"use strict";a.r(t);a(293);var s=a(3),n=a(4),i=a(6),o=a(5),r=a(7),l=a(53),c=a.n(l),u=a(124),h=a.n(u),m=a(263),p=a.n(m),d=a(265),f=a.n(d),y=a(264),v=a.n(y),g=a(35),b=a.n(g),k=a(123),E=a.n(k),w=a(0),x=a.n(w),C=a(261),S=a.n(C),O=a(9),j=a.n(O),L=Object.freeze({UNINITIALIZED:0,LOADING:1,LOADED:2}),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={db_state:L.UNINITIALIZED,data:null},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"handleExpanded",value:function(e){var t=this;if(e)switch(this.state.db_state){case L.UNINITIALIZED:this.setState({db_state:L.LOADING}),j.a.database().ref("/").once("value",(function(e){t.setState({db_state:L.LOADED,data:e.val()})}));break;case L.LOADING:case L.LOADED:break;default:console.error("Invalid DB state",this.state.db_state)}}},{key:"renderDatabaseViewer",value:function(){switch(this.state.db_state){case L.UNINITIALIZED:case L.LOADING:return x.a.createElement(b.a,null,"Loading...");case L.LOADED:return x.a.createElement(S.a,{name:"/",collapsed:1,src:this.state.data});default:console.error("Invalid DB state",this.state.db_state)}}},{key:"render",value:function(){var e=this;return x.a.createElement(E.a,{className:"Container"},x.a.createElement(p.a,{style:{boxShadow:"none"},disabled:this.props.disabled,onChange:function(t,a){return e.handleExpanded(a)}},x.a.createElement(v.a,{style:{paddingLeft:0},expandIcon:x.a.createElement(h.a,null)},x.a.createElement(b.a,null,"Expand to see JSON view of entire database")),x.a.createElement(f.a,{style:{display:"block",paddingLeft:0,textAlign:"left"}},this.renderDatabaseViewer())))}}]),t}(w.Component),R=a(288),N=a.n(R),D=a(273),U=a.n(D),P=a(26),T=a.n(P),M=a(276),G=a.n(M),A=a(100),_=a.n(A),W=a(101),B=a.n(W),F=a(64),H=a.n(F),K=a(84),Y=a.n(K),q=a(275),V=a.n(q),J=a(42),z=a.n(J),X=a(274),Q=a.n(X),Z=a(63),$=a.n(Z),ee=function(e){function t(e){var a;return Object(s.a)(this,t),a=Object(i.a)(this,Object(o.a)(t).call(this,e)),document.title=a.getSessionTitle(),a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"onSessionDataChanged",value:function(e){}},{key:"onSessionMetadataChanged",value:function(e){}},{key:"getSessionDatabaseRef",value:function(){return j.a.database().ref("/session").child(this.getSessionId())}},{key:"getSessionMetadataDatabaseRef",value:function(){return j.a.database().ref("/session-metadata").child(this.getSessionId())}},{key:"getSessionId",value:function(){if(this.props&&this.props.match&&this.props.match.params&&this.props.match.params.id)return this.props.match.params.id;if(this.props&&this.props.location&&this.props.location.state&&this.props.location.state.id)return this.props.location.state.id;throw new Error("Unable to get session ID from URL nor browser history")}},{key:"getSessionUserIds",value:function(){return this.state&&this.state.metadata&&this.state.metadata.users?this.state.metadata.users:this.props&&this.props.location&&this.props.location.state&&this.props.location.state.users?this.props.location.state.users:(console.warn("Session user list not yet available, using empty list"),[])}},{key:"getSessionCreatorUserId",value:function(){return this.state&&this.state.metadata&&this.state.metadata.creator?this.state.metadata.creator:this.props&&this.props.location&&this.props.location.state&&this.props.location.state.creator?this.props.location.state.creator:(console.warn("Session creator ID not yet available, using empty string"),"")}},{key:"getSessionTitle",value:function(){return this.state&&this.state.metadata&&this.state.metadata.title?this.state.metadata.title:this.props&&this.props.location&&this.props.location.state&&this.props.location.state.title?this.props.location.state.title:"Studio Games!"}},{key:"getMyUserId",value:function(){if(j.a.auth()&&j.a.auth().currentUser&&j.a.auth().currentUser.uid)return j.a.auth().currentUser.uid;throw new Error("Unable to get current user ID")}},{key:"componentDidMount",value:function(){var e=this;this.getSessionDatabaseRef().on("value",(function(t){null!==t.val()&&e.onSessionDataChanged(t.val())})),this.getSessionMetadataDatabaseRef().on("value",(function(t){var a=t.val();if(null!==a){var s={creator:a.creator,users:a.users};a.type in Da&&(s.title=Da[a.type].title);var n=e.state;n.metadata=s,e.setState(n),e.onSessionMetadataChanged(a)}}))}},{key:"componentDidUpdate",value:function(e,t,a){document.title=this.getSessionTitle()}},{key:"componentWillUnmount",value:function(){this.getSessionDatabaseRef().off(),this.getSessionMetadataDatabaseRef().off()}}]),t}(x.a.Component),te=a(125),ae=a.n(te),se=function(){function e(){Object(s.a)(this,e)}return Object(n.a)(e,null,[{key:"hasUid",value:function(e){return null===ne||e in ne}},{key:"getName",value:function(t){return e.hasUid(t)?ne[t].name:(console.warn("No user metadata found for UID",t),null)}},{key:"getPhotoUrl",value:function(t){return e.hasUid(t)?ne[t].photoURL:(console.warn("No user metadata found for UID",t),null)}},{key:"getLastSignIn",value:function(t){return e.hasUid(t)?new Date(ne[t].lastSignIn):(console.warn("No user metadata found for UID",t),null)}}]),e}(),ne=null,ie=function(){function e(){Object(s.a)(this,e)}return Object(n.a)(e,null,[{key:"startListeningForChanges",value:function(){ne=null;var e=j.a.database().ref("/user");return new Promise((function(t){e.on("value",(function(e){null===ne&&t(),ne=null===e.val()?{}:e.val()}))}))}},{key:"stopListeningForChanges",value:function(){j.a.database().ref("/user").off()}}]),e}(),oe=a(54),re=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={chats:[],input:""},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"onSessionDataChanged",value:function(e){var t=Object.keys(e).map((function(t){return{id:t,message:e[t].message,timestamp:e[t].timestamp,user:e[t].user}}));t.sort((function(e,t){return t.timestamp-e.timestamp})),this.setState({chats:t})}},{key:"handleKeyEvent",value:function(e){if("Enter"===e&&this.state.input.length>0){var t={message:this.state.input,timestamp:j.a.database.ServerValue.TIMESTAMP,user:this.getMyUserId()};this.getSessionDatabaseRef().push(t,(function(e){e&&console.error("Error storing session metadata",e)})),this.setState({input:""})}}},{key:"render",value:function(){var e=this,t=this.state.chats.slice(0,10).map((function(e,t){return x.a.createElement(oe.ListItem,{key:e.id,style:{opacity:(10-t)/10},disabled:!0,primaryText:se.getName(e.user),secondaryText:e.message,leftAvatar:x.a.createElement($.a,{src:se.getPhotoUrl(e.user)})})}));return x.a.createElement("div",{style:{margin:56}},x.a.createElement(ae.a,{name:"Chat message input",label:"Type your message and press enter",fullWidth:!0,onChange:function(t){return e.setState({input:t.target.value})},onKeyPress:function(t){return e.handleKeyEvent(t.key)},value:this.state.input}),x.a.createElement(oe.List,null,t))}}]),t}(ee),le=(a(177),function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(n.a)(t,[{key:"paddedSeconds",value:function(e){return e<10?"0"+e:e}},{key:"render",value:function(){return x.a.createElement("div",null,this.props.minutes,":",this.paddedSeconds(this.props.seconds))}}]),t}(x.a.Component)),ce=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this;return x.a.createElement("div",null,x.a.createElement("table",{className:"score"},x.a.createElement("caption",null,"ScoreBored"),x.a.createElement("tr",{className:"playersname"},x.a.createElement("th",null,"Player One:",this.props.PlayerOne),x.a.createElement("th",null,this.props.winOrLoss),x.a.createElement("th",null,"Player two:",this.props.PlayerTwo)),x.a.createElement("tr",{className:"playersc"},x.a.createElement("td",{className:"playerscore"},"Score:",this.props.p1s),x.a.createElement("td",null,"Time left:"),x.a.createElement("td",null,"Score:",this.props.p2s)),x.a.createElement("tr",null,x.a.createElement("td",null),x.a.createElement("td",null,x.a.createElement(le,{minutes:this.props.startTimemin,seconds:this.props.startTimesec})),x.a.createElement("td",null))),x.a.createElement("table",{id:"shop"},x.a.createElement("tr",null,x.a.createElement("th",null,"Items"),x.a.createElement("th",null,"price"),x.a.createElement("th",null,"attributes")),x.a.createElement("tr",null,x.a.createElement("td",null,x.a.createElement("button",{className:"bu",id:"Cursors",disabled:this.props.currentScore<50,onClick:function(){return e.props.multipleClicks(3,50)}},"Cursor")),x.a.createElement("td",null,"$50"),x.a.createElement("td",null,"produces 1 cookie per second")),x.a.createElement("tr",null,x.a.createElement("td",null,x.a.createElement("button",{className:"bu",id:"Grandmas",disabled:this.props.currentScore<100,onClick:function(){return e.props.multipleClicks(15,100)}},"Grandmas")),x.a.createElement("td",null,"$100"),x.a.createElement("td",null,"produces 5 cookies per second")),x.a.createElement("tr",null,x.a.createElement("td",null,x.a.createElement("button",{className:"bu",id:"Farms",disabled:this.props.currentScore<500,onClick:function(){return e.props.multipleClicks(30,500)}},"Farms")),x.a.createElement("td",null,"$500"),x.a.createElement("td",null,"produces 10 cookies per second")),x.a.createElement("tr",null,x.a.createElement("td",null,x.a.createElement("button",{className:"bu",id:"Factories",disabled:this.props.currentScore<1e3,onClick:function(){return e.props.multipleClicks(75,1e3)}},"Factories")),x.a.createElement("td",null,"$1000"),x.a.createElement("td",null,"produces 25 cookies per second")),x.a.createElement("tr",null,x.a.createElement("td",null,x.a.createElement("button",{className:"bu",id:"MegaFactory",disabled:this.props.currentScore<1e4,onClick:function(){return e.props.multipleClicks(300,1e4)}},"Mega Factory")),x.a.createElement("td",null,"$10000"),x.a.createElement("td",null,"produces 100 Cookies per second"))))}}]),t}(x.a.Component),ue=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return x.a.createElement("div",null,x.a.createElement("p",null,this.props.score),x.a.createElement("img",{alt:"",className:"cookie",src:"/games/cookieClicker/Cooky.png",onClick:this.props.clickHandler}),x.a.createElement("audio",{className:"music",id:"myAudio",controls:!0,autoplay:!0,loop:!0},x.a.createElement("source",{src:"/games/cookieClicker/win.mp3",type:"audio/mpeg"})))}}]),t}(x.a.Component),he=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return x.a.createElement("div",null,x.a.createElement("div",null,x.a.createElement("p",{className:"GOV"},"Game Over"),x.a.createElement("p",{className:"WOR"},this.props.winOrLoss)))}}]),t}(x.a.Component),me=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={hostScore:0,guestScore:0,hasGameStarted:!1,timelefts:0,timeleftm:0},a.getSessionDatabaseRef().update(a.state),a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"multipleClicks",value:function(e,t){if(this.getSessionCreatorUserId()===this.getMyUserId()){this.getSessionDatabaseRef().update({hostScore:this.state.hostScore-t});var a=this,s=setInterval((function(){0===a.state.timelefts&&a.state.timeleftm<=0&&clearInterval(s),a.getSessionDatabaseRef().update({hostScore:a.state.hostScore+e})}),3e3)}else{this.getSessionDatabaseRef().update({guestScore:this.state.guestScore-t});var n=this,i=setInterval((function(){0===n.state.timelefts&&n.state.timeleftm<=0&&clearInterval(i),n.getSessionDatabaseRef().update({guestScore:n.state.guestScore+e})}),3e3)}}},{key:"onSessionDataChanged",value:function(e){this.setState({hostScore:e.hostScore,guestScore:e.guestScore,hasGameStarted:e.hasGameStarted,timeleftm:e.timeleftm,timelefts:e.timelefts})}},{key:"updateScore",value:function(){this.getSessionCreatorUserId()===this.getMyUserId()?this.getSessionDatabaseRef().update({hostScore:this.state.hostScore+1}):this.getSessionDatabaseRef().update({guestScore:this.state.guestScore+1})}},{key:"winningOrLosing",value:function(){var e=null;return this.state.hostScore>this.state.guestScore?e=this.getSessionCreatorUserId():this.state.hostScore<this.state.guestScore&&(e=this.getSessionUserIds()[1]),null===e?"Tied":e===this.getMyUserId()?"Winning":"Losing"}},{key:"winOrLos",value:function(){var e=null;return this.state.hostScore>this.state.guestScore?e=this.getSessionCreatorUserId():this.state.hostScore<this.state.guestScore&&(e=this.getSessionUserIds()[1]),null===e?"Tied":e===this.getMyUserId()?"You win":"you lost"}},{key:"startGame",value:function(e){this.getSessionDatabaseRef().update({timeleftm:e,timelefts:0,hasGameStarted:!0});var t=this,a=setInterval((function(){0===t.state.timelefts?t.state.timeleftm<=0?clearInterval(a):(t.state.timelefts=59,t.state.timeleftm=t.state.timeleftm-1):t.state.timelefts=t.state.timelefts-1,t.getSessionDatabaseRef().update({timeleftm:t.state.timeleftm,timelefts:t.state.timelefts,hasGameStarted:!0})}),1e3)}},{key:"render",value:function(){var e=this;return this.state.hasGameStarted||this.getSessionCreatorUserId()!==this.getMyUserId()?this.state.hasGameStarted?this.state.hasGameStarted&&this.getSessionCreatorUserId()===this.getMyUserId()?0===this.state.timeleftm&&0===this.state.timelefts?x.a.createElement("div",null,x.a.createElement(he,{winOrLoss:this.winOrLos(),startTimemin:this.state.timeleftm,startTimesec:this.state.timelefts})):x.a.createElement("div",null,x.a.createElement(ce,{PlayerOne:se.getName(this.getSessionUserIds()[0]),PlayerTwo:se.getName(this.getSessionUserIds()[1]),p1s:this.state.hostScore,p2s:this.state.guestScore,winOrLoss:this.winningOrLosing(),startTimemin:this.state.timeleftm,startTimesec:this.state.timelefts,currentScore:this.state.hostScore,multipleClicks:function(t,a){return e.multipleClicks(t,a)}}),x.a.createElement(ue,{clickHandler:function(){return e.updateScore()},score:this.state.hostScore})):this.state.hasGameStarted&&this.getSessionCreatorUserId()!==this.getMyUserId()?0===this.state.timeleftm&&0===this.state.timelefts?x.a.createElement("div",null,x.a.createElement(he,{winOrLoss:this.winOrLos(),startTimemin:this.state.timeleftm,startTimesec:this.state.timelefts})):x.a.createElement("div",null,x.a.createElement(ce,{PlayerOne:se.getName(this.getSessionUserIds()[1]),PlayerTwo:se.getName(this.getSessionUserIds()[0]),p1s:this.state.guestScore,p2s:this.state.hostScore,winOrLoss:this.winningOrLosing(),startTimemin:this.state.timeleftm,startTimesec:this.state.timelefts,currentScore:this.state.guestScore,multipleClicks:function(t,a){return e.multipleClicks(t,a)}}),x.a.createElement(ue,{clickHandler:function(){return e.updateScore()},score:this.state.guestScore})):void 0:x.a.createElement("div",null,x.a.createElement("p",null,"Waiting for Host to start the game")):x.a.createElement("div",{className:"buttonholder"},x.a.createElement("button",{className:"stime",id:"fivem",onClick:function(){return e.startGame(1)}},"1 minuts"),x.a.createElement("button",{className:"stime",id:"fivem",onClick:function(){return e.startGame(5)}},"5 minuts"),x.a.createElement("button",{className:"stime",id:"tenm",onClick:function(){return e.startGame(10)}},"10 minuts"),x.a.createElement("button",{className:"stime",id:"fithteenm",onClick:function(){return e.startGame(15)}},"15 minuts"))}}]),t}(ee),pe=(a(561),a(266)),de=a.n(pe),fe=a(267),ye=a.n(fe),ve=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).getSessionDatabaseRef().set({user_id:se.getName(a.getMyUserId()),currentPlayer:"string",statements:["statement 1","statement 2","statement 3"],truth:0,guess:null,isLandingPage:!0,isFormPage:!1,isPickAnswerForm:!1,isWaitPage:!1}),a.state={user_id:se.getName(a.getMyUserId()),currentPlayer:"string",statements:["statement 1","statement 2","statement 3"],truth:0,guess:null,isLandingPage:!0,isFormPage:!1,isPickAnswerForm:!1,isWaitPage:!1},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"onSessionDataChanged",value:function(e){"string"!==e.currentPlayer&&(this.state.isLandingPage?e.currentPlayer===this.getMyUserId()?this.setState({isLandingPage:!1,isFormPage:!0}):this.setState({isLandingPage:!1,isWaitPage:!0}):(this.state.isFormPage||this.state.isWaitPage)&&this.setState({isFormPage:!1,isWaitPage:!1,isPickAnswerForm:!0}))}},{key:"handleButtonClick",value:function(e){this.getSessionDatabaseRef().set({guess:e}),this.setState({guess:e})}},{key:"shouldShowCorrect",value:function(){return console.log("truth",this.state.truth,typeof this.state.truth),console.log("guess",this.state.guess,typeof this.state.guess),null!==this.state.guess&&(console.log("should show correct:",this.state.truth===this.state.guess),this.state.truth===this.state.guess)}},{key:"shouldShowIncorrect",value:function(){return null!==this.state.guess&&(console.log("should show incorrect:",this.state.truth!==this.state.guess),this.state.truth!==this.state.guess)}},{key:"submitTea",value:function(){this.setState({currentPlayer:this.getMyUserId(),isLandingPage:!1,isFormPage:!0}),this.getSessionDatabaseRef().set({currentPlayer:this.getMyUserId()})}},{key:"landingPageRender",value:function(){var e=this;return x.a.createElement("div",{class:"main"},x.a.createElement("img",{alt:"",id:"logo",src:de.a}),x.a.createElement("br",null),x.a.createElement(T.a,{variant:"outlined",color:"inherit",id:"NewSession",onClick:function(){return e.submitTea()}},"Get Gossiping"))}},{key:"pickAnAnswerRender",value:function(){var e=this;return x.a.createElement("div",{class:"main3"},x.a.createElement("div",{className:"AnswerWrapper"},x.a.createElement("div",{className:this.shouldShowCorrect()?"Shown":"Hidden"},"Correct"),x.a.createElement("div",{className:this.shouldShowIncorrect()?"Shown":"Hidden"},"Incorrect")),x.a.createElement(T.a,{variant:"outlined",id:"0",onClick:function(){return e.handleButtonClick(0)}},this.state.statements[0]),x.a.createElement("br",null),x.a.createElement(T.a,{variant:"outlined",id:"1",onClick:function(){return e.handleButtonClick(1)}},this.state.statements[1]),x.a.createElement("br",null),x.a.createElement(T.a,{variant:"outlined",id:"2",onClick:function(){return e.handleButtonClick(2)}},this.state.statements[2]),x.a.createElement("br",null))}},{key:"handleFormSubmit",value:function(e){this.getSessionDatabaseRef().set(this.state)}},{key:"handleFormChange",value:function(e,t){var a=this.state.statements;a[e]=t.target.value,this.setState({statements:a})}},{key:"handleLieChange",value:function(e){console.log("changing lie val",e.target.value),this.setState({truth:parseInt(e.target.value,10)})}},{key:"submitAQuestionRender",value:function(){var e=this;return x.a.createElement("div",{class:"main2"},x.a.createElement("img",{alt:"",id:"Whisper",src:ye.a}),x.a.createElement("form",{onSubmit:function(t){return e.handleFormSubmit(t)}},x.a.createElement("label",{id:"input0"},"Truth or Lie #0"),x.a.createElement("br",null),x.a.createElement("input",{class:"flexform",type:"text",value:this.state.statements[0],onChange:function(t){return e.handleFormChange(0,t)},required:!0}),x.a.createElement("br",null),x.a.createElement("label",{id:"input1"},"Truth or Lie #1"),x.a.createElement("br",null),x.a.createElement("input",{class:"flexform",type:"text",value:this.state.statements[1],onChange:function(t){return e.handleFormChange(1,t)},required:!0}),x.a.createElement("br",null),x.a.createElement("label",{id:"input2"},"Truth or Lie #2"),x.a.createElement("br",null),x.a.createElement("input",{class:"flexform",type:"text",value:this.state.statements[2],onChange:function(t){return e.handleFormChange(2,t)},required:!0}),x.a.createElement("br",null),x.a.createElement("label",{id:"truthIdx"},"Index for Truth Statement"),x.a.createElement("br",null),x.a.createElement("input",{class:"flexform",type:"text",value:this.state.truth,onChange:function(t){return e.handleLieChange(t)},maxLength:"1",required:!0}),x.a.createElement("br",null),x.a.createElement("input",{type:"submit",value:"Submit"})))}},{key:"waitPageRender",value:function(){return x.a.createElement("div",null,"Wait....")}},{key:"render",value:function(){return this.state.isLandingPage?this.landingPageRender():this.state.isFormPage?this.submitAQuestionRender():this.state.isPickAnswerForm?this.pickAnAnswerRender():this.state.isWaitPage?this.waitPageRender():void 0}}]),t}(ee),ge=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return x.a.createElement("div",null,"Day")}}]),t}(w.Component),be=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={buttonsDisabled:!1},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"onButtonClick",value:function(e){this.setState({buttonsDisabled:!0}),this.props.handleKill(e.target.id)}},{key:"render",value:function(){var e,t=this,a=this.props.players;if("Mafia"===this.props.currentPlayer.role.name){for(var s=[],n=0;n<a.length;n++){var i=a[n].id;s.push(x.a.createElement("li",null,x.a.createElement("button",{className:"color",id:i,onClick:function(e){return t.onButtonClick(e)},disabled:this.state.buttonsDisabled}," ",se.getName(i)," ")))}e=x.a.createElement("div",null,x.a.createElement("ul",null,s))}else e=x.a.createElement("div",null,"Sleep ._.");return x.a.createElement("div",null,e)}}]),t}(w.Component),ke=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){console.log(this.props.killedPlayers);var e=this.props.killedPlayers.map((function(e){return x.a.createElement("li",null,se.getName(e))})),t=0===this.props.killedPlayers.length?"No one was murdered":"Someone was murdered:";return x.a.createElement("div",null,t,x.a.createElement("ul",null,e))}}]),t}(w.Component),Ee={Mafia:{name:"Mafia",description:"Kill all the innocents and police force to win."},Citizen:{name:"Citizen",description:"Work together with the police to take down the crime group."},Police:{name:"Detective",description:"Investigate people to find who is a Mafia"},Doctors:{name:"Doctor",description:"Keep the Innocent alive"},Specate:{name:"Specator"}},we=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={time:0,phase:0,players:[],killedPlayers:[]},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"handleKill",value:function(e,t){var a=this.state.killedPlayers.concat([t]);this.setDataVar(e,"killedPlayers",a),console.log(t)}},{key:"findMyPlayer",value:function(){for(var e=j.a.auth().currentUser.uid,t=0;t<this.state.players.length;t++){var a=this.state.players[t];if(a.id===e)return a}return null}},{key:"shuffle",value:function(e){for(var t,a,s=e.length;0!==s;)a=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[a],e[a]=t;return e}},{key:"advancePhase",value:function(e){var t=this;e.child("phase").once("value",(function(a){var s=a.val();0===s?s=1:1===s?s=2:2===s?s=3:3===s?s=4:4===s&&(s=0),t.setDataVar(e,"phase",s)}))}},{key:"setDataVar",value:function(e,t,a){e.child(t).set(a,(function(e){e&&console.error("Error storing session metadata",e)}))}},{key:"getDataVar",value:function(e,t){var a;return e.child(t).once("value",(function(e){a=e.val()})),a}},{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.id,a=j.a.database().ref("/session/"+t);console.log(a);var s=this.props.location.state.creator,n=j.a.auth().currentUser.uid,i="/session-metadata/"+t+"/users/",o=j.a.database().ref(i),r=[];if(n===s){o.once("value",(function(t){var s=t.val(),n=s.length,i=Math.ceil(n/3);e.shuffle(s);for(var o=0;o<i;o++)r.push({id:s[o],role:Ee.Mafia});for(o=i;o<n;o++)r.push({id:s[o],role:Ee.Citizen});e.setDataVar(a,"players",r)})),this.setDataVar(a,"phase",0),this.setDataVar(a,"time",5);var l=5;this.interval=setInterval((function(){--l<0&&(l=10,e.advancePhase(a)),e.setDataVar(a,"time",l)}),1e3)}a.child("time").on("value",(function(t){e.setState({time:t.val()})})),a.child("phase").on("value",(function(t){e.setState({phase:t.val()})})),a.child("players").on("value",(function(t){e.setState({players:t.val()})})),a.child("killedPlayers").on("value",(function(t){e.setState({killedPlayers:t.val()})}))}},{key:"render",value:function(){var e,t=this,a=this.findMyPlayer(),s=j.a.database().ref("/session/"+this.props.match.params.id);return null==a?x.a.createElement("div",null," Game has started "):(0===this.state.phase?e=x.a.createElement(ge,{players:this.state.players,currentPlayer:a}):1===this.state.phase?e=x.a.createElement(be,{players:this.state.players,currentPlayer:a,handleKill:function(e){return t.handleKill(s,e)}}):2===this.state.phase&&(e=x.a.createElement(ke,{killedPlayers:this.getDataVar(s,"killedPlayers")})),x.a.createElement("div",{className:"mafia"},x.a.createElement("p",null," ",this.state.time," "),x.a.createElement("p",null," ",a.role.name," "),e))}}]),t}(w.Component),xe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={answer:"",answer_uid:"",start:!1,your_answer:"",your_uid:""},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.id,a=j.a.database().ref("/session/"+t),s=j.a.auth().currentUser.uid;this.setState({your_uid:s}),j.a.database().ref("/session/"+t+"/players/"+s).set(!0,(function(e){e&&console.error("Error storing session metadata",e)})),a.on("value",(function(t){var a=t.val();null!==a&&(console.log("sessionSnapshot"),console.log(a),Object.keys(a.players).length>1&&e.setState({start:!0}),"answer"in a&&e.setState({answer:a.answer.value,answer_uid:a.answer.uid}))}))}},{key:"componentWillUnmount",value:function(){var e=this.props.match.params.id;j.a.database().ref("/session/"+e).off()}},{key:"handleAnswerText",value:function(e){this.setState({your_answer:e.target.value})}},{key:"submitAnswer",value:function(e){var t=this.props.match.params.id;j.a.database().ref("/session/"+t+"/answer").set({value:this.state.your_answer,uid:this.state.your_uid})}},{key:"render",value:function(){return this.state.start?""===this.state.answer_uid?x.a.createElement("div",null,x.a.createElement("h1",null,"7 X 9"),x.a.createElement(ae.a,{name:"Multiplication input",onChange:this.handleAnswerText.bind(this)}),x.a.createElement(T.a,{style:{marginLeft:10},variant:"contained",onClick:this.submitAnswer.bind(this)},"Submit")):(e=this.state.answer_uid===this.state.your_uid?"63"===this.state.answer?this.state.answer+" is correct. You Won!":this.state.answer+" is incorrect. You Lost!":"63"===this.state.answer?"Too slow. You Lost!":"Your opponent was wrong. You Won!",x.a.createElement("div",null,x.a.createElement("h1",null,"Game Over"),x.a.createElement("h1",null,e))):x.a.createElement("div",null,x.a.createElement("h1",null,"Waiting for opponent"),x.a.createElement(c.a,{size:60}));var e}}]),t}(w.Component),Ce=a(36),Se=a.n(Ce),Oe=a(83),je=a.n(Oe),Le=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={playerOne:"",playerOneHealth:0,playerOneTrainer:"",playerTwo:"",playerTwoHealth:0,playerTwoTrainer:""},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.id;this.sessionDatabaseRef=j.a.database().ref("/session/"+t);var a=j.a.auth().currentUser.uid;this.sessionDatabaseRef.on("value",(function(t){var s=t.val();null!==s&&(s.playerOne?s.playerTwo||a===s.playerOne||e.sessionDatabaseRef.update({playerTwo:a}):e.sessionDatabaseRef.update({playerOne:a}),e.setState({playerOne:s.playerOne,playerOneHealth:s.playerOneHealth,playerTwo:s.playerTwo,playerTwoHealth:s.playerTwoHealth}))}))}},{key:"randomNumber",value:function(){return Math.floor(25*Math.random())+5}},{key:"playerOneAttack",value:function(){this.sessionDatabaseRef.update({playerTwoHealth:this.state.playerTwoHealth-this.randomNumber()})}},{key:"playerTwoAttack",value:function(){this.sessionDatabaseRef.update({playerOneHealth:this.state.playerOneHealth-this.randomNumber()})}},{key:"gameReset",value:function(){this.sessionDatabaseRef.update({playerOneHealth:100}),this.sessionDatabaseRef.update({playerTwoHealth:100})}},{key:"runScene",value:function(){console.log("Scene is Running")}},{key:"checkWin",value:function(){}},{key:"render",value:function(){var e;return this.state.playerOneHealth<=0?(e=x.a.createElement("h1",null,se.getName(this.state.playerTwo)," Wins"),this.gameReset()):this.state.playerTwoHealth<=0&&(e=x.a.createElement("h1",null,se.getName(this.state.playerOne)," Wins"),this.gameReset()),x.a.createElement("div",{className:"pokemon"},x.a.createElement("div",{id:"mainTitle"},x.a.createElement("h1",null," Pokemon Universe! "),x.a.createElement(Se.a,{label:"Start/Reset",primary:!0,onClick:this.gameReset.bind(this)}),e),x.a.createElement("div",{className:"playerOne"},x.a.createElement("h2",null,"Player 1: ",se.getName(this.state.playerOne)),x.a.createElement(je.a,{src:se.getPhotoUrl(this.state.playerOne)}),x.a.createElement("h3",null," HP ",this.state.playerOneHealth," "),x.a.createElement("div",{className:"fixed-btns"},x.a.createElement(Se.a,{className:"Attack1",label:"Attack",onClick:this.playerOneAttack.bind(this)}),x.a.createElement(Se.a,{className:"Attack2",label:"Run",onClick:this.gameReset.bind(this)}),x.a.createElement(Se.a,{className:"Attack3",label:"random1"}),x.a.createElement(Se.a,{className:"Attack4",label:"random2"}))),x.a.createElement("div",{id:"mainBox"},x.a.createElement("img",{alt:"",className:"battleImage",src:"https://raw.githubusercontent.com/ijgreenidge/studio-multiplayer-game/master/src/images/Background1.png"})),x.a.createElement("div",{class:"playerTwo"},x.a.createElement("div",{id:"playerInfo2"},x.a.createElement("h2",null,"Player 2: ",se.getName(this.state.playerTwo)),x.a.createElement("h3",null," HP ",this.state.playerTwoHealth," "),x.a.createElement(je.a,{src:se.getPhotoUrl(this.state.playerTwo)})),x.a.createElement("div",{className:"fixed-btns"},x.a.createElement(Se.a,{className:"Attack1",label:"Attack",onClick:this.playerTwoAttack.bind(this)}),x.a.createElement(Se.a,{className:"Attack2",label:"Run",onClick:this.gameReset.bind(this)}),x.a.createElement(Se.a,{className:"Attack3",label:"random1"}),x.a.createElement(Se.a,{className:"Attack4",label:"random2"}))))}}]),t}(w.Component),Ie=500,Re=500,Ne=20,De=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).user=j.a.auth().currentUser.uid,a.isCreator=a.user===e.location.state.creator,a.session=j.a.database().ref("/session/".concat(e.location.state.id)),a.isCreator?a.player=a.session.child("left"):a.player=a.session.child("right"),a.ball=a.session.child("ball"),a.state={winner:!1,started:!1},a.started=a.session.child("started"),a.started.on("value",(function(e){e.val()&&a.onGameStarted()})),a.winner=a.session.child("winner"),a.winner.on("value",(function(e){!1!==e.val()&&a.onGameOver()})),a.session.on("value",(function(e){a.setState(e.val())})),a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"onGameStarted",value:function(){var e=this;if(this.isCreator){var t={winner:!1,started:!0,ball:{x:230,y:230,dx:-3*Math.random()-2,dy:6*Math.random()-3},left:{userid:this.user,height:200},right:{height:200}};1===this.props.location.state.users.length?t.right.userid=0:this.props.location.state.users.forEach((function(a){a!==e.user&&(t.right.userid=a)})),this.session.set(t),this.setState(t),this.interval=setInterval((function(){return e.gameLoop()}),10)}}},{key:"gameLoop",value:function(){this.updateBall(),0===this.state.right.userid&&this.session.update({"right/height":this.state.ball.y+Ne-50})}},{key:"updateBall",value:function(){var e=this.state.ball,t=e.x,a=e.y,s=e.dx,n=e.dy;t<=20&&a+40>=this.state.left.height&&a<=this.state.left.height+100||t+40>=480&&a+40>=this.state.right.height&&a<=this.state.right.height+100?s=-s:t<=0?this.winner.set(this.state.right.userid):t+40>=Ie&&this.winner.set(this.state.left.userid),(a<=0||a+40>=Re)&&(n=-n),this.ball.update({x:t+s,y:a+n,dx:s,dy:n})}},{key:"onMouseMove",value:function(e){this.player.update({height:e.clientY-100})}},{key:"onGameOver",value:function(e){this.interval&&(clearInterval(this.interval),this.interval=!1),this.state.started&&this.started.set(!1)}},{key:"componentWillUnmount",value:function(){this.session.off(),this.started.off(),this.winner.off(),this.onGameOver()}},{key:"render",value:function(){var e=this;return!1===this.state.started?x.a.createElement("div",{style:{textAlign:"center"}},!1!==this.state.winner&&x.a.createElement("h1",null,"Game Over: ",0===this.state.winner?"Computer":se.getName(this.state.winner)," won"),x.a.createElement(T.a,{style:{margin:10},variant:"contained",onClick:function(){return e.started.set(!0)}},"Start Game"),x.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},x.a.createElement(b.a,{variant:"title"},"Users:"),this.props.location.state.users.map((function(e){return x.a.createElement($.a,{key:e,style:{marginLeft:10},src:se.getPhotoUrl(e)})})))):x.a.createElement("div",{style:{margin:"30px auto",position:"relative",backgroundColor:"black",width:Ie+"px",height:Re+"px",cursor:"none"},onMouseMove:function(t){return e.onMouseMove(t)}},x.a.createElement("div",{style:{position:"absolute",backgroundColor:"white",width:"10px",height:"100px",top:this.state.left.height+"px",left:"10px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:"white",width:"10px",height:"100px",top:this.state.right.height+"px",right:"10px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:"white",width:"40px",height:"40px",borderRadius:"20px",top:this.state.ball.y+"px",left:this.state.ball.x+"px"}}))}}]),t}(w.Component),Ue={Rock:{Rock:"Tie: Rock v Rock",Paper:"You lost: Paper covers Rock",Scissors:"You won! Rock beats Scissors"},Paper:{Rock:"You won! Paper covers Rock",Paper:"Tie: Paper v Paper",Scissors:"You lost: Scissors cuts Paper"},Scissors:{Rock:"You lost: Rock beats Scissors",Paper:"You won! Scissors cuts Paper",Scissors:"Tie: Scissors v Scissors"}},Pe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={choice:"",opponent:""},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"onSessionDataChanged",value:function(e){for(var t in e)t===this.getMyUserId()?this.setState({choice:e[t]}):this.setState({opponent:e[t]})}},{key:"select",value:function(e){var t={};t[this.getMyUserId()]=e,this.getSessionDatabaseRef().set(t,(function(e){e&&console.error("Error storing session metadata",e)})),this.setState({choice:e})}},{key:"render",value:function(){var e=this;return""===this.state.choice?x.a.createElement("div",null,x.a.createElement("h1",null,"Make your choice!"),x.a.createElement("div",null,x.a.createElement(T.a,{onClick:function(){return e.select("Rock")}},"Rock"),x.a.createElement(T.a,{color:"primary",onClick:function(){return e.select("Paper")}},"Paper"),x.a.createElement(T.a,{color:"secondary",onClick:function(){return e.select("Scissors")}},"Scissors"))):""===this.state.opponent?x.a.createElement("div",null,x.a.createElement("h1",null,"Waiting for opponent"),x.a.createElement(c.a,{size:60})):x.a.createElement("div",null,x.a.createElement("h1",null,"Game Over"),x.a.createElement("h2",null,Ue[this.state.choice][this.state.opponent]))}}]),t}(ee),Te=a(65),Me=a.n(Te),Ge=a(185),Ae=a(268),_e=a.n(Ae),We=a(269),Be=a.n(We),Fe=a(102),He=a.n(Fe),Ke=a(66),Ye=a.n(Ke),qe=a(183),Ve=a.n(qe),Je=a(186),ze=a.n(Je),Xe={root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},gridList:{width:500,height:450,overflowY:"auto"}},Qe={position:"fixed",right:24,bottom:24,marginBottom:0,zIndex:998},Ze=function(e){function t(e){var a;Object(s.a)(this,t);var n="/session/"+(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).props.match.params.id;return a.sessionRef=j.a.database().ref(n),a.state={posts:[],urlInput:"",userInput:"",open:!1},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"handleOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.sessionRef.push({user:this.state.userInput,name:"",image:this.state.urlInput}),this.setState({open:!1,input:""})}},{key:"handleCancel",value:function(){this.setState({open:!1,input:""})}},{key:"handleUserChange",value:function(e,t){this.setState({userInput:t})}},{key:"handleUrlChange",value:function(e,t){this.setState({urlInput:t})}},{key:"componentWillMount",value:function(){var e=this;this.sessionRef.on("value",(function(t){return e.setState({posts:t.val()?Object.values(t.val()):[]})}))}},{key:"componentWillUnmount",value:function(){}},{key:"handleKeyEvent",value:function(e){}},{key:"render",value:function(){var e=this,t=[x.a.createElement(Ye.a,{label:"POST",primary:!0,onClick:function(){return e.handleClose()}}),x.a.createElement(Ye.a,{label:"CANCEL",secondary:!0,onClick:function(){return e.handleCancel()}})];return x.a.createElement("div",{className:"spark",style:{margin:56}},x.a.createElement(He.a,{title:"Paste your url...",actions:t,modal:!1,open:this.state.open},x.a.createElement(Me.a,{onChange:function(t,a){return e.handleUrlChange(t,a)},hintText:"Paste your url ",floatingLabelText:"Photo url "}),x.a.createElement(Me.a,{onChange:function(t,a){return e.handleUserChange(t,a)},hintText:"Enter your username",floatingLabelText:"Username"})),x.a.createElement(Ge.GridList,{cellHeight:"auto",style:Xe.gridList},this.state.posts.map((function(e){return x.a.createElement(Ge.GridTile,{title:e.name},x.a.createElement("img",{alt:"",src:e.image}))}))),x.a.createElement("div",{class:"blurb"},x.a.createElement("h1",null,"Spark"),x.a.createElement("p",null,"Spark is a modern photo-sharing app aimed at connecting you with the things you cherish and care about---in our case, it was cats. It is a combination of our favorite social media apps: the roasting of black Twitter, the stalking of Instagram for \u201creliable\u201d ads, and organizing a life you\u2019ll never have on Pinterest. It consists of a platform to share photos, and a bar that always tells you who of the people you follow is currently online. It is an innovative app that allows you to---"),x.a.createElement("p",null," M\u2019baku: Are you done?")),x.a.createElement("div",{class:"list"},x.a.createElement(oe.List,null,x.a.createElement(Ve.a,null,"Currently online are..."),x.a.createElement(oe.ListItem,{primaryText:"Ramata Williams Bah",leftAvatar:x.a.createElement(je.a,{src:"https://i.pinimg.com/236x/12/e4/36/12e436feb149808f974bfdb9a61c4eef--amazing-sketches-instagram-fashion.jpg"}),rightIcon:x.a.createElement(ze.a,null)}),x.a.createElement(oe.ListItem,{primaryText:"Andrea Cajamarca",leftAvatar:x.a.createElement(je.a,{src:"https://www.toonpool.com/user/4550/files/salma_hayek_721035.jpg"}),rightIcon:x.a.createElement(ze.a,null)}))),x.a.createElement(_e.a,{secondary:!0,style:Qe,onClick:function(){return e.handleOpen()}},x.a.createElement(Be.a,null)))}}]),t}(w.Component),$e=" ",et="X",tt="0",at=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={cellState:new Array(9).fill($e),currentUser:a.getSessionCreatorUserId()},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"onSessionDataChanged",value:function(e){this.setState({cellState:e.cell_state,currentUser:e.current_user})}},{key:"isMyTurn",value:function(){return this.state.currentUser===this.getMyUserId()}},{key:"getMyCellState",value:function(){return this.getSessionCreatorUserId()===this.getMyUserId()?et:tt}},{key:"getOtherUser",value:function(){var e=this;return this.getSessionUserIds().find((function(t){return t!==e.getMyUserId()}))}},{key:"playTurn",value:function(e){var t=this.state.cellState.slice();t[e]=this.getMyCellState();var a={cell_state:t,current_user:this.getOtherUser()};this.getSessionDatabaseRef().set(a,(function(e){e&&console.error("Error updating TicTacToe state",e)}))}},{key:"getWinner",value:function(){var e=this,t=function(t){var a=e.state.cellState,s=function(e){return e===t};return a.slice(0,3).every(s)||a.slice(3,6).every(s)||a.slice(6,9).every(s)||[a[0],a[3],a[6]].every(s)||[a[1],a[4],a[7]].every(s)||[a[2],a[5],a[8]].every(s)||[a[0],a[4],a[8]].every(s)||[a[2],a[4],a[6]].every(s)};return t(et)?et:t(tt)?tt:null}},{key:"render",value:function(){var e,t=this,a=se.getName(this.state.currentUser),s=this.getWinner();e=null!==s?s+" WINS!":this.state.cellState.every((function(e){return e!==$e}))?"Draw! Game over.":this.isMyTurn()?"It's YOUR turn, go!":"It's "+a+"'s turn, wait...";var n=null!==s||!this.isMyTurn(),i=this.state.cellState.map((function(e,a){return x.a.createElement(T.a,{key:a,variant:"outlined",style:{height:36},onClick:function(){return t.playTurn(a)},disabled:n||e!==$e},e)}));return x.a.createElement("center",null,x.a.createElement("h1",null,e),i.slice(0,3),x.a.createElement("br",null),i.slice(3,6),x.a.createElement("br",null),i.slice(6,9))}}]),t}(ee),st=a(188),nt=(a(582),function(e){function t(e){var a;Object(s.a)(this,t);var n={};return n[(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).getMyUserId()]=0,a.state=n,a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"onSessionDataChanged",value:function(e){this.setState(e)}},{key:"componentDidMount",value:function(){Object(st.a)(Object(o.a)(t.prototype),"componentDidMount",this).call(this),this.setDocumentKeyPressHandler()}},{key:"setDocumentKeyPressHandler",value:function(){var e=this;document.body.onkeyup=function(t){if(32===t.keyCode&&!e.gameOver()){var a=e.getMyUserId(),s=e.state[a]+1;e.getSessionDatabaseRef().child(a).set(s)}}}},{key:"gameOver",value:function(){return Math.abs(this.getSpaceBarDifference())>=25}},{key:"componentWillUnmount",value:function(){document.body.onkeyup=null,Object(st.a)(Object(o.a)(t.prototype),"componentWillUnmount",this).call(this)}},{key:"getSpaceBarDifference",value:function(){var e=this,t=this.getSessionUserIds().map((function(t){return e.state[t]}));return t[0]-t[1]}},{key:"getWinnerUserId",value:function(){var e=this.getSessionUserIds().map((function(e){return se.getName(e)}));return this.getSpaceBarDifference()<0?e[1]:e[0]}},{key:"onResetButtonClicked",value:function(){var e=this.getSessionUserIds(),t={};t[e[0]]=0,t[e[1]]=0,this.getSessionDatabaseRef().update(t)}},{key:"render",value:function(){var e=this,t="TBD",a=x.a.createElement("div",null);this.gameOver()&&(t=this.getWinnerUserId(),a=x.a.createElement("button",{onClick:function(){return e.onResetButtonClicked()}},"Reset"));var s=15*this.getSpaceBarDifference();return x.a.createElement("div",null,x.a.createElement("div",{className:"text-Cen"},x.a.createElement("h3",null,"HIT SPACE BAR AND WIN !!!!!"),x.a.createElement("br",null),x.a.createElement("h1",null,"Winner: ",t),x.a.createElement("br",null),x.a.createElement("div",null,a),x.a.createElement("br",null)),x.a.createElement("div",{className:"main"},x.a.createElement("div",{className:"ropeBorder"},x.a.createElement("div",{className:"rope ",style:{marginLeft:s}},x.a.createElement("div",{className:"marker"})))))}}]),t}(ee)),it=a(129),ot=[["Which ocean lies on the east coast of the United States?","Atlantic Ocean"],["What is the 5th president of the United States?","Donald Trump"],["Whos face is on a one dollor bill?","George Washignton"],["How many State in the USA?","50"],["What year was America found?","1600"],["What is the worlds largest mountain?","Mount Everest"],["How many great lakes are there?","5"],["What is the longest River in the US?","Missouri River"],["The biggest desert in the world is...","Sahara"],["How many Kindoms is the United Kindom comprised of?","4"],["Dry Ice is a Frozen form of which gas?","Carbon Dioxide"],["What is the longest river in the world?","Nile River"],["What is the largest body of water?","Pacific Ocean"],["What is the most popular country?","China"],["What is the capital of IceLand?","Reykjavik"],["What continent is the largest in terms of land?","Asia"],["What is the largest mountain range in the world?","Andes"],["What is the smallest country in the world?","Vatican City"],["What is the river that runs through Paris, France is called?","The Seine"],["What is the most common speaking language in the world?","English"],["What is the name of the household garget that South Karean people believe can kill you?","Electric fan"]],rt=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).handleOpen=function(e){a.setState({open:!0,choice:e}),console.log(e)},a.handleInsertQChange=function(e){a.setState({insertQ:e.target.value})},a.handleInsertAChange=function(e){a.setState({insertA:e.target.value})},a.handleSubmit=function(){var e=j.a.auth().currentUser.uid,t=a.state.insertA||"",s=a.state.insertQ||"",n=a.props.match.params.id,i=j.a.database().ref("/session/"+n);a.creator?i.child("question1").push({question:s,answer:t,uid:e}):i.child("question2").push({question:s,answer:t,uid:e})},a.handleClose=function(){var e=a.check(a.state.choice,a.creator?a.state.answer:a.state.answer2);if(console.log(e,a.state.choice,a.state.answer,a.state.answer2),e){var t=a.props.match.params.id,s=j.a.database().ref("/session/"+t);a.creator?s.child("tally1").set(a.state.tally1+1,(function(e){e&&console.error("Error storing session metadata",e)})):s.child("tally2").set(a.state.tally2+1,(function(e){e&&console.error("Error storing session metadata",e)})),a.setState({open:!1})}else a.setState({open:!1,answerIsCorrect:e})},a.reset=function(){a.setState({open:!1,tally1:0,tally2:0,answerIsCorrect:!1,hidden:!0,cUser:a.props.location.state.creator,winner:"",isGameFinished:!1})},a.handleChange=function(e){return function(e){a.creator?a.setState({answer:e.target.value}):a.setState({answer2:e.target.value})}},a.state={choice:"",opponent:"",answer:"",answer2:"",tally1:0,tally2:0,answerIsCorrect:!1,hidden:!0,open:!1,cUser:a.props.location.state.creator,winner:"",isGameFinished:!1,question1:[],question2:[]};var n=j.a.auth().currentUser.uid;return a.creator=e.location.state.creator===n,a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.id;j.a.database().ref("/session/"+t).on("value",(function(t){var a=t.val();if(null!==a){var s=0,n=0,i=[],o=[];a.tally1&&(s=a.tally1),a.tally2&&(n=a.tally2),a.question1&&(i=Object.values(a.question1)),a.question2&&(o=Object.values(a.question2)),s+n===21?s>n?e.setState({winner:"Player 1 Wins!!",isGameFinished:!0}):e.setState({winner:"Player 2 Wins!!",isGameFinished:!0}):e.setState({isGameFinished:!1}),e.setState({tally1:s,tally2:n,cUser:a.current_user,question1:i,question2:o})}}))}},{key:"sayMessage",value:function(){this.setState({message:ot})}},{key:"toggleHidden",value:function(){this.setState({hidden:!this.state.hidden})}},{key:"check",value:function(e,t){return t===e[1]}},{key:"render",value:function(){var e=this,t=ot.map((function(t){return x.a.createElement("li",{className:"question",key:t,onClick:function(){return e.handleOpen(t)}}," ",t[0]," ")})),a=this.state.question1.map((function(t){return x.a.createElement("li",{className:"question",key:t,onClick:function(){return e.handleOpen([t.question,t.answer])}}," ",t.question," ")})),s=this.state.question2.map((function(t){return x.a.createElement("li",{className:"question",key:t,onClick:function(){return e.handleOpen([t.question,t.answer])}}," ",t.question," ")})),n=[x.a.createElement(Ye.a,{label:"Cancel",primary:!0,onClick:function(){console.log(1),e.handleClose()}}),x.a.createElement(Ye.a,{label:"Submit",primary:!0,keyboardFocused:!0,onClick:this.handleClose})];return x.a.createElement("div",{className:"twentyonequestion"},x.a.createElement("center",null,x.a.createElement("h1",null,"Welcome to 21 Questions!")),x.a.createElement("div",null,x.a.createElement(it.Tabs,{value:this.state.value,onChange:this.handleChange},x.a.createElement(it.Tab,{label:"Questions",value:"a"},x.a.createElement("div",null,x.a.createElement("ol",null,t,this.creator?s:a),x.a.createElement("div",{style:{flexDirection:"row"}},x.a.createElement("h1",null,"Tally"),x.a.createElement("hr",null),x.a.createElement("h2",{style:{marginLeft:"auto"}},"Player 1: ",this.state.tally1),x.a.createElement("h2",{style:{marginLeft:"auto"}},"Player 2: ",this.state.tally2)))),x.a.createElement(it.Tab,{label:"Input your own Question",value:"b"},x.a.createElement("div",null,x.a.createElement("br",null),x.a.createElement("div",null,x.a.createElement(Me.a,{id:"text-field-default",onChange:e.handleInsertQChange,placeholder:"Question"}),x.a.createElement("br",null),x.a.createElement(Me.a,{id:"text-field-default",onChange:e.handleInsertAChange,placeholder:"Answer"}),x.a.createElement("br",null),x.a.createElement(Ye.a,{label:"Submit",primary:!0,keyboardFocused:!0,onClick:e.handleSubmit})),x.a.createElement("br",null)))),x.a.createElement(He.a,{title:"Answer Question",actions:n,modal:!1,open:e.state.open,onRequestClose:e.handleClose},x.a.createElement("p",null,e.state.choice[0]),x.a.createElement(Me.a,{id:"text-field-default",placeholder:"Answer",value:e.creator?e.state.answer:e.state.answer2,onChange:e.handleChange()})),x.a.createElement(He.a,{title:"Winner",actions:n,modal:!1,open:e.state.isGameFinished,onRequestClose:e.reset},x.a.createElement("h1",null,e.state.winner))))}}]),t}(w.Component),lt=(a(587),document.body.clientWidth-200),ct=document.body.clientWidth,ut=(ct-lt)/2,ht=lt/2-5,mt=0,pt=[],dt={0:"black",1:"red",2:"yellow",3:"blue"},ft=function e(t,a,n,i){Object(s.a)(this,e);var o=Math.floor(3*Math.random())+1;this.width=n,this.height=i,this.top=t,this.left=a,this.durabilityNum=o,this.color=dt[o],this.save=function(){return{width:this.width,height:this.height,top:this.top,left:this.left,durability:this.durabilityNum,color:this.color}}},yt=new ft(10,10,lt/20,20),vt=new ft(10,lt/20+20,lt/20,20),gt=new ft(10,lt/20*2+30,lt/20,20),bt=new ft(10,lt/20*3+40,lt/20,20),kt=new ft(10,lt/20*4+50,lt/20,20),Et=new ft(10,lt/20*5+60,lt/20,20),wt=new ft(120,10,lt/20,20),xt=new ft(120,lt/20+20,lt/20,20),Ct=new ft(120,lt/20*2+30,lt/20,20),St=new ft(120,lt/20*3+40,lt/20,20),Ot=new ft(120,lt/20*4+50,lt/20,20),jt=new ft(120,lt/20*5+60,lt/20,20),Lt=new ft(230,10,lt/20,20),It=new ft(230,lt/20+20,lt/20,20),Rt=new ft(230,lt/20*2+30,lt/20,20),Nt=new ft(230,lt/20*3+40,lt/20,20),Dt=new ft(230,lt/20*4+50,lt/20,20),Ut=new ft(230,lt/20*5+60,lt/20,20),Pt=[yt,vt,gt,bt,kt,Et,wt,xt,Ct,St,Ot,jt,Lt,It,Rt,Nt,Dt,Ut],Tt=new ft(10,ht+10+10,lt/20,20),Mt=new ft(10,lt/20+ht+10+20,lt/20,20),Gt=new ft(10,lt/20*2+ht+10+30,lt/20,20),At=new ft(10,lt/20*3+ht+10+40,lt/20,20),_t=new ft(10,lt/20*4+ht+10+50,lt/20,20),Wt=new ft(10,lt/20*5+ht+10+60,lt/20,20),Bt=new ft(120,ht+10+10,lt/20,20),Ft=new ft(120,lt/20+ht+10+20,lt/20,20),Ht=new ft(120,lt/20*2+ht+10+30,lt/20,20),Kt=new ft(120,lt/20*3+ht+10+40,lt/20,20),Yt=new ft(120,lt/20*4+ht+10+50,lt/20,20),qt=new ft(120,lt/20*5+ht+10+60,lt/20,20),Vt=new ft(230,ht+10+10,lt/20,20,1),Jt=new ft(230,lt/20+ht+10+20,lt/20,20,1),zt=new ft(230,lt/20*2+ht+10+30,lt/20,20,1),Xt=new ft(230,lt/20*3+ht+10+40,lt/20,20,1),Qt=new ft(230,lt/20*4+ht+10+50,lt/20,20,1),Zt=new ft(230,lt/20*5+ht+10+60,lt/20,20,1),$t=[Tt,Mt,Gt,At,_t,Wt,Bt,Ft,Ht,Kt,Yt,qt,Vt,Jt,zt,Xt,Qt,Zt],ea=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).user=j.a.auth().currentUser.uid,a.session=j.a.database().ref("/session/".concat(e.location.state.id)),a.isCreator=a.user===e.location.state.creator,a.users=a.getSessionUserIds().map((function(e){return se.getName(e)})),a.creator=se.getName(a.getSessionCreatorUserId()),a.interval=setInterval((function(){return a.ballMove()}),10),a.state={ball:{left:lt/4,top:630,ballR:10,ballSpeedX:-4,ballSpeedY:-3},ball2:{left2:3*lt/4,top2:630,ballR2:10,ballSpeedX2:-4,ballSpeedY2:-3},you:{score:0,left:lt/2,blocks:[yt.save(),vt.save(),gt.save(),bt.save(),kt.save(),Et.save(),wt.save(),xt.save(),Ct.save(),St.save(),Ot.save(),jt.save(),Lt.save(),It.save(),Rt.save(),Nt.save(),Dt.save(),Ut.save()]},p2:{left:3*lt/4,score:0,blocks:[Tt.save(),Mt.save(),Gt.save(),At.save(),_t.save(),Wt.save(),Bt.save(),Ft.save(),Ht.save(),Kt.save(),Yt.save(),qt.save(),Vt.save(),Jt.save(),zt.save(),Xt.save(),Qt.save(),Zt.save()],win:!1}},a.getSessionDatabaseRef().set({ball:a.state.ball,ball2:a.state.ball2,P1:{name:a.users[0],x_cord:a.state.you.left,score:a.state.you.score,blocks:[yt.save(),vt.save(),gt.save(),bt.save(),kt.save(),Et.save(),wt.save(),xt.save(),Ct.save(),St.save(),Ot.save(),jt.save(),Lt.save(),It.save(),Rt.save(),Nt.save(),Dt.save(),Ut.save()],win:!1},P2:{name:a.users[1],x_cord:a.state.p2.left,score:a.state.p2.score,blocks:[Tt.save(),Mt.save(),Gt.save(),At.save(),_t.save(),Wt.save(),Bt.save(),Ft.save(),Ht.save(),Kt.save(),Yt.save(),qt.save(),Vt.save(),Jt.save(),zt.save(),Xt.save(),Qt.save(),Zt.save()],win:!1}}),a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"checkWin",value:function(){if(this.isCreator){mt=0;for(var e=0;e<Pt.length;e++)0===Pt[e].durabilityNum&&(mt+=1,pt.push(Pt[e]),mt===Pt.length&&this.getSessionDatabaseRef().update({P1:{name:this.users[0],x_cord:this.state.you.left,score:mt,blocks:this.state.you.blocks,win:!0}}))}else{mt=0;for(var t=0;t<$t.length;t++)0===$t[t].durabilityNum&&(mt+=1)===$t.length&&this.getSessionDatabaseRef().update({P2:{name:this.users[1],x_cord:this.state.p2.left,score:mt,blocks:this.state.p2.blocks,win:!0}})}}},{key:"ballMove",value:function(){if(this.checkWin(),this.isCreator){var e=this.state.ball,t=e.left,a=e.top,s=e.ballR,n=e.ballSpeedX,i=e.ballSpeedY;(t+s/2>lt||s+t<0)&&(n=-n),(a+s/2>700||a<0)&&(i=-i),t+s>ht&&(n=-n),this.state.you.left-ut-50<t+s&&this.state.you.left-ut+50>t&&a+s>=680&&a<=690&&(i=-i);for(var o=0;o<Pt.length;o++){var r=Pt[o];t+s>=Pt[o].left&&t+s<=Pt[o].left+2||t>=Pt[o].left+Pt[o].width-2&&t<=Pt[o].left+Pt[o].width?(a+s<=Pt[o].top+Pt[o].height&&a+s>=Pt[o].top||a<=Pt[o].top+Pt[o].height&&a>=Pt[o].top)&&(n=-n,r.durabilityNum-=1,this.checkBlock(r)):t+s<=Pt[o].left+Pt[o].width&&t+s>=Pt[o].left?(a+s<=Pt[o].top+2&&a+s>=Pt[o].top||a<=Pt[o].top+Pt[o].height&&a>=Pt[o].top+Pt[o].height-2)&&(i=-i,r.durabilityNum-=1,this.checkBlock(r)):t<=Pt[o].left+Pt[o].height&&t>=Pt[o].width+Pt[o].left-2&&(a>=Pt[o].top&&a<=Pt[o].top+Pt[o].height||a+s>=Pt[o].top&&a+s<=Pt[o].top+Pt[o].height)&&(n=-n,r.durabilityNum-=1,this.checkBlock(r))}this.getSessionDatabaseRef().update({ball:{left:t+n,top:a+i,ballR:s,ballSpeedX:n,ballSpeedY:i}})}else{var l=this.state.ball2,c=l.left2,u=l.top2,h=l.ballR2,m=l.ballSpeedX2,p=l.ballSpeedY2;if((c+h>lt||h+c<ht+10)&&(m=-m),(u+h>700||u<0)&&(p=-p),c-h<ht+10&&(m=-m),this.state.p2.left-ut-50<c&&this.state.p2.left-ut+50>c+h)if(u+h>=680&&u<=690)p=-p,n=.25*(t-(this.state.p2.left-ut+5));for(var d=0;d<$t.length;d++){var f=$t[d];c+h>=$t[d].left&&c+h<=$t[d].left+2||c>=$t[d].left+$t[d].width-2&&c<=$t[d].left+$t[d].width?(u+h<=$t[d].top+$t[d].height&&u+h>=$t[d].top||u<=$t[d].top+$t[d].height&&u>=$t[d].top)&&(m=-m,f.durabilityNum-=1,this.checkBlock(f)):c+h<=$t[d].left+$t[d].width&&c+h>=$t[d].left?(u+h<=$t[d].top+2&&u+h>=$t[d].top||u<=$t[d].top+$t[d].height&&u>=$t[d].top+$t[d].height-2)&&(p=-p,f.durabilityNum-=1,this.checkBlock(f)):c<=$t[d].left+$t[d].height&&c>=$t[d].left+Pt[d].width-2&&(u+h<=$t[d].top+$t[d].height&&u+h>=$t[d].top?(m=-m,f.durabilityNum-=1,this.checkBlock(f)):u<=$t[d].top+$t[d].height&&u>=$t[d].top&&(m=-m,f.durabilityNum-=1,this.checkBlock(r)))}this.getSessionDatabaseRef().update({ball2:{left2:c+m,top2:u+p,ballR2:h,ballSpeedX2:m,ballSpeedY2:p}})}}},{key:"checkBlock",value:function(e){e.color=dt[e.durabilityNum],e.durabilityNum<=0&&(e.height=0,e.width=0,e.left=-10,e.top=-10),this.isCreator?this.getSessionDatabaseRef().update({P1:{name:this.users[0],x_cord:this.state.you.left,score:mt,blocks:[yt.save(),vt.save(),gt.save(),bt.save(),kt.save(),Et.save(),wt.save(),xt.save(),Ct.save(),St.save(),Ot.save(),jt.save(),Lt.save(),It.save(),Rt.save(),Nt.save(),Dt.save(),Ut.save()]}}):this.getSessionDatabaseRef().update({P2:{name:this.users[1],x_cord:this.state.p2.left,score:mt,blocks:[Tt.save(),Mt.save(),Gt.save(),At.save(),_t.save(),Wt.save(),Bt.save(),Ft.save(),Ht.save(),Kt.save(),Yt.save(),qt.save(),Vt.save(),Jt.save(),zt.save(),Xt.save(),Qt.save(),Zt.save()]}})}},{key:"onMouseMove",value:function(e){this.isCreator&&e.clientX<ht+10+50&&e.clientX>150&&this.getSessionDatabaseRef().update({P1:{name:this.users[0],x_cord:e.clientX,score:this.state.you.score,blocks:[yt.save(),vt.save(),gt.save(),bt.save(),kt.save(),Et.save(),wt.save(),xt.save(),Ct.save(),St.save(),Ot.save(),jt.save(),Lt.save(),It.save(),Rt.save(),Nt.save(),Dt.save(),Ut.save()]}}),se.getName(this.user)===this.users[1]&&e.clientX>ht+10+150&&e.clientX<ct-150&&this.getSessionDatabaseRef().update({P2:{name:this.users[1],x_cord:e.clientX,score:this.state.p2.score,blocks:[Tt.save(),Mt.save(),Gt.save(),At.save(),_t.save(),Wt.save(),Bt.save(),Ft.save(),Ht.save(),Kt.save(),Yt.save(),qt.save(),Vt.save(),Jt.save(),zt.save(),Xt.save(),Qt.save(),Zt.save()]}})}},{key:"onSessionDataChanged",value:function(e){var t=null;!0===e.P1.win?t="p1":!0===e.P2.win&&(t="p2"),this.setState({ball:{left:e.ball.left,top:e.ball.top,ballR:e.ball.ballR,ballSpeedX:e.ball.ballSpeedX,ballSpeedY:e.ball.ballSpeedY},ball2:{left2:e.ball2.left2,top2:e.ball2.top2,ballR2:e.ball2.ballR2,ballSpeedX2:e.ball2.ballSpeedX2,ballSpeedY2:e.ball2.ballSpeedY2},you:{score:e.P1.score,left:e.P1.x_cord,blocks:e.P1.blocks},p2:{score:e.P2.score,left:e.P2.x_cord,blocks:e.P2.blocks},win:t})}},{key:"render",value:function(){var e=this;return ct=document.body.clientWidth,ut=(ct-lt)/2,this.state.win?"p1"===this.state.win?this.users[0]===se.getName(this.user)?x.a.createElement("div",{style:{height:"800px",background:"url('http://clipart-library.com/images/8cAEdyAXi.png')  ",textAlign:"center"}},x.a.createElement("div",{className:"result",style:{zIndex:"2",display:"flex",postion:"relative",justifyContent:"center",flex:"center",paddingTop:"20px",fontSize:"30px",boxShadow:"5px 5px 12px 12px rgba(0, 0, 255, .2)",width:"50%",margin:"auto",marginTop:"20px",borderRadius:"50%",backgroundColor:"white",animationName:"gameOver",animationDuration:"3s"}},x.a.createElement("h1",null,this.users[0]," is the winner !"))):x.a.createElement("div",{style:{height:"800px",background:"url('http://cdn.shopify.com/s/files/1/0641/1521/products/pins-sad-balloon.jpg?v=1516215357') center "}},x.a.createElement("div",{className:"result",style:{zIndex:"2",display:"flex",postion:"relative",justifyContent:"center",flex:"center",paddingTop:"20px",fontSize:"30px",boxShadow:"5px 5px 12px 12px rgba(0, 0, 255, .2)",width:"50%",margin:"auto",marginTop:"20px",borderRadius:"50%",backgroundColor:"white"}},x.a.createElement("h1",null,this.users[1]," has lost !"))):this.users[0]===se.getName(this.user)?x.a.createElement("div",{style:{height:"800px",background:"url('http://cdn.shopify.com/s/files/1/0641/1521/products/pins-sad-balloon.jpg?v=1516215357') center "}},x.a.createElement("div",{className:"result",style:{zIndex:"2",display:"flex",postion:"relative",justifyContent:"center",flex:"center",paddingTop:"20px",boxShadow:"5px 5px 12px 12px rgba(0, 0, 255, .2)",width:"50%",margin:"auto",marginTop:"20px",textAlign:"center",borderRadius:"50%",backgroundColor:"white"}},x.a.createElement("h1",null,this.users[0]," has lost !"))):x.a.createElement("div",{style:{height:"800px",background:"url('http://clipart-library.com/images/8cAEdyAXi.png')  "}},x.a.createElement("div",{className:"result",style:{zIndex:"2",display:"flex",postion:"relative",justifyContent:"center",flex:"center",paddingTop:"20px",boxShadow:"5px 5px 12px 12px rgba(0, 0, 255, .2)",width:"50%",margin:"auto",marginTop:"20px",textAlign:"center",borderRadius:"50%",backgroundColor:"white"}},x.a.createElement("h1",null,this.users[1]," is the winner !"))):x.a.createElement("div",{style:{padding:"30px",width:"90%",margin:"auto",marginTop:"2%",height:"80%",boxShadow:"5px 5px 12px 12px rgba(0, 0, 255, .2)",textAlign:"center"}},x.a.createElement("div",{style:{height:"40px",width:"100%",margin:"auto",textAlign:"center",position:"relative",color:"black",padding:"1px",boxShadow:"5px 5px 12px 12px rgba(0, 0, 255, .2)"}},x.a.createElement("p",{style:{width:"50%",float:"left"}},this.users[0]," has ",this.state.you.score," points"),x.a.createElement("p",{style:{width:"50%",float:"right"}},this.users[1]," has ",this.state.p2.score," points")),x.a.createElement("div",{style:{margin:"auto ",marginTop:" 20px",position:"relative",background:"linear-gradient(217deg, rgba(255,0,0,.8), rgba(255,0,0,0) 70.71%),linear-gradient(127deg, rgba(0,255,0,.8), rgba(0,255,0,0) 70.71%), linear-gradient(336deg, rgba(0,0,255,.8), rgba(0,0,255,0) 70.71%)",width:lt+"px",height:"700px",border:"5px solid"},onMouseMove:function(t){return e.onMouseMove(t)}},x.a.createElement("div",{className:"You",style:{position:"absolute",backgroundColor:"green",width:"100px",height:"10px",top:"680px",left:this.state.you.left-ut-50+"px"}}),x.a.createElement("div",{className:"ball1",style:{position:"absolute",backgroundColor:"white",width:this.state.ball.ballR+"px",height:this.state.ball.ballR+"px",borderRadius:"50%",top:this.state.ball.top+"px",left:this.state.ball.left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[0].color,width:this.state.you.blocks[0].width+"px",height:this.state.you.blocks[0].height+"px",top:this.state.you.blocks[0].top+"px",left:this.state.you.blocks[0].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[1].color,width:this.state.you.blocks[1].width+"px",height:this.state.you.blocks[1].height+"px",top:this.state.you.blocks[1].top+"px",left:this.state.you.blocks[1].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[2].color,width:this.state.you.blocks[2].width+"px",height:this.state.you.blocks[2].height+"px",top:this.state.you.blocks[2].top+"px",left:this.state.you.blocks[2].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[3].color,width:this.state.you.blocks[3].width+"px",height:this.state.you.blocks[3].height+"px",top:this.state.you.blocks[3].top+"px",left:this.state.you.blocks[3].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[4].color,width:this.state.you.blocks[4].width+"px",height:this.state.you.blocks[4].height+"px",top:this.state.you.blocks[4].top+"px",left:this.state.you.blocks[4].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[5].color,width:this.state.you.blocks[5].width+"px",height:this.state.you.blocks[5].height+"px",top:this.state.you.blocks[5].top+"px",left:this.state.you.blocks[5].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[6].color,width:this.state.you.blocks[6].width+"px",height:this.state.you.blocks[6].height+"px",top:this.state.you.blocks[6].top+"px",left:this.state.you.blocks[6].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[7].color,width:this.state.you.blocks[7].width+"px",height:this.state.you.blocks[7].height+"px",top:this.state.you.blocks[7].top+"px",left:this.state.you.blocks[7].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[8].color,width:this.state.you.blocks[8].width+"px",height:this.state.you.blocks[8].height+"px",top:this.state.you.blocks[8].top+"px",left:this.state.you.blocks[8].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[9].color,width:this.state.you.blocks[9].width+"px",height:this.state.you.blocks[9].height+"px",top:this.state.you.blocks[9].top+"px",left:this.state.you.blocks[9].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[10].color,width:this.state.you.blocks[10].width+"px",height:this.state.you.blocks[10].height+"px",top:this.state.you.blocks[10].top+"px",left:this.state.you.blocks[10].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[11].color,width:this.state.you.blocks[11].width+"px",height:this.state.you.blocks[11].height+"px",top:this.state.you.blocks[11].top+"px",left:this.state.you.blocks[11].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[12].color,width:this.state.you.blocks[12].width+"px",height:this.state.you.blocks[12].height+"px",top:this.state.you.blocks[12].top+"px",left:this.state.you.blocks[12].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[13].color,width:this.state.you.blocks[13].width+"px",height:this.state.you.blocks[13].height+"px",top:this.state.you.blocks[13].top+"px",left:this.state.you.blocks[13].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[14].color,width:this.state.you.blocks[14].width+"px",height:this.state.you.blocks[14].height+"px",top:this.state.you.blocks[14].top+"px",left:this.state.you.blocks[14].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[15].color,width:this.state.you.blocks[15].width+"px",height:this.state.you.blocks[15].height+"px",top:this.state.you.blocks[15].top+"px",left:this.state.you.blocks[15].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[16].color,width:this.state.you.blocks[16].width+"px",height:this.state.you.blocks[16].height+"px",top:this.state.you.blocks[16].top+"px",left:this.state.you.blocks[16].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.you.blocks[17].color,width:this.state.you.blocks[17].width+"px",height:this.state.you.blocks[17].height+"px",top:this.state.you.blocks[17].top+"px",left:this.state.you.blocks[17].left+"px"}}),x.a.createElement("div",{className:"line",style:{position:"absolute",backgroundColor:"white",width:"10px",height:"inherit",left:ht+"px"}}),x.a.createElement("div",{className:"Player2",style:{position:"absolute",backgroundColor:"purple",width:"100px",height:"10px",top:"680px",left:this.state.p2.left-ut-50+"px"}}),x.a.createElement("div",{className:"ball2",style:{position:"absolute",backgroundColor:"white",width:this.state.ball2.ballR2+"px",height:this.state.ball2.ballR2+"px",borderRadius:"50%",top:this.state.ball2.top2+"px",left:this.state.ball2.left2+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[0].color,width:this.state.p2.blocks[0].width+"px",height:this.state.p2.blocks[0].height+"px",top:this.state.p2.blocks[0].top+"px",left:this.state.p2.blocks[0].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[1].color,width:this.state.p2.blocks[1].width+"px",height:this.state.p2.blocks[1].height+"px",top:this.state.p2.blocks[1].top+"px",left:this.state.p2.blocks[1].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[2].color,width:this.state.p2.blocks[2].width+"px",height:this.state.p2.blocks[2].height+"px",top:this.state.p2.blocks[2].top+"px",left:this.state.p2.blocks[2].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[3].color,width:this.state.p2.blocks[3].width+"px",height:this.state.p2.blocks[3].height+"px",top:this.state.p2.blocks[3].top+"px",left:this.state.p2.blocks[3].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[4].color,width:this.state.p2.blocks[4].width+"px",height:this.state.p2.blocks[4].height+"px",top:this.state.p2.blocks[4].top+"px",left:this.state.p2.blocks[4].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[5].color,width:this.state.p2.blocks[5].width+"px",height:this.state.p2.blocks[5].height+"px",top:this.state.p2.blocks[5].top+"px",left:this.state.p2.blocks[5].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[6].color,width:this.state.p2.blocks[6].width+"px",height:this.state.p2.blocks[6].height+"px",top:this.state.p2.blocks[6].top+"px",left:this.state.p2.blocks[6].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[7].color,width:this.state.p2.blocks[7].width+"px",height:this.state.p2.blocks[7].height+"px",top:this.state.p2.blocks[7].top+"px",left:this.state.p2.blocks[7].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[8].color,width:this.state.p2.blocks[8].width+"px",height:this.state.p2.blocks[8].height+"px",top:this.state.p2.blocks[8].top+"px",left:this.state.p2.blocks[8].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[8].color,width:this.state.p2.blocks[8].width+"px",height:this.state.p2.blocks[8].height+"px",top:this.state.p2.blocks[8].top+"px",left:this.state.p2.blocks[8].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[9].color,width:this.state.p2.blocks[9].width+"px",height:this.state.p2.blocks[9].height+"px",top:this.state.p2.blocks[9].top+"px",left:this.state.p2.blocks[9].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[10].color,width:this.state.p2.blocks[10].width+"px",height:this.state.p2.blocks[10].height+"px",top:this.state.p2.blocks[10].top+"px",left:this.state.p2.blocks[10].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[11].color,width:this.state.p2.blocks[11].width+"px",height:this.state.p2.blocks[11].height+"px",top:this.state.p2.blocks[11].top+"px",left:this.state.p2.blocks[11].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[12].color,width:this.state.p2.blocks[12].width+"px",height:this.state.p2.blocks[12].height+"px",top:this.state.p2.blocks[12].top+"px",left:this.state.p2.blocks[12].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[13].color,width:this.state.p2.blocks[13].width+"px",height:this.state.p2.blocks[13].height+"px",top:this.state.p2.blocks[13].top+"px",left:this.state.p2.blocks[13].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[14].color,width:this.state.p2.blocks[14].width+"px",height:this.state.p2.blocks[14].height+"px",top:this.state.p2.blocks[14].top+"px",left:this.state.p2.blocks[14].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[15].color,width:this.state.p2.blocks[15].width+"px",height:this.state.p2.blocks[15].height+"px",top:this.state.p2.blocks[15].top+"px",left:this.state.p2.blocks[15].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[16].color,width:this.state.p2.blocks[16].width+"px",height:this.state.p2.blocks[16].height+"px",top:this.state.p2.blocks[16].top+"px",left:this.state.p2.blocks[16].left+"px"}}),x.a.createElement("div",{style:{position:"absolute",backgroundColor:this.state.p2.blocks[17].color,width:this.state.p2.blocks[17].width+"px",height:this.state.p2.blocks[17].height+"px",top:this.state.p2.blocks[17].top+"px",left:this.state.p2.blocks[17].left+"px"}})))}}]),t}(ee),ta=(a(588),a(270)),aa=a.n(ta),sa={magician:{hp:100,attack_damage:10,defense:.2,speed:10}};var na=function(e){function t(e){var a,n,r,l,c;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={p1:{characterType:"magician",playerLocation:{x:50,y:520},playerAction:{left:!1,right:!1,jump:!1,basic_attack:!1,ability_1:!1,ability_2:!1,ability_3:!1,facing:"right"}},p2:{characterType:"magician",playerLocation:{x:960,y:520},playerAction:{left:!1,right:!1,jump:!1,basic_attack:!1,ability_1:!1,ability_2:!1,ability_3:!1,facing:"left"}},sketch:(n=function(){return a.updateFirebase()},r=function(){return a.getState()},l=function(){return a.getMyUser()},c=function(){return a.identifyCharacter()},function(e){var t,a,s={normal:"",mirrored:""},i=[],o=!1;e.preload=function(){s.normal=e.loadImage("/games/fight/whole.jpg"),s.mirrored=e.loadImage("/games/fight/whole-mirror.jpg")},e.setup=function(){e.createCanvas(1080,720),e.noStroke(),e.frameRate(60),e.setupPlayerLocation(),"magician"===r().p1.characterType?t=new e.Magician(r().p1.playerLocation.x,r().p1.playerLocation.y):"warrior"===r().p1.characterType&&(t=new e.Warrior(r().p1.playerLocation.x,r().p1.playerLocation.y)),"magician"===r().p2.characterType?a=new e.Magician(r().p2.playerLocation.x,r().p2.playerLocation.y):"warrior"===r().p2.characterType&&(t=new e.Warrior(r().p2.playerLocation.x,r().p2.playerLocation.y)),console.log()},e.draw=function(){e.background(0),e.checkingAction(),t.x=r().p1.playerLocation.x,t.facing=r().p1.playerAction.facing,t.display(),a.x=r().p2.playerLocation.x,a.facing=r().p2.playerAction.facing,a.display(),e.keyPressed(),e.displayMagicBall(),e.displayHealth(),e.gameOver()},e.setupPlayerLocation=function(){"player 1"===l()&&(console.log(l()),oa.x=r().p1.playerLocation.x,oa.y=r().p1.playerLocation.y),"player 2"===l()&&(console.log(l()),oa.x=r().p2.playerLocation.x,oa.y=r().p2.playerLocation.y),console.log(oa)},e.Magician=function(t,a){this.x=t,this.y=a,this.hp=sa.magician.hp,this.full_hp=sa.magician.hp,this.attack_damage=sa.magician.attack_damage,this.defense=sa.magician.defense,this.speed=sa.magician.speed,this.basic_attack_disabled=!1,this.facing="right",this.disabled_timer={basic_attack:60},this.update=function(){this.disabled_timer.basic_attack&&console.log("Basic Attack Is Disabled")},this.display=function(){"left"===this.facing?e.image(s.mirrored,this.x,this.y,200,200):e.image(s.normal,this.x,this.y,200,200)},this.action=function(t,a,s){this.enemy=t,"basic_attack"===a&&(this.basic_attack_disabled||(console.log("basic attcak!"),i.push(new e.MagicBall(this.enemy,this.x,this.y,s,this.attack_damage)),console.log(this.enemy,this.x,this.y,s)))},this.damaged=function(e){this.hp>0&&(this.hp-=e-e*this.defense),this.hp<=0&&(this.hp=0,this.dies())},this.dies=function(){o=!0}},e.MagicBall=function(t,a,s,n,i){this.x=a,this.y=s+(720-s)/2,this.radius=80,this.disappear_after=90,this.speed=20,this.enemy=t,console.log(this.enemy),this.display=function(){this.update(),e.fill(153,102,255),e.arc(this.x,this.y,this.radius,this.radius,0,2*Math.PI)},this.update=function(){"right"===n&&(this.x+=this.speed),"left"===n&&(this.x-=this.speed),this.disappear_after--,this.collision()},this.collision=function(){this.x+this.radius>=this.enemy.x&&this.x-this.radius<=this.enemy.x&&(console.log("hits enemy"),t.damaged(i),this.disappear_after=0)}},e.displayMagicBall=function(){for(var e=0;e<i.length;e++)i[e].display(),i[e].disappear_after<=1&&(i.splice(e,1),console.log(i))},e.keyPressed=function(){ia.basic_attack=!1,ia.ability_1=!1,ia.ability_2=!1,ia.ability_3=!1,e.keyIsDown(65)&&(oa.x>0&&(oa.x-=c().speed,ia.facing="left"),console.log(r().p1.playerLocation.x,r().p1.playerAction.facing)),e.keyIsDown(68)&&(oa.x<1080&&(oa.x+=c().speed,ia.facing="right"),console.log(r().p1.playerLocation.x,r().p1.playerAction.facing)),e.keyIsDown(75)&&(oa.y-=10),e.keyIsDown(74)&&(ia.basic_attack=!0),e.keyIsDown(85)&&(ia.ability_1=!0),n()},e.checkingAction=function(){!0===r().p1.playerAction.basic_attack&&t.action(a,"basic_attack",r().p1.playerAction.facing),!0===r().p2.playerAction.basic_attack&&a.action(t,"basic_attack",r().p2.playerAction.facing)},e.checkLocation=function(){console.log(r().p1.playerLocation.x)},e.displayHealth=function(){var s={xPos:10,yPos:10,width:400,height:100},n={xPos:670,yPos:10,width:400,height:100};e.stroke(255),e.fill(50),e.rect(s.xPos,s.yPos,s.width,s.height),e.noStroke(),e.fill(102,255,102),e.rect(s.xPos,s.yPos,s.width*(t.hp/t.full_hp),s.height),e.noStroke(),e.textSize(80),e.fill(0),e.text(t.hp+" / "+t.full_hp,s.xPos,s.yPos+s.height-10),e.stroke(255),e.fill(50),e.rect(n.xPos,n.yPos,n.width,n.height),e.noStroke(),e.fill(102,255,102),e.rect(n.xPos,n.yPos,n.width*(a.hp/a.full_hp),n.height),e.noStroke(),e.textSize(80),e.fill(0),e.text(a.hp+" / "+a.full_hp,n.xPos,n.yPos+n.height-10)},e.gameOver=function(){o&&(e.background(0),e.fill(255),e.textSize(80),t.hp>a.hp&&e.text("Player 1 has won the game!",20,400),a.hp>t.hp&&e.text("Player 2 has won the game!",20,400),t.hp===a.hp&&e.text("Tie!",20,400))}})},a.getSessionDatabaseRef().set({p1:{characterType:"magician",playerLocation:{x:50,y:520},playerAction:{basic_attack:!1,ability_1:!1,ability_2:!1,ability_3:!1,facing:1}},p2:{characterType:"magician",playerLocation:{x:960,y:520},playerAction:{basic_attack:!1,ability_1:!1,ability_2:!1,ability_3:!1,facing:-1}}}),a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"getState",value:function(){return this.state}},{key:"identifyCharacter",value:function(){var e;return"player 1"===this.getMyUser()&&(e=this.state.p1.characterType),"player 2"===this.getMyUser()&&(e=this.state.p2.characterType),sa[e]}},{key:"onSessionDataChanged",value:function(e){this.setState(e)}},{key:"handleButtonClick",value:function(){this.getSessionDatabaseRef().set({user_id:se.getName(this.getMyUserId())})}},{key:"getMyUser",value:function(){return this.getMyUserId()===this.getSessionCreatorUserId()?"player 1":"player 2"}},{key:"updateFirebase",value:function(){"player 1"===this.getMyUser()&&this.getSessionDatabaseRef().child("p1").update({playerLocation:oa,playerAction:ia}),"player 2"===this.getMyUser()&&this.getSessionDatabaseRef().child("p2").update({playerLocation:oa,playerAction:ia})}},{key:"render",value:function(){this.getSessionId(),this.getSessionUserIds().map((function(e){return x.a.createElement("li",{key:e},x.a.createElement("img",{alt:"",key:e,src:se.getPhotoUrl(e),height:"50px"}),se.getName(e))})),se.getName(this.getSessionCreatorUserId());return this.getMyUserId()===this.getSessionCreatorUserId()?"host":"guest",x.a.createElement("div",null,x.a.createElement(aa.a,{sketch:this.state.sketch}))}}]),t}(ee),ia={basic_attack:!1,ability_1:!1,ability_2:!1,ability_3:!1,facing:""},oa={x:0,y:0};var ra=function(e){function t(e){var a;Object(s.a)(this,t),a=Object(i.a)(this,Object(o.a)(t).call(this,e));for(var n=[],r=["H","C","S","D"],l=[1,2,3,4,5,6,7,8,9,10,11,12,13],c=0;c<l.length;c++)for(var u=0;u<r.length;u++)n.push([l[c],r[u]]);var h=(n=function(e){var t,a,s;for(s=e.length-1;s>0;s--)t=Math.floor(Math.random()*(s+1)),a=e[s],e[s]=e[t],e[t]=a;return e}(n)).splice(0,26),m=n.splice(0,26);a.state={readyplayer1:!1,readyplayer2:!1,stack1:h,stack2:m,pile1:[],pile2:[],winner:null};var p=a.props.match.params.id,d=j.a.database().ref("/session/"+p);return a.readyplayer1=d.child("readyplayer1"),a.readyplayer2=d.child("readyplayer2"),a.stack1=d.child("stack1"),a.stack2=d.child("stack2"),a.pile1=d.child("pile1"),a.pile2=d.child("pile2"),a.winner=d.child("winner"),a.isCreator=j.a.auth().currentUser.uid===e.location.state.creator,a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({isNextRoundButtonDisabled:!0}),this.readyplayer1.set(this.state.readyplayer1),this.readyplayer1.on("value",(function(t){var a=t.val();null!==a&&(e.setState({readyplayer1:a}),!0===e.state.readyplayer1&&!0===e.state.readyplayer2&&e.setState({isNextRoundButtonDisabled:!1}),!1===e.state.readyplayer1&&e.setState({isButtonDisabled:!1}))})),this.readyplayer2.set(this.state.readyplayer2),this.readyplayer2.on("value",(function(t){var a=t.val();null!==a&&(e.setState({readyplayer2:a}),!0===e.state.readyplayer1&&!0===e.state.readyplayer2&&e.setState({isNextRoundButtonDisabled:!1}),!1===e.state.readyplayer2&&e.setState({isButtonDisabled:!1}))})),this.stack1.set(this.state.stack1),this.stack1.on("value",(function(t){null!==t.val()&&e.setState({stack1:t.val()})})),this.stack2.set(this.state.stack2),this.stack2.on("value",(function(t){null!==t.val()&&e.setState({stack2:t.val()})})),this.pile1.set(this.state.pile1),this.pile1.on("value",(function(t){null!==t.val()&&e.setState({pile1:t.val()})})),this.pile2.set(this.state.pile2),this.pile2.on("value",(function(t){null!==t.val()&&e.setState({pile2:t.val()})})),this.winner.set(this.state.winner),this.winner.on("value",(function(t){null!==t.val()&&e.setState({winner:t.val()})}))}},{key:"playCard1",value:function(){this.playerOneReady(),this.buttonDisabled();var e=this.state.stack1.shift();this.stack1.set(this.state.stack1),this.state.pile1.push(e),this.pile1.set(this.state.pile1),console.log(this.state.pile1[0][0]),this.checkWinner()}},{key:"playCard2",value:function(){this.playerTwoReady(),this.buttonDisabled();var e=this.state.stack2.shift();this.stack2.set(this.state.stack2),this.state.pile2.push(e),this.pile2.set(this.state.pile2),this.checkWinner()}},{key:"disabledNextRoundButton",value:function(){this.setState({isNextRoundButtonDisabled:!0})}},{key:"enabledNextRoundButton",value:function(){this.setState({isNextRoundButtonDisabled:!1})}},{key:"playerOneReady",value:function(){this.readyplayer1.set(!0)}},{key:"playerTwoReady",value:function(){this.readyplayer2.set(!0)}},{key:"checkWinner",value:function(){null!=this.state.pile1[0]&&null!=this.state.pile2[0]?this.state.pile1[0][0]>this.state.pile2[0][0]?(this.winner.set("P1 Wins"),this.state.stack1.push(this.state.pile1)):this.state.pile1[0][0]<this.state.pile2[0][0]&&this.winner.set("P2 Wins!"):console.log("no cards")}},{key:"buttonDisabled",value:function(){this.setState({isButtonDisabled:!0})}},{key:"nextRound",value:function(){this.setState({isButtonDisabled:!1}),this.readyplayer1.set(!1),this.readyplayer2.set(!1),this.disabledNextRoundButton()}},{key:"render",value:function(){return x.a.createElement("div",{className:"war"},x.a.createElement("div",null,x.a.createElement(Se.a,{label:"Player 1 Start",fullWidth:!0,disabled:this.isCreator||this.state.isButtonDisabled||this.state.isbuttonEnabled,onClick:this.playCard1.bind(this)}),x.a.createElement("h1",{className:"number"}," ",this.state.pile1," ")),x.a.createElement("div",{className:"center"},x.a.createElement(Se.a,{label:"Next Round",fullWidth:!1,disabled:this.state.isNextRoundButtonDisabled,onClick:this.nextRound.bind(this)}),x.a.createElement("p",null,this.state.winner)),x.a.createElement("div",{className:"playerTwo"},x.a.createElement("h1",{className:"number"}," ",this.state.pile2," "),x.a.createElement(Se.a,{label:"Player 2 Start",fullWidth:!0,disabled:!this.isCreator||this.state.isButtonDisabled,onClick:this.playCard2.bind(this)})))}}]),t}(w.Component),la=a(271),ca=a(44),ua=a.n(ca),ha=a(85),ma=(a(591),a(592),function(e){function t(e){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).call(this,e))}return Object(r.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return x.a.createElement("div",{className:"topInfo"},x.a.createElement("div",{className:"topInfoText"},"Name: ",this.props.name||""))}}]),t}(x.a.Component)),pa=function(e){function t(e){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).call(this,e))}return Object(r.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return x.a.createElement("div",{className:"lobbyTop"},x.a.createElement("div",{className:"profilePicContainer"},x.a.createElement("img",{className:"profilePic",src:this.props.userProfilePic})),x.a.createElement(ma,{name:this.props.username}))}}]),t}(x.a.Component),da=function(e){function t(e){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).call(this,e))}return Object(r.a)(t,e),Object(n.a)(t,[{key:"onCreateRoomButton",value:function(e){this.props.onCreateRoomButton(e)}},{key:"render",value:function(){var e=this;return x.a.createElement("div",{className:"lobbyCreateRoom"},x.a.createElement("div",{className:"lobbyCreateRoomButton",onClick:function(t){return e.onCreateRoomButton(t)}},"Create New Room"))}}]),t}(x.a.Component),fa=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={roomName:"Regular Room",maxPlayer:8},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"onCreateRoomButton",value:function(e){this.props.onCreateRoom(this.state.roomName,this.state.maxPlayer)}},{key:"handleRoomNameChange",value:function(e){this.setState({roomName:e.target.value})}},{key:"handlePlayerChange",value:function(e){this.setState({maxPlayer:parseInt(e.target.value)||0})}},{key:"render",value:function(){var e=this;return x.a.createElement("div",{className:"lobbyCreateRoomOption"},x.a.createElement("div",{className:"createRoomRow"},x.a.createElement("div",{className:"optionName"},"Room Name: "),x.a.createElement("textarea",{className:"inputBox",onChange:function(t){return e.handleRoomNameChange(t)},value:this.state.roomName})),x.a.createElement("div",{className:"createRoomRow"},x.a.createElement("div",{className:"optionName"},"Max Player: "),x.a.createElement("textarea",{className:"inputBox",onChange:function(t){return e.handlePlayerChange(t)},value:this.state.maxPlayer})),x.a.createElement("div",{className:"createRoomRow createRoomButtonRow"},x.a.createElement("div",{className:"createRoomButton",onClick:function(t){return e.onCreateRoomButton(t)}},"Create ROom")))}}]),t}(x.a.Component),ya=function(e){function t(e){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).call(this,e))}return Object(r.a)(t,e),Object(n.a)(t,[{key:"onRoomJoinClick",value:function(e,t){this.props.onRoomJoin(t)}},{key:"render",value:function(){var e=this,t=this.props.roomList,a=[],s=function(s){var n=t[s];if(n.inGame)return"continue";a.push(x.a.createElement("div",{className:"roomListContent",key:n.id+"container"},x.a.createElement("div",{className:"roomListName",key:n.id+"name"},n.name),x.a.createElement("div",{className:"roomListPlayer",key:n.id+"number"},"Player: ".concat(n.userList.length,"/").concat(n.maxPlayer)),x.a.createElement("div",{className:"roomListJoin",key:n.id+"join",onClick:function(t){return e.onRoomJoinClick(t,n)}},n.userList.length===n.maxPlayer?"Full":"Join")))};for(var n in t)s(n);return 0===a.length&&a.push(x.a.createElement("div",{className:"roomListSadness",key:"noroom"},"Currently no room! -.-")),x.a.createElement("div",{className:"lobbyRoomList"},a)}}]),t}(x.a.Component),va=function(e){function t(e){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).call(this,e))}return Object(r.a)(t,e),Object(n.a)(t,[{key:"onRoomExit",value:function(e){var t=this.props.roomList[this.props.myself.roomID];this.props.onRoomExit(t)}},{key:"onStartGame",value:function(e){var t=this.props.roomList[this.props.myself.roomID];this.props.onStartGame(t)}},{key:"render",value:function(){var e=this,t=this.props.roomList[this.props.myself.roomID];if(t){for(var a=t.userList,s=this.props.myself,n=[],i=0;i<a.length;i++){var o=a[i];n.push(x.a.createElement("div",{className:"lobbyRoomUser",key:o.key+"userinroom"},x.a.createElement("img",{className:"lobbyRoomUserIcon",key:o.key+"userinroomIcon",src:o.profilePic}),x.a.createElement("div",{className:"lobbyRoomUserName",key:o.key+"userinroomName"},o.username)))}var r=[];return t.creatorKey===s.key?(r.push(x.a.createElement("div",{className:"lobbyRoomStart lobbyRoomButton",key:"lobbyRoomStart",onClick:function(t){return e.onStartGame(t)}},"Start Game")),r.push(x.a.createElement("div",{className:"lobbyRoomBack lobbyRoomButton",key:"lobbyRoomBack",onClick:function(t){return e.onRoomExit(t)}},"Remove Room"))):r.push(x.a.createElement("div",{className:"lobbyRoomBack lobbyRoomButton",key:"lobbyRoomExit",onClick:function(t){return e.onRoomExit(t)}},"Exit Room")),x.a.createElement("div",{className:"lobbyRoom"},x.a.createElement("div",{className:"lobbyRoomName"},t.name),x.a.createElement("div",{className:"lobbyRoomUserContainer"},n),x.a.createElement("div",{className:"lobbyRoomButtonContainer"},r))}console.log("???")}}]),t}(x.a.Component),ga=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={showing:1},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"onCreateRoom",value:function(e,t){this.props.onCreateRoom(e,t)}},{key:"onCreateRoomButton",value:function(e){this.setState({showing:(this.state.showing+1)%2})}},{key:"render",value:function(){var e,t=this;return e=1===this.state.showing?x.a.createElement(ya,{roomList:this.props.roomList,onRoomJoin:function(e){return t.props.onRoomJoin(e)}}):x.a.createElement(fa,{onCreateRoom:function(e,a){return t.onCreateRoom(e,a)}}),"room"===this.props.location?x.a.createElement("div",{className:"lobbyBot"},x.a.createElement(va,{onRoomExit:function(e){return t.props.onRoomExit(e)},onStartGame:function(e){return t.props.onStartGame(e)},roomList:this.props.roomList,myself:this.props.myself})):x.a.createElement("div",{className:"lobbyBot"},x.a.createElement(da,{onCreateRoomButton:function(e){return t.onCreateRoomButton(e)},currentShowing:this.state.showing}),x.a.createElement("div",{className:"lobbyBotBot"},e))}}]),t}(x.a.Component),ba=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={inputValue:"",currentTab:"lobbyChat"},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"handleInputChange",value:function(e){this.setState({inputValue:e.target.value})}},{key:"handleButtonClick",value:function(e){console.log(this.state.inputValue),this.props.sendMessage(this.state.inputValue,this.state.currentTab),this.setState({inputValue:""})}},{key:"handleTabClick",value:function(e,t){console.log(t),this.setState({currentTab:t})}},{key:"render",value:function(){var e=this,t=this.props.chatList,a=[],s=function(t){var s={};t!==e.state.currentTab&&(s.borderBottom="solid 5px"),a.push(x.a.createElement("div",{className:"lobbyChatTab",key:t+"ChatTab",style:s,onClick:function(a){return e.handleTabClick(a,t)}},t.replace("Chat","")))};for(var n in t)s(n);for(var i=a.length;i<5;i++)a.push(x.a.createElement("div",{className:"lobbyChatTabFiller",key:"filler".concat(i)}));var o=t[this.state.currentTab],r=[];for(var l in o){var c=o[l].picture,u=o[l].message,h=o[l].username;r.unshift(x.a.createElement("div",{key:l,className:"chatContent"},x.a.createElement("img",{className:"chatPicture",src:c}),x.a.createElement("div",{className:"chatMessageContainer"},x.a.createElement("div",{className:"chatUsername"},h),x.a.createElement("div",{className:"chatMessage"},u))))}return x.a.createElement("div",{className:"lobbyChat"},x.a.createElement("div",{className:"lobbyChatTitle"},"Chat"),x.a.createElement("div",{className:"lobbyChatTabs"},a),x.a.createElement("div",{className:"lobbyChatMessages"},r),x.a.createElement("div",{className:"lobbyChatForm"},x.a.createElement("div",{className:"lobbyChatInput"},x.a.createElement("textarea",{className:"inputBox",onChange:function(t){return e.handleInputChange(t)},value:this.state.inputValue})),x.a.createElement("div",{className:"lobbyChatSubmit"},x.a.createElement("button",{className:"sendButton",onClick:function(t){return e.handleButtonClick(t)}},"Send"))))}}]),t}(x.a.Component),ka=(a(593),function(e){function t(e){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).call(this,e))}return Object(r.a)(t,e),Object(n.a)(t,[{key:"exitGame",value:function(){this.props.exitGame()}},{key:"render",value:function(){var e,t,a=this;return this.props.isDead&&(e=x.a.createElement("div",{className:"gameDead"},"You have been killed! But you can still spectate the game")),this.props.showButton&&(t=x.a.createElement("div",{className:"gameExitGame"},x.a.createElement("div",{className:"gameExitGameButton",onClick:function(){return a.exitGame()}},"Exit Game"))),x.a.createElement("div",{className:"gameMid"},x.a.createElement("div",{className:"gameJudge"},this.props.text,e),t)}}]),t}(x.a.Component)),Ea=a(272),wa=a.n(Ea),xa=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={guess:new Array(a.props.game.userList.length).fill("?"),currentIndex:void 0,showing:!1,selecting:void 0,isDead:!1},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"handleGuessClick",value:function(e,t){e.stopPropagation();var a=this.state.showing;this.props.me.place!==t&&(!1===a?this.setState({showing:!0,currentIndex:t}):!0===a&&this.state.currentIndex===t?this.setState({showing:!1}):this.setState({currentIndex:t}))}},{key:"handlePickClick",value:function(e,t){var a=this.state.currentIndex,s=this.state.guess;s[a]=t,this.setState({showing:!1,guess:s})}},{key:"handleUserClick",value:function(e,t){var a=this.props.me,s=this.props.game;if(s&&s.commandList[a.key]){var n=s.commandList[a.key];("any"===n.type||"other"===n.type&&s.userList[t].key!==a.key)&&(this.props.handleUserClick(t),this.setState({selecting:t}))}}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.me,s=this.props.game;s&&(s.commandList[a.key]||Number.isInteger(this.state.selecting)&&this.setState({selecting:void 0}))}},{key:"render",value:function(){for(var e,t=this,a=[],s=[],n=[],i=[],o=this.props.me,r=this.props.game,l=r.userList,c=l.length%4-1,u=Math.floor(l.length/4),h=0,m=0,p=function(e){var p=0;c>=h&&(p=1),m>=u+p&&(h++,m=0);var d=void 0;switch(h){case 0:d=a;break;case 1:d=s;break;case 2:d=n;break;case 3:d=i}var f=l[e],y="";h%2===1&&(y="gameUserContainerColumn");var v={},g=t.state.guess[e];f.key===o.key&&(v.background="rgb(0, 255, 106)",g=o.role),"werewolf"===o.role&&"werewolf"===f.role&&(g="werewolf"),"investigator"===o.role&&r.investResult&&(r.judge=r.investResult);var b={border:"0px",backgroundImage:""};e===t.state.selecting&&(b.border="solid 5px yellow"),f.isDead&&(b.backgroundImage="url(".concat(wa.a,")")),d.push(x.a.createElement("div",{style:b,className:"gameUserContainer "+y,key:"gameUserContainer"+e,onClick:function(a){return t.handleUserClick(a,e)}},x.a.createElement("div",{style:v,className:"gameUserPosition",key:"gameUserPosition"+e},e+1),x.a.createElement("div",{className:"gameUserGuess",index:e,key:"gameUserGuess"+e,onClick:function(a){return t.handleGuessClick(a,e)}},g),x.a.createElement("img",{className:"gameUserPic",src:f.profilePic,key:"gameUserPic"+e}),x.a.createElement("div",{className:"gameUserName",key:"gameUserName"+e},f.username))),m++},d=0;d<l.length;d++)p(d);return this.state.showing&&(e=x.a.createElement("div",{className:"gameUserPicker"},x.a.createElement("div",{className:"gamePick",onClick:function(e){return t.handlePickClick(e,"\u221a")}},"\u221a"),x.a.createElement("div",{className:"gamePick",onClick:function(e){return t.handlePickClick(e,"X")}},"X"),x.a.createElement("div",{className:"gamePick",onClick:function(e){return t.handlePickClick(e,"?")}},"?"))),x.a.createElement("div",{className:"gameDiv"},e,x.a.createElement("div",{className:"gameColumn1"},i),x.a.createElement("div",{className:"gameColumn2"},x.a.createElement("div",{className:"gameTopContainer"},a),x.a.createElement(ka,{text:r.judge,isDead:this.props.isDead,showButton:r.end,exitGame:function(){return t.props.exitGame()}}),x.a.createElement("div",{className:"gameBotContainer"},n)),x.a.createElement("div",{className:"gameColumn3"},s))}}]),t}(x.a.Component),Ca=function(e){function t(e){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).call(this,e))}return Object(r.a)(t,e),Object(n.a)(t,[{key:"receiveChatMessage",value:function(e,t){console.log("Lobby received: "+e),this.props.sendMessage(e,t)}},{key:"onCreateRoom",value:function(e,t){this.props.onCreateRoom(e,t)}},{key:"handleUserClick",value:function(e){var t=this.props.room,a=this.props.myself,s=t.game;this.props.updateCommand(s,s.commandList[a.key],e)}},{key:"render",value:function(){var e=this,t=this.props.room,a=this.props.myself;if(t){var s=t.game;if(s&&"game"===a.location)return x.a.createElement("div",{className:"lobby"},x.a.createElement("div",{className:"lobbyLeft"},x.a.createElement(xa,{game:s,me:a,isDead:a.isDead,handleUserClick:function(t){return e.handleUserClick(t)},exitGame:function(){return e.props.exitGame()}})),x.a.createElement(ba,{chatList:this.props.chatList,sendMessage:function(t,a){return e.receiveChatMessage(t,a)}}))}return x.a.createElement("div",{className:"lobby"},x.a.createElement("div",{className:"lobbyLeft"},x.a.createElement(pa,{userProfilePic:this.props.userProfilePic,username:this.props.username}),x.a.createElement(ga,{location:this.props.location,roomList:this.props.roomList,myself:this.props.myself,onCreateRoom:function(t,a){return e.onCreateRoom(t,a)},onRoomJoin:function(t){return e.props.onRoomJoin(t)},onRoomExit:function(t){return e.props.onRoomExit(t)},onStartGame:function(t){return e.props.onStartGame(t)}})),x.a.createElement(ba,{chatList:this.props.chatList,sendMessage:function(t,a){return e.receiveChatMessage(t,a)}}))}}]),t}(x.a.Component),Sa=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={roomList:{},userList:{},pulse:null,myself:{},room:{},didGameStarted:!1},a.timer=void 0,a.onMounted(),a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"isOnline",value:function(){var e=Object(ha.a)(ua.a.mark((function e(t){return ua.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.firebaseRef.child("virtualServer").child("userList").once("value",(function(e){var a=e.val();for(var s in a){if(a[s].getId()===t)return!0}return!1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSessionDataChanged",value:function(e){console.log("//data changed: "),console.log(e)}},{key:"onSessionMetadataChanged",value:function(e){console.log("//metadata changed:"),console.log(e)}},{key:"componentDidMount",value:function(){var e=this;this.beforeunloadFunction=function(t){return e.onUnload(t)},window.addEventListener("beforeunload",this.beforeunloadFunction),window.fbReferenceWithHope=this.firebaseRef}},{key:"onUnload",value:function(e){this.onDisconnect(this.state.myself),e.preventDefault()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.beforeunloadFunction),clearTimeout(this.timer),this.onDisconnect(this.state.myself)}},{key:"onDisconnect",value:function(e){console.log("unmounted");var t=this.firebaseRef,a=t.child("virtualServer");e.key===this.state.myself.key&&(a.child("userList").off(),a.child("pulse").off(),a.child("petition").child(e.key).remove(),a.child("userList").child(e.key).remove(),t.child("lobby").off(),t.child("lobbyChat").off(),t.child("roomList").off()),e.roomID&&this.onRoomExit(e,this.state.roomList[e.roomID]),Object.keys(this.state.userList).length<=1&&(a.set({}),t.child("roomList").set({}))}},{key:"onMounted",value:function(){var e=this;console.log("LMG mounted and loaded"),this.firebaseRef=this.getSessionDatabaseRef();var t=this.firebaseRef,a=t.child("virtualServer"),s=this;console.log(t);var n=new Oa(this.getMyUserId()),i=a.child("userList"),o=i.push(),r=o.key;n.key=r,n.location="lobby",this.state.myself=n,o.set(n,(function(e){if(e)throw e;t.once("value",(function(e){var t=e.val();console.log(t);var n=t.virtualServer.userList,o=t.virtualServer.pulse;o?s.setState({userList:n,pulse:o}):i.limitToFirst(1).once("value",(function(e){o=Object.keys(e.val())[0],console.log(o),s.setState({userList:n,pulse:o}),a.child("pulse").set(o)}))}))}));var l=t.child("roomList");l.once("value",(function(t){t?e.state.roomList=t.val():l.set({},(function(e){if(e)throw e}))})),l.on("value",(function(t){var a=t.val();e.onRoomListChange(a)}));var c=t.child("lobby");c.once("value",(function(t){t?e.state.lobby=t.val():c.set({},(function(e){if(e)throw e}))})),c.on("value",(function(t){var a=t.val();e.setState({lobby:a})})),t.child("lobbyChat").on("value",(function(t){var a=t.val();e.setState({lobbyChat:a})})),a.child("userList").on("value",(function(e){s.setState({userList:e.val()}),a.once("value",(function(e){var t=e.val();s.nextPulse(t.pulse,i,a)}))})),a.child("pulse").on("value",(function(e){clearTimeout(s.timer),s.timer=void 0;var t=e.val();if(s.setState({pulse:t}),s.state.myself.key===t)s.nextPulse(t,i,a);else{var n=setTimeout((function(){a.child("petition").child(t).update(Object(la.a)({},s.state.myself.key,!0),(function(e){if(e)throw e;a.once("value",(function(e){var n=e.val();if("object"===typeof n.petition[t]){var o=Object.keys(n.petition[t]).length,r=Object.keys(n.userList).length;if(o>=Math.floor(r/2)){s.nextPulse(t,i,a);var l=s.state.userList[t];s.onDisconnect(l)}}}))}))}),5e3);s.timer=n}}))}},{key:"nextPulse",value:function(){var e=Object(ha.a)(ua.a.mark((function e(t,a,s){var n,i;return ua.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this,!t){e.next=6;break}return e.next=4,s.child("userList").orderByKey().startAt(t).limitToFirst(2).once("value",function(){var e=Object(ha.a)(ua.a.mark((function e(o){var r;return ua.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=o.val())?i=Object.keys(r)[1]:console.log("nothing in userList?"),!i){e.next=8;break}return n.setState({currentPulse:i}),e.next=6,s.child("pulse").set(i);case 6:e.next=10;break;case 8:return e.next=10,a.limitToFirst(1).once("value",function(){var e=Object(ha.a)(ua.a.mark((function e(a){return ua.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.keys(a.val())[0],console.log(t),n.setState({pulse:t}),e.next=5,s.child("pulse").set(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:e.next=8;break;case 6:return e.next=8,a.limitToFirst(1).once("value",function(){var e=Object(ha.a)(ua.a.mark((function e(a){return ua.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.keys(a.val())[0],console.log(t),n.setState({pulse:t}),e.next=5,s.child("pulse").set(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return e.stop()}}),e,this)})));return function(t,a,s){return e.apply(this,arguments)}}()},{key:"updateUserFirebase",value:function(e,t){var a=t.val(),s=this.firebaseRef;if(s.child("virtualServer").child("userList").child(e.key).set(e),e.roomID){var n=a.roomList[e.roomID];n.creatorKey===e.key&&s.child("roomList").child(e.roomID).child("creator").set(e);for(var i=n.userList,o=0,r=0;r<i.length;r++)if(i[r].key===e.key){i[r]=e,o=r;break}if(s.child("roomList").child(e.roomID).child("userList").child(o).set(e),n.inGame){var l=n.game,c=l.userList,u=l.aliveList,h=l.deadList,m=!1;c.forEach((function(t,a){t.key!==e.key||s.child("roomList").child(e.roomID).child("game").child("userList").child(a).set(e)})),u.forEach((function(t,a){if(t.key===e.key)return m=!0,void s.child("roomList").child(e.roomID).child("game").child("aliveList").child(a).set(e)})),m||h.forEach((function(t,a){t.key!==e.key||s.child("roomList").child(e.roomID).child("game").child("deadList").child(a).set(e)}))}}}},{key:"onChatMessage",value:function(e,t){if(console.log("Main received: ".concat(e)),!(e.length<=0)){var a=this.firebaseRef,s=this.getMyUserId();if("lobbyChat"===t){var n=a.child("lobbyChat").push(),i=new Ia(e,se.getPhotoUrl(s),se.getName(s));n.set(i,(function(e){if(e)throw e}))}else if("roomChat"===t||"werewolfChat"===t||"gameChat"===t){var o=this.state.myself;if(!o.roomID)throw"up right now";var r=this.state.roomList[o.roomID],l=new Ia(e,se.getPhotoUrl(s),se.getName(s));"werewolfChat"===t?(r.game.werewolfChat||(r.game.werewolfChat=[]),r.game.werewolfChat.push(l),a.child("roomList").child(o.roomID).child("game").child("werewolfChat").set(r.game.werewolfChat)):"gameChat"===t?r.game.speakerKey===o.key&&(r.game.gameChat||(r.game.gameChat=[]),r.game.gameChat.push(l),a.child("roomList").child(o.roomID).child("game").child("gameChat").set(r.game.gameChat)):(r.chat||(r.chat=[]),r.chat.push(l),a.child("roomList").child(o.roomID).set(r))}}}},{key:"createRoom",value:function(e,t){var a=this.state.myself,s=new ja(a,e,t);this.onRoomJoin(s)}},{key:"onRoomListChange",value:function(e){var t=e,a=this.state.myself;if(null===e)return a.location="lobby",delete a.roomID,void this.setState({roomList:{},myself:a});if(a.roomID){var s=t[a.roomID];if(!s)return this.onRoomExit(a),void alert("Room has been deleted by the host.");if(s.inGame){var n=s.game;return this.gameStarted(a,n)}this.setState({room:s})}this.setState({roomList:t,myself:a})}},{key:"onRoomExit",value:function(e,t){var a=this,s=e,n=this.firebaseRef;if(t&&t.creatorKey){for(var i,o=0;o<t.userList.length;o++){if(t.userList[o].key===s.key){i=o;break}}if(Number.isInteger(i)&&t.userList.splice(i,1),t.game&&this.exitGame(t.game,s),t.creatorKey===s.key)if(0===t.userList.length)n.child("roomList").child(t.id).remove();else{var r=t.userList[0];t.creator=r,t.creatorId=r.userId,t.creatorKey=r.key}n.child("roomList").child(t.id).set(t)}s.location="lobby",delete s.roomID,s.key===this.state.myself.key&&this.setState({myself:s,room:void 0,didGameStarted:!1}),n.once("value",(function(e){a.updateUserFirebase(s,e)}))}},{key:"onRoomJoin",value:function(e){var t=this,a=this.state.myself,s=this.firebaseRef;e.maxPlayer>e.userList.length&&(e.userList.push(a),a.location="room",a.roomID=e.id,this.setState({myself:a,room:e}),s.child("roomList").child(e.id).set(e,(function(e){if(e)throw e;s.once("value",(function(e){t.updateUserFirebase(a,e)}))})))}},{key:"onStartGame",value:function(e){if(e){var t=this.state.myself,a=this.firebaseRef;if(e.creatorKey===t.key){if(e.userList.length<4)return void alert("Minimum player is 4");var s=new La(t,e.userList);e.inGame=!0,e.game=s,a.child("roomList").child(t.roomID).set(e)}}}},{key:"gameStarted",value:function(e,t){var a=this,s=this.firebaseRef;if(!this.state.didGameStarted){console.log("game has started");for(var n=0;n<t.aliveList.length;n++)if(e.key===t.aliveList[n].key){e=t.aliveList[n];break}e.location="game",this.setState({myself:e,didGameStarted:!0}),s.once("value",(function(t){a.updateUserFirebase(e,t)})),s.child("roomList").child(e.roomID).child("game").on("value",(function(e){a.onGameUpdate(e.val())}))}}},{key:"runningTheGame",value:function(e){var t=this;if(e){var a=this.firebaseRef,s=this.state.myself,n=0;if("identify"===e.step)e.judge="Werewolfs, wake up and identify each other",n=5e3,e.step="killing";else if("killing"===e.step){e.judge="Werewolfs, wake up and choose a player to kill";for(var i=this.getUserKeyByRole(e,"werewolf"),o=0;o<i.length;o++)if(i[o]){var r=i[o],l=new Ra(r,void 0,"any");e.commandList[r]=l}n=15e3,e.step="investigate"}else if("investigate"===e.step){for(var c=this.getUserKeyByRole(e,"werewolf"),u=[],h=0;h<c.length;h++){var m=e.commandList[c[h]];this.validateCommand(e,m)&&u.push(m.value)}var p=this.findVotingResult(u);Number.isInteger(p)?e.killing=p:e.killing=e.aliveList[Math.floor(Math.random()*e.aliveList.length)].place,e.commandList=this.resetCommandList(),e.judge="Investigator, wake up and choose a person to investigate.",n=1e4;var d=this.getUserKeyByRole(e,"investigator")[0];if(d){var f=new Ra(d,void 0,"other");e.commandList[d]=f}e.step="investigatorResult"}else if("investigatorResult"===e.step){var y=this.getUserKeyByRole(e,"investigator")[0];if(y&&this.validateCommand(e,e.commandList[y])){var v=e.commandList[y].value,g=e.userList[v];g&&("werewolf"===g.role?e.investResult="The person you investigated is a werewolf":e.investResult="The person you investigated is not a werewolf"),e.commandList=this.resetCommandList()}n=5e3,e.step="doctor"}else if("doctor"===e.step){e.investResult=null,e.judge="Doctor, wake up and apply medicine to another player";var b=this.getUserKeyByRole(e,"doctor")[0];if(b){var k=new Ra(b,void 0,"any");e.commandList[b]=k}n=1e4,e.step="day"}else if("day"===e.step){e.judge="Time passed, now is the day.";var E,w=this.getUserKeyByRole(e,"doctor")[0];if(w){if(this.validateCommand(e,e.commandList[w]))E=e.commandList[w].value;Number.isInteger(E)||(E=e.aliveList[Math.floor(Math.random()*e.aliveList.length)].place)}e.overdose=!1,Number.isInteger(E)&&(Number.isInteger(e.curing)&&E===e.curing&&(e.overdose=!0),e.curing=E),e.commandList=this.resetCommandList(),n=5e3,e.step="announce"}else if("announce"===e.step){var x="nothing";if(Number.isInteger(e.killing)){var C=!1;if(Number.isInteger(e.curing)&&e.curing===e.killing&&(C=!0),C)x="This night, no one has died.";else{x=e.killing+1+" has been killed.";var S=e.userList[e.killing];e=this.removePlayer(e,S)}}e.overdose&&(x+=" The player at position "(e.curing+1)+" has overdose the medicine and died.",(e=this.removePlayer(e,e.userList[e.curing])).curing=null,e.overdose=null),e.judge=x,n=5e3,e.step="discussion"}else if("discussion"===e.step){var O=e.discussionIndex;null===O||void 0===O?O=0:O++,n=15e3;for(var j=e.userList[O];j.isDead;)if(O++,!(j=e.userList[O])){e.step="vote",n=100;break}O===e.userList.length-1&&(e.step="vote"),j&&(e.speakerKey=j.key,e.judge="Now the player at position ".concat(O+1," ").concat(j.username," have 15 second to speak in the game channel."),e.discussionIndex=O)}else if("vote"===e.step){e.discussionIndex=null,e.speakerKey=null;for(var L=0;L<e.aliveList.length;L++){var I=e.aliveList[L].key,R=new Ra(I,void 0,"any");e.commandList[I]=R}e.judge="Players now vote for a player to kill that they suspect to be the werewolf.",e.step="hang",n=2e4}else if("hang"===e.step){var N=[];for(var D in e.commandList)this.validateCommand(e,e.commandList[D])?Number.isInteger(e.commandList[D].value)&&N.push(e.commandList[D].value):N.push(e.aliveList[Na(0,e.aliveList.length-1)].place);var U=this.findVotingResult(N),P=e.userList[U];e.commandList=this.resetCommandList(),(e=this.removePlayer(e,P)).judge="The player at position ".concat(U+1," ").concat(P.username," has been voted to be killed."),n=5e3,e.step="night"}else if("night"===e.step)e.judge="Time passed, now is the night.",n=5e3,e.step="killing";else if("announceWin"===e.step){n=-1;var T=this.gameCheckWin(e);"werewolf"===T?e.judge="Werewolves have won the game!":"villager"===T&&(e.judge="Villagers have won the game!"),e.judge+=" You can exit the menu by clicking the button below.",e.end=!0;var M=this.state.room;M.inGame=!1,M.game=e,a.child("roomList").child(s.roomID).set(M)}if(this.gameCheckWin(e)&&(e.step="announceWin"),n>=0){var G=setTimeout((function(){a.child("roomList").child(s.roomID).child("game").once("value",(function(e){t.runningTheGame(e.val())}))}),n);this.state.timerID=G,this.setState({timerID:G})}a.child("roomList").child(s.roomID).child("game").set(e)}}},{key:"exitGame",value:function(e,t){var a=this,s=this.firebaseRef;if(t||(t=this.state.myself),t.location="room",t.isDead||this.removePlayer(e,t),e&&e.creatorKey===t.key)if(e.aliveList.length>0){var n=e.aliveList[0];e.creatorKey=n.key,s.child("roomList").child(t.roomID).child("game").set(e)}else s.child("roomList").child(t.roomID).child("game").remove();t.key===this.state.myself.key&&(this.state.timerID&&(clearTimeout(this.state.timerID),this.setState({timerID:void 0})),this.setState({didGameStarted:!1}),s.child("roomList").child(t.roomID).child("game").off()),s.once("value",(function(e){a.updateUserFirebase(t,e)}))}},{key:"updateCommand",value:function(e,t,a){t.value=a;var s=this.firebaseRef,n=this.state.myself;s.child("roomList").child(n.roomID).child("game").child("commandList").child(t.key).set(t)}},{key:"resetCommandList",value:function(e){return{sample:new Ra(0)}}},{key:"removePlayer",value:function(e,t){if(t||console.log("not user"),e){var a;if(!t.isDead)t.isDead=!0,e.aliveList&&(e.aliveList.forEach((function(e,s){e.key!==t.key||(a=s)})),e.aliveList.splice(a,1),e.deadList?e.deadList.push(t):e.deadList=[t]);return t.key===this.state.myself.key&&this.setState({myself:t}),e}}},{key:"onGameUpdate",value:function(e){var t=this.state.myself;if(!e)return console.log("not a game"),void this.exitGame();e.creatorKey===t.key&&(this.state.timerID||this.runningTheGame(e)),e.userList.forEach((function(e){e.key!==t.key||(t=e)})),this.state.room.game=e,this.setState({room:this.state.room,myself:t})}},{key:"getUserKeyByRole",value:function(e,t){var a=[];return e.userList.forEach((function(e,s){e.role===t&&(e.isDead||a.push(e.key))})),a}},{key:"validateCommand",value:function(e,t){var a=t.target,s=e.userList[t.value];if(!s)return!1;if("any"===a){if(s.key)return!0}else if("good"===a){if("werewolf"!==s.role)return!0}else{if("bad"!==a)return;if("werewolf"===s.role)return!0}return!1}},{key:"findVotingResult",value:function(e){for(var t=0,a=new Array(e.length).fill(0),s=!1,n=0,i=0;i<e.length;i++)Number.isInteger(a[e[i]])?a[e[i]]++:a[e[i]]=1,a[e[i]]>t?(t=a[e[i]],n=[i],s=!1):a[e[i]]===t&&(s=!0,n.push(i));return s?e[n[Math.floor(Math.random()*n.length)]]:e[n[0]]}},{key:"gameCheckWin",value:function(e){var t=this.getUserKeyByRole(e,"werewolf");return t.length>=e.aliveList.length/2?"werewolf":0===t.length&&"villager"}},{key:"render",value:function(){var e=this,t=(this.getSessionId(),this.getMyUserId()),a=se.getPhotoUrl(t),s=se.getName(t),n=(this.getSessionUserIds().map((function(e){return x.a.createElement("li",{key:e},e)})),this.getSessionCreatorUserId(),this.state.userList),i=[];for(var o in n){var r=n[o];i.push(x.a.createElement("li",{key:o},r.key))}var l={};l.lobbyChat=this.state.lobbyChat;var c=this.state.myself;if(c.roomID){var u=this.state.roomList[c.roomID];l.roomChat=u.chat,u.game&&("werewolf"===c.role&&(l.werewolfChat=u.game.werewolfChat),l.gameChat=u.game.gameChat)}var h=this.state.myself.location;return"lobby"===h||"room"===h||"game"===h?x.a.createElement("div",{className:"werewolf"},x.a.createElement(Ca,{sendMessage:function(t,a){return e.onChatMessage(t,a)},chatList:l,roomList:this.state.roomList,onCreateRoom:function(t,a){return e.createRoom(t,a)},onRoomJoin:function(t){return e.onRoomJoin(t)},onRoomExit:function(t){return e.onRoomExit(e.state.myself,t)},onStartGame:function(t){return e.onStartGame(t)},userProfilePic:a,username:s,location:h,myself:this.state.myself,room:this.state.room,updateCommand:function(t,a,s){return e.updateCommand(t,a,s)},exitGame:function(){return e.exitGame()}})):x.a.createElement("div",{className:"werewolf"},"Now Loading...")}}]),t}(ee),Oa=function(){function e(t){Object(s.a)(this,e),this.userId=t,this.profilePic=se.getPhotoUrl(t),this.username=se.getName(t),this.key=void 0,this.location=void 0,this.isDead=!1}return Object(n.a)(e,[{key:"getKey",value:function(){return this.key}},{key:"getId",value:function(){return this.userId}}]),e}(),ja=function e(t,a,n){Object(s.a)(this,e),this.creator=t,this.creatorId=t.userId,this.creatorKey=t.key,this.userList=[],this.id=parseInt(String(Math.random()).substring(2)),this.name=a,this.maxPlayer=n,this.chat=[],this.inGame=!1},La=function e(t,a){Object(s.a)(this,e);for(var n=[],i=[],o=1;o<=a.length;o++)switch(i.push(o-1),o){case 1:case 2:case 7:n.push("villager");break;case 3:n.push("investigator");break;case 4:case 5:case 8:n.push("werewolf");break;case 6:n.push("doctor")}this.userList=[];for(var r=0;r<a.length;r++){var l=a[r],c=Na(0,n.length-1),u=Na(0,i.length-1),h=n[c],m=i[u];l.role=h,l.place=m,l.location="game",this.userList[m]=l,n.splice(c,1),i.splice(u,1)}this.gameChat=[],this.werewolfChat=[],this.aliveList=a,this.deadList=[],this.commandList={sample:new Ra(0)},this.creatorKey=t.key,this.judge="",this.day=0,this.currentTime="night",this.step="identify",this.investResult=null,this.discussionIndex=null,this.speakerKey=null},Ia=function e(t,a,n){Object(s.a)(this,e),this.message=t,this.picture=a,this.username=n},Ra=function e(t,a,n){Object(s.a)(this,e),this.open=!0,this.key=t,this.value=null,this.target=a||"any",this.type=n||"any"};function Na(e,t){return Math.floor(Math.random()*(t-e+1))+e}window.fet=function(e){return e.once("value",(function(e){console.log(e.val())}))},window.fetAll=function(){return window.fbReferenceWithHope.once("value",(function(e){console.log(e.val())}))},window.cleanse=function(){window.fbReferenceWithHope.child("virtualServer").set({}),window.fbReferenceWithHope.child("roomList").set({})};var Da={chatroom:{title:"Chat Room",authors:"Joe Tessler",description:"A place to chat with a group of friends",minUsers:1,maxUsers:10,component:re},tictactoe:{title:"Tic Tac Toe",authors:"Joe Tessler",description:"The classic two-player game with Xs and Os",minUsers:2,maxUsers:2,component:at},rockpaperscissors:{title:"Rock Paper Scissors",authors:"Devraj Mehta",description:"Class 2-player rock paper scissors",minUsers:2,maxUsers:2,component:Pe},multiplication:{title:"Multiplication",authors:"Edwin Fuquen",description:"A multiplication speed game",minUsers:2,maxUsers:2,component:xe},pong:{title:"Pong",authors:"Devraj Mehta",description:"Classic Pong",minUsers:1,maxUsers:2,component:De},pokemon:{title:"Pokemon Simulator",authors:"Imani Greenidge and Raishan Bernard",description:"Turn Based Pokemon Battle",minUsers:1,maxUsers:2,component:Le},questions:{title:"21 Questions",authors:"Jordan K., Prieya N.",description:"21 questions between 2 players",minUsers:1,maxUsers:2,component:rt},photosharing:{title:"Spark",authors:"Ramata Williams and Andrea Cajamarca",description:"Ripping off Twitter, Instagram, AND Tumblr.",minUsers:2,maxUserss:5,component:Ze},uno:{title:"I Declare War",authors:"Nia Davis, Jackie He, Lisandro Mayancela, Steven Rosario",description:"The classic UNO game",minUsers:2,maxUsers:2,component:ra},mafia:{title:"Mafia",authors:"Caelan Springer, Daniel Lin, Daniel Zamilatskiy",description:"Your greatest friends can be your greatest enemy. Trust no one but yourself.",minUsers:1,maxUsers:20,component:we},cookieClicker:{title:"Cookie Clicker",authors:"Mahfuz,",description:"click the cookie fast as possible",minUsers:2,maxUsers:2,component:me},fight:{title:"fight",authors:"Linhong Zhou, Jennifer P",description:"FIGHT!",minUsers:2,maxUsers:2,component:na},Burst_Forth:{title:"Burst Forth",authors:"Jason Alvarez, William Collazo, Usman",description:"oof",minUsers:2,maxUsers:2,component:ea},TugOfWar:{title:"Tug Of War",authors:"Joel Veras",description:"Pull the rope and win ",minUsers:2,maxUsers:2,component:nt},googlegossip:{title:"Google Gossip",authors:"Zaara Afida, Jermain Lewis, Daril Alanis",description:"We are here to spill teas and destroy lives while exposing fake people around us.",minUsers:1,maxUsers:10,component:ve},werewolf:{title:"Werewolf",author:"Liwei Huang",description:"basically mafia",minUsers:1,maxUsers:1/0,component:Sa}},Ua=a(653),Pa=a(654),Ta=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={drawerOpen:!1},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"setDrawerOpen",value:function(e){this.setState({drawerOpen:e})}},{key:"signOut",value:function(){j.a.auth().signOut().catch((function(e){return console.error("Failed to sign out",e)}))}},{key:"getTitle",value:function(){var e=this.props.location.pathname.split("/");return e.length>=2&&e[1]in Da?Da[e[1]].title:"Studio Games!"}},{key:"isInWaitingRoom",value:function(){return"/"===this.props.location.pathname}},{key:"render",value:function(){var e=this,t=j.a.auth().currentUser;return x.a.createElement("div",null,x.a.createElement(U.a,{position:"static"},x.a.createElement(Q.a,null,x.a.createElement(_.a,{style:{marginLeft:-12,marginRight:20},onClick:function(){return e.setDrawerOpen(!0)}},x.a.createElement(V.a,null)),x.a.createElement(b.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},this.getTitle()),x.a.createElement(T.a,{color:"inherit",onClick:function(){return e.signOut()}},"Sign out as ",t.displayName))),x.a.createElement(G.a,{open:this.state.drawerOpen,onClose:function(){return e.setDrawerOpen(!1)}},x.a.createElement(B.a,null,x.a.createElement(H.a,null,x.a.createElement(Y.a,{primaryTypographyProps:{variant:"title"},primary:"Navigation"})),x.a.createElement(Ua.a,{style:{textDecoration:"none"},to:"/"},x.a.createElement(z.a,{onClick:function(){return e.setDrawerOpen(!1)},disabled:this.isInWaitingRoom()},"Go back to the waiting room")),x.a.createElement(H.a,null,x.a.createElement(Y.a,{primaryTypographyProps:{variant:"title"},primary:"Active Games"})),x.a.createElement(z.a,{disabled:!0},"Not implemented yet"),x.a.createElement(H.a,null,x.a.createElement(Y.a,{primaryTypographyProps:{variant:"title"},primary:"Debug Tools"})),x.a.createElement(Ua.a,{style:{textDecoration:"none"},to:"/dataViewer"},x.a.createElement(z.a,{onClick:function(){return e.setDrawerOpen(!1)}},"View Game Data")))))}}]),t}(w.Component),Ma=Object(Pa.a)(Ta),Ga=a(289),Aa=a.n(Ga),_a=a(279),Wa=a.n(_a),Ba=a(282),Fa=a.n(Ba),Ha=a(281),Ka=a.n(Ha),Ya=a(130),qa=a.n(Ya),Va=a(280),Ja=a.n(Va),za=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={dialog_open:!0},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"componentWillMount",value:function(){document.title="Unknown Game"}},{key:"render",value:function(){var e=this.props.match.params.type,t=this.props.match.params.id;return x.a.createElement(Wa.a,{open:this.state.dialog_open,disableBackdropClick:!0,disableEscapeKeyDown:!0},x.a.createElement(Ja.a,null,"Unknown Game!"),x.a.createElement(Ka.a,null,x.a.createElement(qa.a,null,"Game Type: ",x.a.createElement("code",null,e)),x.a.createElement(qa.a,null,"Game ID: ",x.a.createElement("code",null,t)),x.a.createElement(qa.a,{style:{marginTop:10}},x.a.createElement("b",null,"Oops!")," You do not have the code for this game type. This is probably another team's project.  Please go back to the waiting room and try another game.")),x.a.createElement(Fa.a,null,x.a.createElement(Ua.a,{style:{textDecoration:"none"},to:"/"},x.a.createElement(T.a,{color:"primary",autoFocus:!0},"Go to waiting room"))))}}]),t}(w.Component),Xa=a(283),Qa=a.n(Xa),Za=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(n.a)(t,[{key:"addGame",value:function(){var e=j.a.auth().currentUser,t={type:this.props.type,users:[e.uid],creator:e.uid,timestamp:j.a.database.ServerValue.TIMESTAMP};j.a.database().ref("/session-metadata").push(t,(function(e){e&&console.error("Error storing session metadata",e)})),this.props.onClick&&this.props.onClick()}},{key:"render",value:function(){var e=this;return x.a.createElement(z.a,{onClick:function(){return e.addGame()}},this.props.title)}}]),t}(w.Component),$a=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={popoverOpen:!1},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"openPopover",value:function(e){e.preventDefault(),this.setState({popoverOpen:!0,anchorEl:e.currentTarget})}},{key:"closePopover",value:function(){this.setState({popoverOpen:!1})}},{key:"render",value:function(){var e=this,t=Object.keys(Da).map((function(t){return x.a.createElement(Za,{key:t,type:t,title:Da[t].title,onClick:function(){return e.closePopover()}})}));return x.a.createElement("center",{style:this.props.style},x.a.createElement(T.a,{variant:"contained",onClick:function(t){return e.openPopover(t)}},"Create new game"),x.a.createElement(Qa.a,{open:this.state.popoverOpen,anchorEl:this.state.anchorEl,onClose:function(){return e.closePopover()}},t))}}]),t}(w.Component),es=a(184),ts=a.n(es),as=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(n.a)(t,[{key:"handleChange",value:function(e){this.props.onFilterGames(e.target.value)}},{key:"render",value:function(){var e=this;return x.a.createElement(ts.a,{value:this.props.filterType,onChange:function(t){return e.handleChange(t)}},x.a.createElement(z.a,{value:vs.MY_GAMES},"Games I Created"),x.a.createElement(z.a,{value:vs.GAMES_WITH_SPACE},"Games with Space"),x.a.createElement(z.a,{value:vs.GAMES_I_AM_IN},"Games I Joined"),x.a.createElement(z.a,{value:vs.ALL_GAMES},"All Games"))}}]),t}(w.Component),ss=a(287),ns=a.n(ss),is=a(286),os=a.n(is),rs=a(284),ls=a.n(rs),cs=a(182),us=a.n(cs),hs=a(187),ms=a.n(hs),ps=a(285),ds=a.n(ps),fs=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={expanded:!1},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"gameDataExists",value:function(){return this.props.session.type in Da}},{key:"getGameData",value:function(){return this.gameDataExists()?Da[this.props.session.type]:{title:"Unknown Game Type",authors:"Unknown Authors",description:"You are missing the code for this game type. It is likely another team's project that is in development.",minUsers:0,maxUsers:0}}},{key:"getTitle",value:function(){return this.getGameData().title}},{key:"getSubtitle",value:function(){var e=new Date(this.props.session.timestamp);return"Created on "+new Intl.DateTimeFormat("en-US",{day:"numeric",hour:"numeric",minute:"numeric",month:"long",second:"numeric",timeZone:"America/New_York",weekday:"long",year:"numeric"}).format(e)+" by "+se.getName(this.props.session.creator)}},{key:"getAuthors",value:function(){return"This game was designed and built by "+this.getGameData().authors}},{key:"getDescription",value:function(){return this.getGameData().description}},{key:"getUserListHeader",value:function(){return this.props.session.users.length+"/"+this.getGameData().maxUsers+" users waiting to start"}},{key:"getGamePath",value:function(){return"/"+this.props.session.type+"/"+this.props.session.id}},{key:"joinSession",value:function(){var e=j.a.auth().currentUser.uid,t="/session-metadata/"+this.props.session.id+"/users",a=j.a.database().ref(t),s=this.getGameData().maxUsers;a.transaction((function(t){return t.length<s&&t.indexOf(e)<0&&t.push(e),t})).catch((function(e,t,a){console.error("Error joining session",e)}))}},{key:"deleteSession",value:function(){var e=this,t="/session/"+this.props.session.id;j.a.database().ref(t).remove().then((function(){e.deleteSessionMetadata()})).catch((function(t){console.warn("Error removing session data",t),e.deleteSessionMetadata()}))}},{key:"deleteSessionMetadata",value:function(){var e="/session-metadata/"+this.props.session.id;j.a.database().ref(e).remove().catch((function(e){console.error("Error removing session metadata",e)}))}},{key:"isGameCreator",value:function(){return j.a.auth().currentUser.uid===this.props.session.creator}},{key:"isInSession",value:function(){var e=j.a.auth().currentUser.uid;return this.props.session.users.indexOf(e)>=0}},{key:"shouldShowStartButton",value:function(){var e=this.props.session.users,t=this.getGameData().minUsers;return this.isInSession()&&e.length>=t}},{key:"isFull",value:function(){var e=this.props.session.users,t=this.getGameData().maxUsers;return e.length>=t}},{key:"handleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var e,t=this,a=this.props.session.users.map((function(e){return x.a.createElement(H.a,{key:e},x.a.createElement($.a,{src:se.getPhotoUrl(e)}),x.a.createElement(Y.a,{primary:se.getName(e)}))}));if(this.gameDataExists())if(this.shouldShowStartButton()){var s={pathname:this.getGamePath(),state:{id:this.props.session.id,creator:this.props.session.creator,users:this.props.session.users,title:this.getTitle()}};e=x.a.createElement(Ua.a,{style:{textDecoration:"none"},to:s},x.a.createElement(T.a,{color:"primary"},"Start game"))}else e=x.a.createElement(T.a,{onClick:function(){return t.joinSession()},disabled:this.isInSession()||this.isFull()},this.isFull()?"Game is full":"Join");else e=x.a.createElement(T.a,{disabled:!0},"Cannot join unknown game type");return x.a.createElement(E.a,{style:this.props.style},x.a.createElement(ls.a,{action:x.a.createElement(_.a,{onClick:function(){return t.handleExpand()}},this.state.expanded?x.a.createElement(ds.a,null):x.a.createElement(h.a,null)),title:this.getTitle(),subheader:this.getSubtitle()}),x.a.createElement(us.a,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},x.a.createElement(os.a,null,x.a.createElement(b.a,{variant:"subtitle1"},this.getDescription()),x.a.createElement(ms.a,null),x.a.createElement(B.a,null,x.a.createElement(b.a,{variant:"subtitle2",color:"textSecondary",paragraph:!0},this.getUserListHeader()),a),x.a.createElement(ms.a,null),x.a.createElement(b.a,{color:"textSecondary"},this.getAuthors()))),x.a.createElement(ns.a,null,e,x.a.createElement(T.a,{onClick:function(){return t.deleteSession()},disabled:!this.isGameCreator()},"Delete")))}}]),t}(w.Component),ys={marginTop:14},vs=Object.freeze({ALL_GAMES:0,MY_GAMES:1,GAMES_WITH_SPACE:2,GAMES_I_AM_IN:3}),gs=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={sessions:null,filterType:vs.MY_GAMES},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"componentWillMount",value:function(){var e=this;j.a.database().ref("/session-metadata").on("value",(function(t){var a=t.val();if(null!==a){var s=Object.keys(a).map((function(e){return{id:e,type:a[e].type,users:a[e].users,creator:a[e].creator,timestamp:a[e].timestamp}}));e.setState({sessions:s})}else e.setState({sessions:[]})})),document.title="Studio Games!"}},{key:"componentWillUnmount",value:function(){j.a.database().ref("/session-metadata").off()}},{key:"onFilterGames",value:function(e){this.setState({filterType:e})}},{key:"getFilterFunction",value:function(){var e=j.a.auth().currentUser.uid;switch(this.state.filterType){case vs.ALL_GAMES:return function(e){return!0};case vs.MY_GAMES:return function(t){return t.creator===e};case vs.GAMES_WITH_SPACE:return function(e){return e.type in Da&&e.users.length<Da[e.type].maxUsers};case vs.GAMES_I_AM_IN:return function(t){return t.users.indexOf(e)>=0};default:console.log("There's been an Error")}}},{key:"render",value:function(){var e=this;if(null===this.state.sessions)return x.a.createElement("center",{style:ys},x.a.createElement(c.a,{size:56}));var t=this.state.sessions.filter(this.getFilterFunction());t.sort((function(e,t){return t.timestamp-e.timestamp}));var a=t.map((function(e){return x.a.createElement(fs,{key:e.id,style:ys,session:e})}));return x.a.createElement("div",null,x.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"20px"}},x.a.createElement(as,{style:ys,filterType:this.state.filterType,onFilterGames:function(t){return e.onFilterGames(t)}}),x.a.createElement($a,{style:ys})),a)}}]),t}(w.Component),bs=a(655),ks=a(657),Es={width:56,height:56,marginTop:56},ws=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={authIsLoading:!0,userApiIsLoading:!0,user:null},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"componentWillMount",value:function(){var e=this;0===j.a.apps.length&&j.a.initializeApp({apiKey:"AIzaSyCJPYgNY-rgkZul563iUipYrFKD7BLt_HA",authDomain:"studio-multiplayer-game.firebaseapp.com",databaseURL:"https://studio-multiplayer-game.firebaseio.com",projectId:"studio-multiplayer-game",storageBucket:"studio-multiplayer-game.appspot.com",messagingSenderId:"953054375831"}),j.a.auth().onAuthStateChanged((function(t){return e.setState({authIsLoading:!1,user:t})})),ie.startListeningForChanges().then((function(){return e.setState({userApiIsLoading:!1})}))}},{key:"componentWillUnmount",value:function(){ie.stopListeningForChanges()}},{key:"signIn",value:function(){this.setState({authIsLoading:!0});var e=new j.a.auth.GoogleAuthProvider;j.a.auth().signInWithRedirect(e)}},{key:"render",value:function(){var e=this;if(this.state.authIsLoading||null!==this.state.user){if(this.state.authIsLoading||this.state.userApiIsLoading)return x.a.createElement("center",null,x.a.createElement(c.a,{style:Es,size:56}));var t=Object.keys(Da).map((function(e){return x.a.createElement(bs.a,{key:e,path:"/"+e+"/:id",component:Da[e].component})}));return x.a.createElement("div",null,x.a.createElement(Ma,null),x.a.createElement(ks.a,null,x.a.createElement(bs.a,{path:"/",component:gs,exact:!0}),x.a.createElement(bs.a,{path:"/dataViewer",component:I,exact:!0}),t,x.a.createElement(bs.a,{path:"/:type/:id",component:za,exact:!0})))}return x.a.createElement("center",null,x.a.createElement(N.a,{style:Es,onClick:function(){return e.signIn()}},x.a.createElement(Aa.a,null)))}}]),t}(w.Component),xs=a(290),Cs=a.n(xs),Ss=a(32),Os=a.n(Ss),js=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ls(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Is=a(656);Os.a.render(x.a.createElement((function(){return x.a.createElement(Is.a,null,x.a.createElement(Cs.a,null,x.a.createElement(ws,null)))}),null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");js?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ls(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Ls(e)}))}}()}},[[292,1,2]]]);
//# sourceMappingURL=main.214c48ea.chunk.js.map